define("famous/core/Entity",["require","exports","module"],function(t,e,n){function i(t){return a[t]}function r(t,e){a[t]=e}function o(t){var e=a.length;return r(e,t),e}function s(t){r(t,null)}var a=[];n.exports={register:o,unregister:s,get:i,set:r}}),define("famous/core/Transform",["require","exports","module"],function(t,e,n){function i(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function r(t){return Math.sqrt(i(t))}function o(t){return 0>t?-1:1}var s={};s.precision=1e-6,s.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s.multiply4x4=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]},s.multiply=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2],t[1]*e[0]+t[5]*e[1]+t[9]*e[2],t[2]*e[0]+t[6]*e[1]+t[10]*e[2],0,t[0]*e[4]+t[4]*e[5]+t[8]*e[6],t[1]*e[4]+t[5]*e[5]+t[9]*e[6],t[2]*e[4]+t[6]*e[5]+t[10]*e[6],0,t[0]*e[8]+t[4]*e[9]+t[8]*e[10],t[1]*e[8]+t[5]*e[9]+t[9]*e[10],t[2]*e[8]+t[6]*e[9]+t[10]*e[10],0,t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14],1]},s.thenMove=function(t,e){return e[2]||(e[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+e[0],t[13]+e[1],t[14]+e[2],1]},s.moveThen=function(t,e){t[2]||(t[2]=0);var n=t[0]*e[0]+t[1]*e[4]+t[2]*e[8],i=t[0]*e[1]+t[1]*e[5]+t[2]*e[9],r=t[0]*e[2]+t[1]*e[6]+t[2]*e[10];return s.thenMove(e,[n,i,r])},s.translate=function(t,e,n){return void 0===n&&(n=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1]},s.thenScale=function(t,e){return[e[0]*t[0],e[1]*t[1],e[2]*t[2],0,e[0]*t[4],e[1]*t[5],e[2]*t[6],0,e[0]*t[8],e[1]*t[9],e[2]*t[10],0,e[0]*t[12],e[1]*t[13],e[2]*t[14],1]},s.scale=function(t,e,n){return void 0===n&&(n=1),void 0===e&&(e=t),[t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1]},s.rotateX=function(t){var e=Math.cos(t),n=Math.sin(t);return[1,0,0,0,0,e,n,0,0,-n,e,0,0,0,0,1]},s.rotateY=function(t){var e=Math.cos(t),n=Math.sin(t);return[e,0,-n,0,0,1,0,0,n,0,e,0,0,0,0,1]},s.rotateZ=function(t){var e=Math.cos(t),n=Math.sin(t);return[e,n,0,0,-n,e,0,0,0,0,1,0,0,0,0,1]},s.rotate=function(t,e,n){var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),s=Math.sin(e),a=Math.cos(n),u=Math.sin(n),c=[o*a,i*u+r*s*a,r*u-i*s*a,0,-o*u,i*a-r*s*u,r*a+i*s*u,0,s,-r*o,i*o,0,0,0,0,1];return c},s.rotateAxis=function(t,e){var n=Math.sin(e),i=Math.cos(e),r=1-i,o=t[0]*t[0]*r,s=t[0]*t[1]*r,a=t[0]*t[2]*r,u=t[1]*t[1]*r,c=t[1]*t[2]*r,h=t[2]*t[2]*r,l=t[0]*n,p=t[1]*n,f=t[2]*n,d=[o+i,s+f,a-p,0,s-f,u+i,c+l,0,a+p,c-l,h+i,0,0,0,0,1];return d},s.aboutOrigin=function(t,e){var n=t[0]-(t[0]*e[0]+t[1]*e[4]+t[2]*e[8]),i=t[1]-(t[0]*e[1]+t[1]*e[5]+t[2]*e[9]),r=t[2]-(t[0]*e[2]+t[1]*e[6]+t[2]*e[10]);return s.thenMove(e,[n,i,r])},s.skew=function(t,e,n){return[1,Math.tan(e),0,0,Math.tan(n),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},s.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},s.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},s.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},s.getTranslate=function(t){return[t[12],t[13],t[14]]},s.inverse=function(t){var e=t[5]*t[10]-t[6]*t[9],n=t[4]*t[10]-t[6]*t[8],i=t[4]*t[9]-t[5]*t[8],r=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],s=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],c=t[0]*t[5]-t[1]*t[4],h=t[0]*e-t[1]*n+t[2]*i,l=1/h,p=[l*e,-l*r,l*a,0,-l*n,l*o,-l*u,0,l*i,-l*s,l*c,0,0,0,0,1];return p[12]=-t[12]*p[0]-t[13]*p[4]-t[14]*p[8],p[13]=-t[12]*p[1]-t[13]*p[5]-t[14]*p[9],p[14]=-t[12]*p[2]-t[13]*p[6]-t[14]*p[10],p},s.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},s.interpret=function(t){var e=[t[0],t[1],t[2]],n=o(e[0]),a=r(e),u=[e[0]+n*a,e[1],e[2]],c=2/i(u);if(c>=1/0)return{translate:s.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];h[0]=1-c*u[0]*u[0],h[5]=1-c*u[1]*u[1],h[10]=1-c*u[2]*u[2],h[1]=-c*u[0]*u[1],h[2]=-c*u[0]*u[2],h[6]=-c*u[1]*u[2],h[4]=h[1],h[8]=h[2],h[9]=h[6];var l=s.multiply(h,t),p=[l[5],l[6]],f=o(p[0]),d=r(p),g=[p[0]+f*d,p[1]],m=2/i(g),v=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];v[5]=1-m*g[0]*g[0],v[10]=1-m*g[1]*g[1],v[6]=-m*g[0]*g[1],v[9]=v[6];var y=s.multiply(v,h),_=s.multiply(y,t),x=s.scale(_[0]<0?-1:1,_[5]<0?-1:1,_[10]<0?-1:1);_=s.multiply(_,x),y=s.multiply(x,y);var w={};return w.translate=s.getTranslate(t),w.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],w.rotate[0]||(w.rotate[0]=0,w.rotate[2]=Math.atan2(y[4],y[5])),w.scale=[_[0],_[5],_[10]],w.skew=[Math.atan2(_[9],w.scale[2]),Math.atan2(_[8],w.scale[2]),Math.atan2(_[4],w.scale[0])],Math.abs(w.rotate[0])+Math.abs(w.rotate[2])>1.5*Math.PI&&(w.rotate[1]=Math.PI-w.rotate[1],w.rotate[1]>Math.PI&&(w.rotate[1]-=2*Math.PI),w.rotate[1]<-Math.PI&&(w.rotate[1]+=2*Math.PI),w.rotate[0]<0?w.rotate[0]+=Math.PI:w.rotate[0]-=Math.PI,w.rotate[2]<0?w.rotate[2]+=Math.PI:w.rotate[2]-=Math.PI),w},s.average=function(t,e,n){n=void 0===n?.5:n;for(var i=s.interpret(t),r=s.interpret(e),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-n)*i.translate[a]+n*r.translate[a],o.rotate[a]=(1-n)*i.rotate[a]+n*r.rotate[a],o.scale[a]=(1-n)*i.scale[a]+n*r.scale[a],o.skew[a]=(1-n)*i.skew[a]+n*r.skew[a];return s.build(o)},s.build=function(t){var e=s.scale(t.scale[0],t.scale[1],t.scale[2]),n=s.skew(t.skew[0],t.skew[1],t.skew[2]),i=s.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return s.thenMove(s.multiply(s.multiply(i,n),e),t.translate)},s.equals=function(t,e){return!s.notEquals(t,e)},s.notEquals=function(t,e){return t===e?!1:!(t&&e)||t[12]!==e[12]||t[13]!==e[13]||t[14]!==e[14]||t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[4]!==e[4]||t[5]!==e[5]||t[6]!==e[6]||t[8]!==e[8]||t[9]!==e[9]||t[10]!==e[10]},s.normalizeRotation=function(t){var e=t.slice(0);for((e[0]===.5*Math.PI||e[0]===.5*-Math.PI)&&(e[0]=-e[0],e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]>.5*Math.PI&&(e[0]=e[0]-Math.PI,e[1]=Math.PI-e[1],e[2]-=Math.PI),e[0]<.5*-Math.PI&&(e[0]=e[0]+Math.PI,e[1]=-Math.PI-e[1],e[2]-=Math.PI);e[1]<-Math.PI;)e[1]+=2*Math.PI;for(;e[1]>=Math.PI;)e[1]-=2*Math.PI;for(;e[2]<-Math.PI;)e[2]+=2*Math.PI;for(;e[2]>=Math.PI;)e[2]-=2*Math.PI;return e},s.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],s.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],n.exports=s}),define("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,e,n){function i(){this.result={}}function r(t,e){return[t[0]*e[0]+t[1]*e[4]+t[2]*e[8],t[0]*e[1]+t[1]*e[5]+t[2]*e[9],t[0]*e[2]+t[1]*e[6]+t[2]*e[10]]}var o=t("./Transform");i._instance=new i,i.parse=function(t,e){return i._instance.parse(t,e)},i.prototype.parse=function(t,e){return this.reset(),this._parseSpec(t,e,o.identity),this.result},i.prototype.reset=function(){this.result={}};var s=[0,0];i.prototype._parseSpec=function(t,e,n){var i,a,u,c,h,l,p;if("number"==typeof t){if(i=t,u=e.transform,l=e.align||s,e.size&&l&&(l[0]||l[1])){var f=[l[0]*e.size[0],l[1]*e.size[1],0];u=o.thenMove(u,r(f,n))}this.result[i]={transform:u,opacity:e.opacity,origin:e.origin||s,align:e.align||s,size:e.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],e,n);else{a=t.target,u=e.transform,c=e.opacity,h=e.origin,l=e.align,p=e.size;var g=n;if(void 0!==t.opacity&&(c=e.opacity*t.opacity),t.transform&&(u=o.multiply(e.transform,t.transform)),t.origin&&(h=t.origin,g=e.transform),t.align&&(l=t.align),t.size||t.proportions){var m=p;p=[p[0],p[1]],t.size&&(void 0!==t.size[0]&&(p[0]=t.size[0]),void 0!==t.size[1]&&(p[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(p[0]=p[0]*t.proportions[0]),void 0!==t.proportions[1]&&(p[1]=p[1]*t.proportions[1])),m&&(l&&(l[0]||l[1])&&(u=o.thenMove(u,r([l[0]*m[0],l[1]*m[1],0],n))),h&&(h[0]||h[1])&&(u=o.moveThen([-h[0]*p[0],-h[1]*p[1],0],u))),g=e.transform,h=null,l=null}this._parseSpec(a,{transform:u,opacity:c,origin:h,align:l,size:p},g)}}},n.exports=i}),define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,e,n){function i(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function r(t,e,n){for(var i=s.parse(t,e),a=Object.keys(i),u=0;u<a.length;u++){var c=a[u],h=o.get(c),l=i[c];l.allocator=e.allocator;var p=h.commit(l);p?r(p,e,n):n[c]=l}}var o=t("./Entity"),s=t("./SpecParser");i.prototype.add=function(t){var e=t instanceof i?t:new i(t);return this._child instanceof Array?this._child.push(e):this._child?(this._child=[this._child,e],this._hasMultipleChildren=!0,this._childResult=[]):this._child=e,e},i.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},i.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof i?t:this},i.prototype.getSize=function(){var t=null,e=this.get();return e&&e.getSize&&(t=e.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},i.prototype.commit=function(t){for(var e=Object.keys(this._prevResults),n=0;n<e.length;n++){var i=e[n];if(void 0===this._resultCache[i]){var s=o.get(i);s.cleanup&&s.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},r(this.render(),t,this._resultCache)},i.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var e=this._child,n=0;n<e.length;n++)t[n]=e[n].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},n.exports=i}),define("famous/core/EventEmitter",["require","exports","module"],function(t,e,n){function i(){this.listeners={},this._owner=this}i.prototype.emit=function(t,e){var n=this.listeners[t];if(n)for(var i=0;i<n.length;i++)n[i].call(this._owner,e);return this},i.prototype.on=function(t,e){t in this.listeners||(this.listeners[t]=[]);var n=this.listeners[t].indexOf(e);return 0>n&&this.listeners[t].push(e),this},i.prototype.addListener=i.prototype.on,i.prototype.removeListener=function(t,e){var n=this.listeners[t];if(void 0!==n){var i=n.indexOf(e);i>=0&&n.splice(i,1)}return this},i.prototype.bindThis=function(t){this._owner=t},n.exports=i}),define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,e,n){function i(){r.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var r=t("./EventEmitter");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.setInputHandler=function(t,e){t.trigger=e.trigger.bind(e),e.subscribe&&e.unsubscribe&&(t.subscribe=e.subscribe.bind(e),t.unsubscribe=e.unsubscribe.bind(e))},i.setOutputHandler=function(t,e){e instanceof i&&e.bindThis(t),t.pipe=e.pipe.bind(e),t.unpipe=e.unpipe.bind(e),t.on=e.on.bind(e),t.addListener=t.on,t.removeListener=e.removeListener.bind(e)},i.prototype.emit=function(t,e){r.prototype.emit.apply(this,arguments);var n=0;for(n=0;n<this.downstream.length;n++)this.downstream[n].trigger&&this.downstream[n].trigger(t,e);for(n=0;n<this.downstreamFn.length;n++)this.downstreamFn[n](t,e);return this},i.prototype.trigger=i.prototype.emit,i.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,n=e.indexOf(t);return 0>n&&e.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},i.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var e=t instanceof Function?this.downstreamFn:this.downstream,n=e.indexOf(t);return n>=0?(e.splice(n,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},i.prototype.on=function(t){if(r.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var e=this.trigger.bind(this,t);this.upstreamListeners[t]=e;for(var n=0;n<this.upstream.length;n++)this.upstream[n].on(t,e)}return this},i.prototype.addListener=i.prototype.on,i.prototype.subscribe=function(t){var e=this.upstream.indexOf(t);if(0>e){this.upstream.push(t);for(var n in this.upstreamListeners)t.on(n,this.upstreamListeners[n])}return this},i.prototype.unsubscribe=function(t){var e=this.upstream.indexOf(t);if(e>=0){this.upstream.splice(e,1);for(var n in this.upstreamListeners)t.removeListener(n,this.upstreamListeners[n])}return this},n.exports=i}),define("famous/core/ElementAllocator",["require","exports","module"],function(t,e,n){function i(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}i.prototype.migrate=function(t){var e=this.container;if(t!==e){if(e instanceof DocumentFragment)t.appendChild(e);else for(;e.hasChildNodes();)t.appendChild(e.firstChild);this.container=t}},i.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var e,n=this.detachedNodes[t];return n.length>0?e=n.pop():(e=document.createElement(t),this.container.appendChild(e)),this.nodeCount++,e},i.prototype.deallocate=function(t){var e=t.nodeName.toLowerCase(),n=this.detachedNodes[e];n.push(t),this.nodeCount--},i.prototype.getNodeCount=function(){return this.nodeCount},n.exports=i}),define("famous/utilities/Utility",["require","exports","module"],function(t,e,n){var i={};i.Direction={X:0,Y:1,Z:2},i.after=function(t,e){var n=t;return function(){n--,0===n&&e.apply(this,arguments)}},i.loadURL=function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===this.readyState&&e&&e(this.responseText)},n.open("GET",t),n.send()},i.createDocumentFragmentFromHTML=function(t){var e=document.createElement("div");e.innerHTML=t;for(var n=document.createDocumentFragment();e.hasChildNodes();)n.appendChild(e.firstChild);return n},i.clone=function(t){var e;if("object"==typeof t){e=t instanceof Array?[]:{};for(var n in t)if("object"==typeof t[n]&&null!==t[n])if(t[n]instanceof Array){e[n]=new Array(t[n].length);for(var r=0;r<t[n].length;r++)e[n][r]=i.clone(t[n][r])}else e[n]=i.clone(t[n]);else e[n]=t[n]}else e=t;return e},n.exports=i}),define("famous/transitions/MultipleTransition",["require","exports","module","../utilities/Utility"],function(t,e,n){function i(t){this.method=t,this._instances=[],this.state=[]}var r=t("../utilities/Utility");i.SUPPORTS_MULTIPLE=!0,i.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},i.prototype.set=function(t,e,n){for(var i=r.after(t.length,n),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],e,i)},i.prototype.reset=function(t){for(var e=0;e<t.length;e++)this._instances[e]||(this._instances[e]=new this.method),this._instances[e].reset(t[e])},n.exports=i}),define("famous/transitions/TweenTransition",["require","exports","module"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function r(t,e,n){return(1-n)*t+n*e}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function s(t,e){var n={curve:e.curve};return e.duration&&(n.duration=e.duration),e.speed&&(n.speed=e.speed),t instanceof Object&&(void 0!==t.duration&&(n.duration=t.duration),t.curve&&(n.curve=t.curve),t.speed&&(n.speed=t.speed)),"string"==typeof n.curve&&(n.curve=i.getCurve(n.curve)),n}function a(t,e,n,i,r){var o,s=1e-7,a=(n(r)-n(r-s))/s;if(t instanceof Array){o=[];for(var u=0;u<t.length;u++)o[u]="number"==typeof t[u]?a*(t[u]-e[u])/i:0}else o=a*(t-e)/i;return o}function u(t,e,n){var i;if(t instanceof Array){i=[];for(var o=0;o<t.length;o++)i[o]="number"==typeof t[o]?r(t[o],e[o],n):t[o]}else i=r(t,e,n);return i}i.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},i.SUPPORTS_MULTIPLE=!0,i.DEFAULT_OPTIONS={curve:i.Curves.linear,duration:500,speed:0};var c={};i.registerCurve=function(t,e){return c[t]?!1:(c[t]=e,!0)},i.unregisterCurve=function(t){return c[t]?(delete c[t],!0):!1},i.getCurve=function(t){var e=c[t];if(void 0!==e)return e;throw new Error("curve not registered")},i.getCurves=function(){return c},i.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},i.prototype.set=function(t,e,n){if(!e)return this.reset(t),void(n&&n());if(this._startValue=o(this.get()),e=s(e,this.options),e.speed){var i=this._startValue;if(i instanceof Object){var r=0;for(var a in i)r+=(t[a]-i[a])*(t[a]-i[a]);e.duration=Math.sqrt(r)/e.speed}else e.duration=Math.abs(t-i)/e.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(e.velocity),this._duration=e.duration,this._curve=e.curve,this._active=!0,this._callback=n},i.prototype.reset=function(t,e){if(this._callback){var n=this._callback;this._callback=void 0,n()}this.state=o(t),this.velocity=o(e),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},i.prototype.getVelocity=function(){return this.velocity},i.prototype.get=function(t){return this.update(t),this.state},i.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var e=t-this._startTime;if(e>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>e)this.state=this._startValue,this.velocity=this._startVelocity;else{var n=e/this._duration;this.state=u(this._startValue,this._endValue,this._curve(n)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,n)}}}else if(this._callback){var i=this._callback;this._callback=void 0,i()}},i.prototype.isActive=function(){return this._active},i.prototype.halt=function(){this.reset(this.get())},i.registerCurve("linear",i.Curves.linear),i.registerCurve("easeIn",i.Curves.easeIn),i.registerCurve("easeOut",i.Curves.easeOut),i.registerCurve("easeInOut",i.Curves.easeInOut),i.registerCurve("easeOutBounce",i.Curves.easeOutBounce),i.registerCurve("spring",i.Curves.spring),i.customCurve=function(t,e){return t=t||0,e=e||0,function(n){return t*n+(-2*t-e+3)*n*n+(t+e-2)*n*n*n}},n.exports=i}),define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,e,n){function i(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function r(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var e=null,n=this.currentAction[0],i=this.currentAction[1];i instanceof Object&&i.method?(e=i.method,"string"==typeof e&&(e=a[e])):e=s,this._currentMethod!==e&&(this._engineInstance=!(n instanceof Object)||e.SUPPORTS_MULTIPLE===!0||n.length<=e.SUPPORTS_MULTIPLE?new e:new o(e),this._currentMethod=e),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(i.velocity=this.velocity),this._engineInstance.set(n,i,r.bind(this))}var o=t("./MultipleTransition"),s=t("./TweenTransition"),a={};i.register=function(t){var e=!0;for(var n in t)i.registerMethod(n,t[n])||(e=!1);return e},i.registerMethod=function(t,e){return t in a?!1:(a[t]=e,!0)},i.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},i.prototype.set=function(t,e,n){if(!e)return this.reset(t),n&&n(),this;var i=[t,e];return this.actionQueue.push(i),this.callbackQueue.push(n),this.currentAction||r.call(this),this},i.prototype.reset=function(t,e){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=e,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},i.prototype.delay=function(t,e){this.set(this.get(),{duration:t,curve:function(){return 0}},e)},i.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},i.prototype.isActive=function(){return!!this.currentAction},i.prototype.halt=function(){return this.set(this.get())},n.exports=i}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","../transitions/Transitionable"],function(t,e,n){function i(t){return[t.clientWidth,t.clientHeight]}function r(t){this.container=t,this._allocator=new a(t),this._node=new o,this._eventOutput=new s,this._size=i(this.container),this._perspectiveState=new c(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:u.identity,opacity:1,origin:h,align:h,size:this._size},this._eventOutput.on("resize",function(){this.setSize(i(this.container))}.bind(this))}var o=t("./RenderNode"),s=t("./EventHandler"),a=t("./ElementAllocator"),u=t("./Transform"),c=t("../transitions/Transitionable"),h=[0,0],l=!("perspective"in document.documentElement.style),p=l?function(t,e){t.style.webkitPerspective=e?e.toFixed()+"px":""}:function(t,e){t.style.perspective=e?e.toFixed()+"px":""};r.prototype.getAllocator=function(){return this._allocator},r.prototype.add=function(t){return this._node.add(t)},r.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},r.prototype.getSize=function(){return this._size},r.prototype.setSize=function(t){t||(t=i(this.container)),this._size[0]=t[0],this._size[1]=t[1]},r.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var e=this._perspectiveState.get();e!==this._perspective&&(p(this.container,e),this._perspective=e),this._node.commit(this._nodeContext)},r.prototype.getPerspective=function(){return this._perspectiveState.get()},r.prototype.setPerspective=function(t,e,n){return this._perspectiveState.set(t,e,n)},r.prototype.emit=function(t,e){return this._eventOutput.emit(t,e)},r.prototype.on=function(t,e){return this._eventOutput.on(t,e)},r.prototype.removeListener=function(t,e){return this._eventOutput.removeListener(t,e)},r.prototype.pipe=function(t){return this._eventOutput.pipe(t)},r.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},n.exports=r}),define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,e,n){function i(t){this._value=t,this.eventOutput=null}function r(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");i.patch=function(t){for(var e=new i(t),n=1;n<arguments.length;n++)e.patch(arguments[n]);return t},i.prototype.patch=function(){for(var t=this._value,e=0;e<arguments.length;e++){var n=arguments[e];for(var i in n)i in t&&n[i]&&n[i].constructor===Object&&t[i]&&t[i].constructor===Object?(t.hasOwnProperty(i)||(t[i]=Object.create(t[i])),this.key(i).patch(n[i]),this.eventOutput&&this.eventOutput.emit("change",{id:i,value:this.key(i).value()})):this.set(i,n[i])}return this},i.prototype.setOptions=i.prototype.patch,i.prototype.key=function(t){var e=new i(this._value[t]);return(!(e._value instanceof Object)||e._value instanceof Array)&&(e._value={}),e},i.prototype.get=function(t){return t?this._value[t]:this._value},i.prototype.getOptions=i.prototype.get,i.prototype.set=function(t,e){var n=this.get(t);return this._value[t]=e,this.eventOutput&&e!==n&&this.eventOutput.emit("change",{id:t,value:e}),this},i.prototype.on=function(){return r.call(this),this.on.apply(this,arguments)},i.prototype.removeListener=function(){return r.call(this),this.removeListener.apply(this,arguments)},i.prototype.pipe=function(){return r.call(this),this.pipe.apply(this,arguments)},i.prototype.unpipe=function(){return r.call(this),this.unpipe.apply(this,arguments)},n.exports=i}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,e,n){function i(){S.runLoop?(d.step(),window.requestAnimationFrame(i)):w=!1}function r(){for(var t=0;t<g.length;t++)g[t].emit("resize");b.emit("resize")}function o(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),s()}function s(){return document.body?(document.body.classList.add("famous-root"),void document.documentElement.classList.add("famous-root")):void d.nextTick(s)}function a(t,e){return document.body?void document.body.addEventListener(t,e):void d.nextTick(addEventListener.bind(this,t,e))}function u(t,e){return document.body?(document.body.appendChild(e),void t.emit("resize")):void d.nextTick(u.bind(this,t,e))}var c,h,l=t("./Context"),p=t("./EventHandler"),f=t("./OptionsManager"),d={},g=[],m=[],v=0,y=0,_=[],x=Date.now(),w=!0,M={},b=new p,S={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},O=new f(S),T=10;d.step=function(){v++,y=v;var t=Date.now();if(!(h&&h>t-x)){var e=0;c=t-x,x=t,b.emit("prerender");for(var n=m.length;n--;)m.shift()(v);for(;_.length&&Date.now()-t<T;)_.shift().call(this);for(e=0;e<g.length;e++)g[e].update();b.emit("postrender")}},window.requestAnimationFrame(i),window.addEventListener("resize",r,!1),r();var E=!1;d.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(d):b.pipe(t)},d.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(d):b.unpipe(t)},d.on=function(t,e){return t in M||(M[t]=b.emit.bind(b,t),a(t,M[t])),b.on(t,e)},d.emit=function(t,e){return b.emit(t,e)},d.removeListener=function(t,e){return b.removeListener(t,e)},d.getFPS=function(){return 1e3/c},d.setFPSCap=function(t){h=Math.floor(1e3/t)},d.getOptions=function(t){return O.getOptions(t)},d.setOptions=function(){return O.setOptions.apply(O,arguments)},d.createContext=function(t){!E&&S.appMode&&d.nextTick(o);var e=!1;t||(t=document.createElement(S.containerType),t.classList.add(S.containerClass),e=!0);var n=new l(t);return d.registerContext(n),e&&u(n,t),n},d.registerContext=function(t){return g.push(t),t},d.getContexts=function(){return g},d.deregisterContext=function(t){var e=g.indexOf(t);e>=0&&g.splice(e,1)},d.nextTick=function(t){m.push(t)},d.defer=function(t){_.push(t)},O.on("change",function(t){"fpsCap"===t.id?d.setFPSCap(t.value):"runLoop"===t.id&&!w&&t.value&&(w=!0,window.requestAnimationFrame(i))}),n.exports=d}),define("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,e,n){function i(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new h,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=c.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function r(t){for(var e in this._eventOutput.listeners)t.addEventListener(e,this.eventForwarder)}function o(t){for(var e in this._eventOutput.listeners)t.removeEventListener(e,this.eventForwarder)}function s(t){t[12]=Math.round(t[12]*f)/f,t[13]=Math.round(t[13]*f)/f;for(var e="matrix3d(",n=0;15>n;n++)e+=t[n]<1e-6&&t[n]>-1e-6?"0,":t[n]+",";return e+=t[15]+")"}function a(t){return 100*t[0]+"% "+100*t[1]+"%"}function u(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var c=t("./Entity"),h=t("./EventHandler"),l=t("./Transform"),p=!("transform"in document.documentElement.style),f=window.devicePixelRatio||1;i.prototype.on=function(t,e){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,e)},i.prototype.removeListener=function(t,e){this._eventOutput.removeListener(t,e)},i.prototype.emit=function(t,e){e&&!e.origin&&(e.origin=this);var n=this._eventOutput.emit(t,e);return n&&e&&e.stopPropagation&&e.stopPropagation(),n},i.prototype.pipe=function(t){return this._eventOutput.pipe(t)},i.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},i.prototype.render=function(){return this.id};var d;d=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,e){t.style.zIndex=1e6*e[14]|0,t.style.transform=s(e)}:p?function(t,e){t.style.webkitTransform=s(e)}:function(t,e){t.style.transform=s(e)};var g=p?function(t,e){t.style.webkitTransformOrigin=a(e)}:function(t,e){t.style.transformOrigin=a(e)},m=p?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};i.prototype.commit=function(t){var e=this._element;if(e){{var n=t.transform,i=t.opacity,r=t.origin;t.size}if(!n&&this._matrix)return this._matrix=null,this._opacity=0,void m(e);if(u(this._origin,r)&&(this._originDirty=!0),l.notEquals(this._matrix,n)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==i&&(this._opacity=i,e.style.opacity=i>=1?"0.999999":i),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(r?(this._origin||(this._origin=[0,0]),this._origin[0]=r[0],this._origin[1]=r[1]):this._origin=null,g(e,this._origin),this._originDirty=!1),n||(n=l.identity),this._matrix=n;var o=this._size?l.thenMove(n,[-this._size[0]*r[0],-this._size[1]*r[1],0]):n;d(e,o),this._transformDirty=!1}}},i.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},i.prototype.attach=function(t){this._element=t,r.call(this,t)},i.prototype.detach=function(){var t=this._element;return t&&(o.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},n.exports=i}),define("famous/core/Surface",["require","exports","module","./ElementOutput"],function(t,e,n){function i(t){h.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function r(t){for(var e=0;e<this._dirtyClasses.length;e++)t.classList.remove(this._dirtyClasses[e]);this._dirtyClasses=[]}function o(t){for(var e in this.properties)t.style[e]=this.properties[e]}function s(t){for(var e in this.properties)t.style[e]=""}function a(t){for(var e in this.attributes)t.setAttribute(e,this.attributes[e])}function u(t){for(var e in this.attributes)t.removeAttribute(e)}function c(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]:t!==e}var h=t("./ElementOutput");i.prototype=Object.create(h.prototype),i.prototype.constructor=i,i.prototype.elementType="div",i.prototype.elementClass="famous-surface",i.prototype.setAttributes=function(t){for(var e in t){if("style"===e)throw new Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');
this.attributes[e]=t[e]}this._attributesDirty=!0},i.prototype.getAttributes=function(){return this.attributes},i.prototype.setProperties=function(t){for(var e in t)this.properties[e]=t[e];return this._stylesDirty=!0,this},i.prototype.getProperties=function(){return this.properties},i.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},i.prototype.removeClass=function(t){var e=this.classList.indexOf(t);return e>=0&&(this._dirtyClasses.push(this.classList.splice(e,1)[0]),this._classesDirty=!0),this},i.prototype.toggleClass=function(t){var e=this.classList.indexOf(t);return e>=0?this.removeClass(t):this.addClass(t),this},i.prototype.setClasses=function(t){var e=0,n=[];for(e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&n.push(this.classList[e]);for(e=0;e<n.length;e++)this.removeClass(n[e]);for(e=0;e<t.length;e++)this.addClass(t[e]);return this},i.prototype.getClassList=function(){return this.classList},i.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},i.prototype.getContent=function(){return this.content},i.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},i.prototype.setup=function(t){var e=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var n=0;n<this.elementClass.length;n++)e.classList.add(this.elementClass[n]);else e.classList.add(this.elementClass);e.style.display="",this.attach(e),this._opacity=null,this._currentTarget=e,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},i.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var e=this._currentTarget,n=t.size;if(this._classesDirty){r.call(this,e);for(var i=this.getClassList(),s=0;s<i.length;s++)e.classList.add(i[s]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(o.call(this,e),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(a.call(this,e),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var u=t.size;if(n=[this.size[0],this.size[1]],void 0===n[0]&&(n[0]=u[0]),void 0===n[1]&&(n[1]=u[1]),n[0]===!0||n[1]===!0){if(n[0]===!0)if(this._trueSizeCheck||0===this._size[0]){var l=e.offsetWidth;this._size&&this._size[0]!==l&&(this._size[0]=l,this._sizeDirty=!0),n[0]=l}else this._size&&(n[0]=this._size[0]);if(n[1]===!0)if(this._trueSizeCheck||0===this._size[1]){var p=e.offsetHeight;this._size&&this._size[1]!==p&&(this._size[1]=p,this._sizeDirty=!0),n[1]=p}else this._size&&(n[1]=this._size[1]);this._trueSizeCheck=!1}}c(this._size,n)&&(this._size||(this._size=[0,0]),this._size[0]=n[0],this._size[1]=n[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(e.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",e.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(e),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),h.prototype.commit.call(this,t)},i.prototype.cleanup=function(t){var e=0,n=this._currentTarget;this._eventOutput.emit("recall"),this.recall(n),n.style.display="none",n.style.opacity="",n.style.width="",n.style.height="",s.call(this,n),u.call(this,n);var i=this.getClassList();for(r.call(this,n),e=0;e<i.length;e++)n.classList.remove(i[e]);if(this.elementClass)if(this.elementClass instanceof Array)for(e=0;e<this.elementClass.length;e++)n.classList.remove(this.elementClass[e]);else n.classList.remove(this.elementClass);this.detach(n),this._currentTarget=null,t.deallocate(n)},i.prototype.deploy=function(t){var e=this.getContent();if(e instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}else t.innerHTML=e},i.prototype.recall=function(t){for(var e=document.createDocumentFragment();t.hasChildNodes();)e.appendChild(t.firstChild);this.setContent(e)},i.prototype.getSize=function(){return this._size?this._size:this.size},i.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this},n.exports=i}),define("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","../core/Transform","../utilities/Utility"],function(t,e,n){function i(t){this._final=a.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new s(this._finalTranslate),this.rotate=new s(this._finalRotate),this.skew=new s(this._finalSkew),this.scale=new s(this._finalScale),t&&this.set(t)}function r(){return a.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function o(){return a.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var s=t("./Transitionable"),a=t("../core/Transform"),u=t("../utilities/Utility");i.prototype.setTranslate=function(t,e,n){return this._finalTranslate=t,this._final=o.call(this),this.translate.set(t,e,n),this},i.prototype.setScale=function(t,e,n){return this._finalScale=t,this._final=o.call(this),this.scale.set(t,e,n),this},i.prototype.setRotate=function(t,e,n){return this._finalRotate=t,this._final=o.call(this),this.rotate.set(t,e,n),this},i.prototype.setSkew=function(t,e,n){return this._finalSkew=t,this._final=o.call(this),this.skew.set(t,e,n),this},i.prototype.set=function(t,e,n){var i=a.interpret(t);this._finalTranslate=i.translate,this._finalRotate=i.rotate,this._finalSkew=i.skew,this._finalScale=i.scale,this._final=t;var r=n?u.after(4,n):null;return this.translate.set(i.translate,e,r),this.rotate.set(i.rotate,e,r),this.skew.set(i.skew,e,r),this.scale.set(i.scale,e,r),this},i.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},i.prototype.get=function(){return this.isActive()?r.call(this):this._final},i.prototype.getFinal=function(){return this._final},i.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},i.prototype.halt=function(){return this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get(),this},n.exports=i}),define("famous/core/Modifier",["require","exports","module","./Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,n){function i(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function r(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var o=t("./Transform"),s=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");i.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},i.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},i.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},i.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},i.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},i.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},i.prototype.setTransform=function(t,e,n){return e||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,e,n),this):this.transformFrom(t)},i.prototype.setOpacity=function(t,e,n){return e||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new s(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,e,n)):this.opacityFrom(t)},i.prototype.setOrigin=function(t,e,n){return e||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new s(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,e,n),this):this.originFrom(t)},i.prototype.setAlign=function(t,e,n){return e||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new s(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,e,n),this):this.alignFrom(t)},i.prototype.setSize=function(t,e,n){return t&&(e||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new s(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,e,n),this):this.sizeFrom(t)},i.prototype.setProportions=function(t,e,n){return t&&(e||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new s(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,e,n),this):this.proportionsFrom(t)},i.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},i.prototype.getTransform=function(){return this._transformGetter()},i.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},i.prototype.getOpacity=function(){return this._opacityGetter()},i.prototype.getOrigin=function(){return this._originGetter()},i.prototype.getAlign=function(){return this._alignGetter()},i.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},i.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},i.prototype.modify=function(t){return r.call(this),this._output.target=t,this._output},n.exports=i}),define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode","../utilities/Utility"],function(t,e,n){function i(t){this._node=new s,this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this.options=a.clone(this.constructor.DEFAULT_OPTIONS||i.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var r=t("./EventHandler"),o=t("./OptionsManager"),s=t("./RenderNode"),a=t("../utilities/Utility");i.DEFAULT_OPTIONS={},i.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},i.prototype.setOptions=function(t){this._optionsManager.patch(t)},i.prototype.add=function(){return this._node.add.apply(this._node,arguments)},i.prototype._add=i.prototype.add,i.prototype.render=function(){return this._node.render()},i.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},n.exports=i}),define("famous/inputs/SyncUtils",["require","exports","module"],function(t,e,n){n.exports={getTimeHistoryPosition:function(t,e){for(var n,i,r,o=t.length-1,s=o,a=!0,u=0;a;){if(i=t[s],0>s)return n;if(i&&n&&(r=n.timestamp-i.timestamp,u+=r,u>=e))return a=!1,i;s--,n=i}}}}),define("famous/inputs/MouseSync",["require","exports","module","../core/EventHandler","../core/OptionsManager","./SyncUtils"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._eventInput=new c,this._eventOutput=new c,c.setInputHandler(this,this._eventInput),c.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",r.bind(this)),this._eventInput.on("mousemove",o.bind(this)),this._eventInput.on("mouseup",s.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",a.bind(this)):this._eventInput.on("mouseleave",s.bind(this)),this.options.clickThreshold&&window.addEventListener("click",function(t){Math.sqrt(Math.pow(this._displacement[0],2)+Math.pow(this._displacement[1],2))>this.options.clickThreshold&&t.stopPropagation()}.bind(this),!0),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._positionHistory=[],this._position=null,this._down=!1,this._moved=!1,this._displacement=[0,0],this._documentActive=!1}function r(t){var e,n;this.options.preventDefault&&t.preventDefault();var i=t.clientX,r=t.clientY,o=Date.now();this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,e=0,n=0):(this._position=[0,0],e=[0,0],n=[0,0]),this.options.clickThreshold&&(this._displacement=[0,0]);var s=this._payload;s.delta=e,s.position=this._position,s.velocity=n,s.clientX=i,s.clientY=r,s.offsetX=t.offsetX,s.offsetY=t.offsetY,this._positionHistory.push({position:s.position.slice?s.position.slice(0):s.position,clientPosition:[i,r],timestamp:o}),this._eventOutput.emit("start",s),this._documentActive=!1}function o(t){if(0!==this._positionHistory.length){var e=u.call(this,t);this._eventOutput.emit("update",e),this._move=!0}}function s(t){if(this._down){var e=u.call(this,t);this._eventOutput.emit("end",e),this._down=!1,this._move=!1,this._positionHistory=[]}}function a(){if(this._down&&this._move&&!this._documentActive){var t=o.bind(this),e=function(n){s.call(this,n),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)}.bind(this);document.addEventListener("mousemove",t),document.addEventListener("mouseup",e),this._documentActive=!0}}function u(t){var e,n,r=this._payload,o=this.options.scale,s=t.clientX,a=t.clientY,u=Date.now(),c=this._positionHistory[this._positionHistory.length-1],h=s*o-c.clientPosition[0],f=a*o-c.clientPosition[1];this.options.rails&&(Math.abs(h)>Math.abs(f)?f=0:h=0),this.options.direction===i.DIRECTION_X?(n=h,this._position+=n):this.options.direction===i.DIRECTION_Y?(n=f,this._position+=n):(n=[h,f],this._position[0]+=h,this._position[1]+=f),this.options.clickThreshold!==!1&&(this._displacement[0]+=h,this._displacement[1]+=f),r.delta=n,r.position=this._position,r.clientX=s,r.clientY=a,r.offsetX=t.offsetX,r.offsetY=t.offsetY,this._positionHistory.length===this.options.velocitySampleLength&&this._positionHistory.shift(),this._positionHistory.push({position:r.position.slice?r.position.slice(0):r.position,clientPosition:[s,a],timestamp:u});var d=l.getTimeHistoryPosition(this._positionHistory,this.options.timeSampleDuration),g=Math.max(u-d.timestamp,p);return e=void 0!==this.options.direction?o*(this._position-d.position)/g:[o*(this._position[0]-d.position[0])/g,o*(this._position[1]-d.position[1])/g],r.velocity=e,r}var c=t("../core/EventHandler"),h=t("../core/OptionsManager"),l=t("./SyncUtils");i.DEFAULT_OPTIONS={clickThreshold:void 0,direction:void 0,rails:!1,scale:1,propogate:!0,velocitySampleLength:10,timeSampleDuration:400,preventDefault:!0},i.DIRECTION_X=0,i.DIRECTION_Y=1;var p=8;i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.exports=i}),define("famous/inputs/GenericSync",["require","exports","module","../core/EventHandler"],function(t,e,n){function i(t,e){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),e&&this.setOptions(e)}function r(t,e){s[t]&&(this._syncs[t]=new s[t](e),this.pipeSync(t))}var o=t("../core/EventHandler");i.DIRECTION_X=0,i.DIRECTION_Y=1,i.DIRECTION_Z=2;var s={};i.register=function(t){for(var e in t)if(s[e]){if(s[e]!==t[e])throw new Error("Conflicting sync classes for key: "+e)}else s[e]=t[e]},i.prototype.setOptions=function(t){for(var e in this._syncs)this._syncs[e].setOptions(t)},i.prototype.pipeSync=function(t){var e=this._syncs[t];this._eventInput.pipe(e),e.pipe(this._eventOutput)},i.prototype.unpipeSync=function(t){var e=this._syncs[t];this._eventInput.unpipe(e),e.unpipe(this._eventOutput)},i.prototype.addSync=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)r.call(this,t[e]);else if(t instanceof Object)for(var n in t)r.call(this,n,t[n])},n.exports=i}),define("famous/views/HeaderFooterLayout",["require","exports","module","../core/Entity","../core/RenderNode","../core/Transform","../core/OptionsManager"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._entityId=a.register(this),this.header=new u,this.footer=new u,this.content=new u}function r(t,e){var n=t.getSize();return n?n[this.options.direction]:e}function o(t){return this.options.direction===i.DIRECTION_X?c.translate(t,0,0):c.translate(0,t,0)}function s(t,e){return this.options.direction===i.DIRECTION_X?[t,e[1]]:[e[0],t]}var a=t("../core/Entity"),u=t("../core/RenderNode"),c=t("../core/Transform"),h=t("../core/OptionsManager");i.DIRECTION_X=0,i.DIRECTION_Y=1,i.DEFAULT_OPTIONS={direction:i.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},i.prototype.render=function(){return this._entityId},i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.prototype.commit=function(t){var e=t.transform,n=t.origin,i=t.size,a=t.opacity,u=void 0!==this.options.headerSize?this.options.headerSize:r.call(this,this.header,this.options.defaultHeaderSize),h=void 0!==this.options.footerSize?this.options.footerSize:r.call(this,this.footer,this.options.defaultFooterSize),l=i[this.options.direction]-u-h;i&&(e=c.moveThen([-i[0]*n[0],-i[1]*n[1],0],e));var p=[{size:s.call(this,u,i),target:this.header.render()},{transform:o.call(this,u),size:s.call(this,l,i),target:this.content.render()},{transform:o.call(this,u+l),size:s.call(this,h,i),target:this.footer.render()}];return{transform:e,opacity:a,size:i,target:p}},n.exports=i}),define("famous/utilities/Timer",["require","exports","module","../core/Engine"],function(t,e,n){function i(t){return h.on(l,t),t}function r(t,e){var n=p(),r=function(){var i=p();i-n>=e&&(t.apply(this,arguments),h.removeListener(l,r))};return i(r)}function o(t,e){var n=p(),r=function(){var i=p();i-n>=e&&(t.apply(this,arguments),n=p())};return i(r)}function s(t,e){if(void 0===e)return void 0;var n=function(){e--,0>=e&&(t.apply(this,arguments),u(n))};return i(n)}function a(t,e){e=e||1;var n=e,r=function(){e--,0>=e&&(t.apply(this,arguments),e=n)};return i(r)}function u(t){h.removeListener(l,t)}function c(t,e){var n,i,o,s,a;return function(){i=this,a=arguments,o=p();var c=function(){var u=p-o;e>u?n=r(c,e-u):(n=null,s=t.apply(i,a))};return u(n),n=r(c,e),s}}var h=t("../core/Engine"),l="prerender",p=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};n.exports={setTimeout:r,setInterval:o,debounce:c,after:s,every:a,clear:u}}),define("views/NavigationView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/EventHandler","famous/core/View"],function(t,e,n){function i(){a.apply(this,arguments),this.eventOutput=new s,s.setOutputHandler(this,this.eventOutput),r.call(this)}function r(){var t=this,e=new o({content:'<img width="191" src="'+this.options.iconUrl+'"/>'});e.on("click",function(){t.eventOutput.emit("pageChange",t.options.index)}),this._add(e)}var o=t("famous/core/Surface"),s=(t("famous/core/Modifier"),t("famous/core/Transform"),t("famous/core/EventHandler")),a=t("famous/core/View");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={width:1e3,height:null,iconUrl:null,index:null},n.exports=i}),define("views/MenuView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/utilities/Timer","famous/core/EventHandler","./NavigationView"],function(t,e,n){function i(){var t=this;c.apply(this,arguments),this.eventInput=new l,this.eventOutput=new l,l.setInputHandler(this,this.eventInput),l.setOutputHandler(this,this.eventOutput),this.eventInput.on("pageChange",function(e){t.eventOutput.emit("navigateTo",e)}),r.call(this),o.call(this)}function r(){var t=new s({size:[this.options.width,this.options.height],properties:{backgroundColor:"#595153"}});this._add(t)}function o(){this.navModifiers=[];for(var t=[{iconUrl:"img/nav-icons/home.png"},{iconUrl:"img/nav-icons/about-us.png"},{iconUrl:"img/nav-icons/demographics.png"},{iconUrl:"img/nav-icons/clients.png"},{iconUrl:"img/nav-icons/radio.png"},{iconUrl:"img/nav-icons/contact-us.png"}],e=0;e<t.length;e++){var n=new p({width:this.options.navWidth,height:this.options.navHeight,iconUrl:t[e].iconUrl,index:e});n.pipe(this);var i=this.options.topOffset+this.options.navItemOffset*e,r=new a({transform:u.translate(0,i,0)});this.navModifiers.push(r),this._add(r).add(n)}}var s=t("famous/core/Surface"),a=t("famous/core/Modifier"),u=t("famous/core/Transform"),c=t("famous/core/View"),h=t("famous/utilities/Timer"),l=t("famous/core/EventHandler"),p=t("./NavigationView");i.prototype=Object.create(c.prototype),i.prototype.constructor=i,i.prototype.resetNavItems=function(){for(var t=0;t<this.navModifiers.length;t++){var e=-this.options.navWidth/4,n=this.options.topOffset+this.options.navItemOffset*t+2*this.options.navHeight;this.navModifiers[t].setOpacity(0),this.navModifiers[t].setTransform(u.translate(e,n,0))}},i.prototype.animateNavItems=function(){this.resetNavItems();for(var t=0;t<this.navModifiers.length;t++)h.setTimeout(function(t){var e=this.options.topOffset+this.options.navItemOffset*t;this.navModifiers[t].setOpacity(1,{duration:this.options.duration,curve:"easeOut"}),this.navModifiers[t].setTransform(u.translate(0,e,0),{duration:this.options.duration,curve:"easeOut"})}.bind(this,t),t*this.options.staggerDelay)},i.DEFAULT_OPTIONS={navWidth:191,navHeight:81,topOffset:10,navItemOffset:90,duration:400,staggerDelay:35},n.exports=i}),!function(){function t(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function e(t){return null===t?0/0:+t}function n(t){return!isNaN(t)}function i(t){return{left:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(arguments.length<3&&(i=0),arguments.length<4&&(r=e.length);r>i;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}function r(t){return t.length}function o(t){for(var e=1;t*e%1;)e*=10;return e}function s(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function a(){this._=Object.create(null)}function u(t){return(t+="")===va||t[0]===ya?ya+t:t}function c(t){return(t+="")[0]===ya?t.slice(1):t}function h(t){return u(t)in this._}function l(t){return(t=u(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(c(e));return t}function f(){var t=0;for(var e in this._)++t;return t}function d(){for(var t in this._)return!1;return!0}function g(){this._=Object.create(null)}function m(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function v(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=_a.length;i>n;++n){var r=_a[n]+e;if(r in t)return r}}function y(){}function _(){}function x(t){function e(){for(var e,i=n,r=-1,o=i.length;++r<o;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new a;return e.on=function(e,r){var o,s=i.get(e);return arguments.length<2?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function w(){na.event.preventDefault()}function M(){for(var t,e=na.event;t=e.sourceEvent;)e=t;return e}function b(t){for(var e=new _,n=0,i=arguments.length;++n<i;)e[arguments[n]]=x(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=na.event;r.target=t,na.event=r,e[r.type].apply(n,i)}finally{na.event=o}}},e}function S(t){return wa(t,Ta),t}function O(t){return"function"==typeof t?t:function(){return Ma(t,this)}}function T(t){return"function"==typeof t?t:function(){return ba(t,this)}}function E(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=na.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?a:s:t.local?o:r}function z(t){return t.trim().replace(/\s+/g," ")}function C(t){return new RegExp("(?:^|\\s+)"+na.requote(t)+"(?:\\s+|$)","g")}function k(t){return(t+"").trim().split(/^|\s+/)}function P(t,e){function n(){for(var n=-1;++n<r;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}t=k(t).map(N);var r=t.length;return"function"==typeof e?i:n}function N(t){var e=C(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",z(r+" "+t))):n.setAttribute("class",z(r.replace(e," ")))}}function I(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function A(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function D(t){return"function"==typeof t?t:(t=na.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,t)}}function L(){var t=this.parentNode;t&&t.removeChild(this)}function F(t){return{__data__:t}}function H(t){return function(){return Oa(this,t)}}function R(e){return arguments.length||(e=t),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function q(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,o=t[n],s=0,a=o.length;a>s;s++)(r=o[s])&&e(r,s,n);return t}function V(t){return wa(t,za),t}function U(t){var e,n;return function(i,r,o){var s,a=t[o].update,u=a.length;for(o!=n&&(n=o,e=0),r>=e&&(e=r+1);!(s=a[e])&&++e<u;);return s}}function j(t,e,n){function i(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function r(){var r=u(e,ra(arguments));i.call(this),this.addEventListener(t,this[s]=r,r.$=n),r._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+na.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var s="__on"+t,a=t.indexOf("."),u=G;a>0&&(t=t.slice(0,a));var c=ka.get(t);return c&&(t=c,u=Y),a?e?r:i:e?y:o}function G(t,e){return function(n){var i=na.event;na.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{na.event=i}}}function Y(t,e){var n=G(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function X(){var t=".dragsuppress-"+ ++Na,e="click"+t,n=na.select(aa).on("touchmove"+t,w).on("dragstart"+t,w).on("selectstart"+t,w);if(Pa){var i=sa.style,r=i[Pa];i[Pa]="none"}return function(o){if(n.on(t,null),Pa&&(i[Pa]=r),o){var s=function(){n.on(e,null)};n.on(e,function(){w(),s()},!0),setTimeout(s,0)}}}function B(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>Ia&&(aa.scrollX||aa.scrollY)){n=na.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var r=n[0][0].getScreenCTM();Ia=!(r.f||r.e),n.remove()}return Ia?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function Z(){return na.event.changedTouches[0].identifier}function W(){return na.event.target}function J(){return aa}function $(t){return t>0?1:0>t?-1:0}function Q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function K(t){return t>1?0:-1>t?La:Math.acos(t)}function te(t){return t>1?Ra:-1>t?-Ra:Math.asin(t)}function ee(t){return((t=Math.exp(t))-1/t)/2}function ne(t){return((t=Math.exp(t))+1/t)/2}function ie(t){return((t=Math.exp(2*t))-1)/(t+1)}function re(t){return(t=Math.sin(t/2))*t}function oe(){}function se(t,e,n){return this instanceof se?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof se?new se(t.h,t.s,t.l):xe(""+t,we,se):new se(t,e,n)}function ae(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,s;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,new me(r(t+120),r(t),r(t-120))}function ue(t,e,n){return this instanceof ue?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ue?new ue(t.h,t.c,t.l):t instanceof he?pe(t.l,t.a,t.b):pe((t=Me((t=na.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ue(t,e,n)}function ce(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new he(n,Math.cos(t*=qa)*e,Math.sin(t)*e)}function he(t,e,n){return this instanceof he?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof he?new he(t.l,t.a,t.b):t instanceof ue?ce(t.h,t.c,t.l):Me((t=me(t)).r,t.g,t.b):new he(t,e,n)}function le(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=fe(r)*$a,i=fe(i)*Qa,o=fe(o)*Ka,new me(ge(3.2404542*r-1.5371385*i-.4985314*o),ge(-.969266*r+1.8760108*i+.041556*o),ge(.0556434*r-.2040259*i+1.0572252*o))}function pe(t,e,n){return t>0?new ue(Math.atan2(n,e)*Va,Math.sqrt(e*e+n*n),t):new ue(0/0,0/0,t)}function fe(t){return t>.206893034?t*t*t:(t-4/29)/7.787037
}function de(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ge(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function me(t,e,n){return this instanceof me?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof me?new me(t.r,t.g,t.b):xe(""+t,me,ae):new me(t,e,n)}function ve(t){return new me(t>>16,t>>8&255,255&t)}function ye(t){return ve(t)+""}function _e(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function xe(t,e,n){var i,r,o,s=0,a=0,u=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(Se(r[0]),Se(r[1]),Se(r[2]))}return(o=nu.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&o)>>4,s=s>>4|s,a=240&o,a=a>>4|a,u=15&o,u=u<<4|u):7===t.length&&(s=(16711680&o)>>16,a=(65280&o)>>8,u=255&o)),e(s,a,u))}function we(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,u=(s+o)/2;return a?(r=.5>u?a/(s+o):a/(2-s-o),i=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):(i=0/0,r=u>0&&1>u?0:i),new se(i,r,u)}function Me(t,e,n){t=be(t),e=be(e),n=be(n);var i=de((.4124564*t+.3575761*e+.1804375*n)/$a),r=de((.2126729*t+.7151522*e+.072175*n)/Qa),o=de((.0193339*t+.119192*e+.9503041*n)/Ka);return he(116*r-16,500*(i-r),200*(r-o))}function be(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Se(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Oe(t){return"function"==typeof t?t:function(){return t}}function Te(t){return t}function Ee(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),ze(e,n,t,i)}}function ze(t,e,n,i){function r(){var t,e=u.status;if(!e&&ke(u)||e>=200&&300>e||304===e){try{t=n.call(o,u)}catch(i){return void s.error.call(o,i)}s.load.call(o,t)}else s.error.call(o,u)}var o={},s=na.dispatch("beforesend","progress","load","error"),a={},u=new XMLHttpRequest,c=null;return!aa.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=r:u.onreadystatechange=function(){u.readyState>3&&r()},u.onprogress=function(t){var e=na.event;na.event=t;try{s.progress.call(o,u)}finally{na.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a[t]:(null==e?delete a[t]:a[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ra(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),u.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),u.setRequestHeader)for(var h in a)u.setRequestHeader(h,a[h]);return null!=e&&u.overrideMimeType&&u.overrideMimeType(e),null!=c&&(u.responseType=c),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),s.beforesend.call(o,u),u.send(null==i?null:i),o},o.abort=function(){return u.abort(),o},na.rebind(o,s,"on"),null==i?o:o.get(Ce(i))}function Ce(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function ke(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Pe(){var t=Ne(),e=Ie()-t;e>24?(isFinite(e)&&(clearTimeout(su),su=setTimeout(Pe,e)),ou=0):(ou=1,uu(Pe))}function Ne(){var t=Date.now();for(au=iu;au;)t>=au.t&&(au.f=au.c(t-au.t)),au=au.n;return t}function Ie(){for(var t,e=iu,n=1/0;e;)e.f?e=t?t.n=e.n:iu=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return ru=t,n}function Ae(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function De(t,e){var n=Math.pow(10,3*ma(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Le(t){var e=t.decimal,n=t.thousands,i=t.grouping,r=t.currency,o=i&&n?function(t,e){for(var r=t.length,o=[],s=0,a=i[0],u=0;r>0&&a>0&&(u+a+1>e&&(a=Math.max(1,e-u)),o.push(t.substring(r-=a,r+a)),!((u+=a+1)>e));)a=i[s=(s+1)%i.length];return o.reverse().join(n)}:Te;return function(t){var n=hu.exec(t),i=n[1]||" ",s=n[2]||">",a=n[3]||"-",u=n[4]||"",c=n[5],h=+n[6],l=n[7],p=n[8],f=n[9],d=1,g="",m="",v=!1,y=!0;switch(p&&(p=+p.substring(1)),(c||"0"===i&&"="===s)&&(c=i="0",s="="),f){case"n":l=!0,f="g";break;case"%":d=100,m="%",f="f";break;case"p":d=100,m="%",f="r";break;case"b":case"o":case"x":case"X":"#"===u&&(g="0"+f.toLowerCase());case"c":y=!1;case"d":v=!0,p=0;break;case"s":d=-1,f="r"}"$"===u&&(g=r[0],m=r[1]),"r"!=f||p||(f="g"),null!=p&&("g"==f?p=Math.max(1,Math.min(21,p)):("e"==f||"f"==f)&&(p=Math.max(0,Math.min(20,p)))),f=lu.get(f)||Fe;var _=c&&l;return function(t){var n=m;if(v&&t%1)return"";var r=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===a?"":a;if(0>d){var u=na.formatPrefix(t,p);t=u.scale(t),n=u.symbol+m}else t*=d;t=f(t,p);var x,w,M=t.lastIndexOf(".");if(0>M){var b=y?t.lastIndexOf("e"):-1;0>b?(x=t,w=""):(x=t.substring(0,b),w=t.substring(b))}else x=t.substring(0,M),w=e+t.substring(M+1);!c&&l&&(x=o(x,1/0));var S=g.length+x.length+w.length+(_?0:r.length),O=h>S?new Array(S=h-S+1).join(i):"";return _&&(x=o(O+x,O.length?h-w.length:1/0)),r+=g,t=x+w,("<"===s?r+t+O:">"===s?O+r+t:"^"===s?O.substring(0,S>>=1)+r+t+O.substring(S):r+(_?t:O+t))+n}}}function Fe(t){return t+""}function He(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Re(t,e,n){function i(e){var n=t(e),i=o(n,1);return i-e>e-n?n:i}function r(n){return e(n=t(new fu(n-1)),1),n}function o(t,n){return e(t=new fu(+t),n),t}function s(t,i,o){var s=r(t),a=[];if(o>1)for(;i>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;i>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{fu=He;var i=new He;return i._=t,s(i,e,n)}finally{fu=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=s;var u=t.utc=qe(t);return u.floor=u,u.round=qe(i),u.ceil=qe(r),u.offset=qe(o),u.range=a,t}function qe(t){return function(e,n){try{fu=He;var i=new He;return i._=e,t(i,n)._}finally{fu=Date}}}function Ve(t){function e(t){function e(e){for(var n,r,o,s=[],a=-1,u=0;++a<i;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(r=gu[n=t.charAt(++a)])&&(n=t.charAt(++a)),(o=z[n])&&(n=o(e,null==r?"e"===n?" ":"0":r)),s.push(n),u=a+1);return s.push(t.slice(u,a)),s.join("")}var i=t.length;return e.parse=function(e){var i={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=n(i,t,e,0);if(r!=e.length)return null;"p"in i&&(i.H=i.H%12+12*i.p);var o=null!=i.Z&&fu!==He,s=new(o?He:fu);return"j"in i?s.setFullYear(i.y,0,i.j):"w"in i&&("W"in i||"U"in i)?(s.setFullYear(i.y,0,1),s.setFullYear(i.y,0,"W"in i?(i.w+6)%7+7*i.W-(s.getDay()+5)%7:i.w+7*i.U-(s.getDay()+6)%7)):s.setFullYear(i.y,i.m,i.d),s.setHours(i.H+(i.Z/100|0),i.M+i.Z%100,i.S,i.L),o?s._:s},e.toString=function(){return t},e}function n(t,e,n,i){for(var r,o,s,a=0,u=e.length,c=n.length;u>a;){if(i>=c)return-1;if(r=e.charCodeAt(a++),37===r){if(s=e.charAt(a++),o=C[s in gu?e.charAt(a++):s],!o||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function i(t,e,n){M.lastIndex=0;var i=M.exec(e.slice(n));return i?(t.w=b.get(i[0].toLowerCase()),n+i[0].length):-1}function r(t,e,n){x.lastIndex=0;var i=x.exec(e.slice(n));return i?(t.w=w.get(i[0].toLowerCase()),n+i[0].length):-1}function o(t,e,n){T.lastIndex=0;var i=T.exec(e.slice(n));return i?(t.m=E.get(i[0].toLowerCase()),n+i[0].length):-1}function s(t,e,n){S.lastIndex=0;var i=S.exec(e.slice(n));return i?(t.m=O.get(i[0].toLowerCase()),n+i[0].length):-1}function a(t,e,i){return n(t,z.c.toString(),e,i)}function u(t,e,i){return n(t,z.x.toString(),e,i)}function c(t,e,i){return n(t,z.X.toString(),e,i)}function h(t,e,n){var i=_.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}var l=t.dateTime,p=t.date,f=t.time,d=t.periods,g=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{fu=He;var e=new fu;return e._=t,i(e)}finally{fu=Date}}var i=e(t);return n.parse=function(t){try{fu=He;var e=i.parse(t);return e&&e._}finally{fu=Date}},n.toString=i.toString,n},e.multi=e.utc.multi=un;var _=na.map(),x=je(g),w=Ge(g),M=je(m),b=Ge(m),S=je(v),O=Ge(v),T=je(y),E=Ge(y);d.forEach(function(t,e){_.set(t.toLowerCase(),e)});var z={a:function(t){return m[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(l),d:function(t,e){return Ue(t.getDate(),e,2)},e:function(t,e){return Ue(t.getDate(),e,2)},H:function(t,e){return Ue(t.getHours(),e,2)},I:function(t,e){return Ue(t.getHours()%12||12,e,2)},j:function(t,e){return Ue(1+pu.dayOfYear(t),e,3)},L:function(t,e){return Ue(t.getMilliseconds(),e,3)},m:function(t,e){return Ue(t.getMonth()+1,e,2)},M:function(t,e){return Ue(t.getMinutes(),e,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,e){return Ue(t.getSeconds(),e,2)},U:function(t,e){return Ue(pu.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ue(pu.mondayOfYear(t),e,2)},x:e(p),X:e(f),y:function(t,e){return Ue(t.getFullYear()%100,e,2)},Y:function(t,e){return Ue(t.getFullYear()%1e4,e,4)},Z:sn,"%":function(){return"%"}},C={a:i,A:r,b:o,B:s,c:a,d:Ke,e:Ke,H:en,I:en,j:tn,L:on,m:Qe,M:nn,p:h,S:rn,U:Xe,w:Ye,W:Be,x:u,X:c,y:We,Y:Ze,Z:Je,"%":an};return e}function Ue(t,e,n){var i=0>t?"-":"",r=(i?-t:t)+"",o=r.length;return i+(n>o?new Array(n-o+1).join(e)+r:r)}function je(t){return new RegExp("^(?:"+t.map(na.requote).join("|")+")","i")}function Ge(t){for(var e=new a,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ye(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Xe(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Be(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ze(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function We(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+2));return i?(t.y=$e(+i[0]),n+i[0].length):-1}function Je(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function $e(t){return t+(t>68?1900:2e3)}function Qe(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ke(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function tn(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function en(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function nn(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function rn(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function on(t,e,n){mu.lastIndex=0;var i=mu.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function sn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=ma(e)/60|0,r=ma(e)%60;return n+Ue(i,"0",2)+Ue(r,"0",2)}function an(t,e,n){vu.lastIndex=0;var i=vu.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function un(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,i=t[n];!i[1](e);)i=t[++n];return i[0](e)}}function cn(){}function hn(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function ln(t,e){t&&wu.hasOwnProperty(t.type)&&wu[t.type](t,e)}function pn(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function fn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)pn(t[n],e,1);e.polygonEnd()}function dn(){function t(t,e){t*=qa,e=e*qa/2+La/4;var n=t-i,s=n>=0?1:-1,a=s*n,u=Math.cos(e),c=Math.sin(e),h=o*c,l=r*u+h*Math.cos(a),p=h*s*Math.sin(a);bu.add(Math.atan2(p,l)),i=t,r=u,o=c}var e,n,i,r,o;Su.point=function(s,a){Su.point=t,i=(e=s)*qa,r=Math.cos(a=(n=a)*qa/2+La/4),o=Math.sin(a)},Su.lineEnd=function(){t(e,n)}}function gn(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function mn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function _n(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function wn(t){return[Math.atan2(t[1],t[0]),te(t[2])]}function Mn(t,e){return ma(t[0]-e[0])<Aa&&ma(t[1]-e[1])<Aa}function bn(t,e){t*=qa;var n=Math.cos(e*=qa);Sn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Sn(t,e,n){++Ou,Eu+=(t-Eu)/Ou,zu+=(e-zu)/Ou,Cu+=(n-Cu)/Ou}function On(){function t(t,r){t*=qa;var o=Math.cos(r*=qa),s=o*Math.cos(t),a=o*Math.sin(t),u=Math.sin(r),c=Math.atan2(Math.sqrt((c=n*u-i*a)*c+(c=i*s-e*u)*c+(c=e*a-n*s)*c),e*s+n*a+i*u);Tu+=c,ku+=c*(e+(e=s)),Pu+=c*(n+(n=a)),Nu+=c*(i+(i=u)),Sn(e,n,i)}var e,n,i;Lu.point=function(r,o){r*=qa;var s=Math.cos(o*=qa);e=s*Math.cos(r),n=s*Math.sin(r),i=Math.sin(o),Lu.point=t,Sn(e,n,i)}}function Tn(){Lu.point=bn}function En(){function t(t,e){t*=qa;var n=Math.cos(e*=qa),s=n*Math.cos(t),a=n*Math.sin(t),u=Math.sin(e),c=r*u-o*a,h=o*s-i*u,l=i*a-r*s,p=Math.sqrt(c*c+h*h+l*l),f=i*s+r*a+o*u,d=p&&-K(f)/p,g=Math.atan2(p,f);Iu+=d*c,Au+=d*h,Du+=d*l,Tu+=g,ku+=g*(i+(i=s)),Pu+=g*(r+(r=a)),Nu+=g*(o+(o=u)),Sn(i,r,o)}var e,n,i,r,o;Lu.point=function(s,a){e=s,n=a,Lu.point=t,s*=qa;var u=Math.cos(a*=qa);i=u*Math.cos(s),r=u*Math.sin(s),o=Math.sin(a),Sn(i,r,o)},Lu.lineEnd=function(){t(e,n),Lu.lineEnd=Tn,Lu.point=bn}}function zn(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Cn(){return!0}function kn(t,e,n,i,r){var o=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Mn(n,i)){r.lineStart();for(var a=0;e>a;++a)r.point((n=t[a])[0],n[1]);return void r.lineEnd()}var u=new Nn(n,t,null,!0),c=new Nn(n,null,u,!1);u.o=c,o.push(u),s.push(c),u=new Nn(i,t,null,!1),c=new Nn(i,null,u,!0),u.o=c,o.push(u),s.push(c)}}),s.sort(e),Pn(o),Pn(s),o.length){for(var a=0,u=n,c=s.length;c>a;++a)s[a].e=u=!u;for(var h,l,p=o[0];;){for(var f=p,d=!0;f.v;)if((f=f.n)===p)return;h=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(var a=0,c=h.length;c>a;++a)r.point((l=h[a])[0],l[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d){h=f.p.z;for(var a=h.length-1;a>=0;--a)r.point((l=h[a])[0],l[1])}else i(f.x,f.p.x,-1,r);f=f.p}f=f.o,h=f.z,d=!d}while(!f.v);r.lineEnd()}}}function Pn(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Nn(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function In(t,e,n,i){return function(r,o){function s(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function a(t,e){var n=r(t,e);m.point(n[0],n[1])}function u(){y.point=a,m.lineStart()}function c(){y.point=s,m.lineEnd()}function h(t,e){g.push([t,e]);var n=r(t,e);x.point(n[0],n[1])}function l(){x.lineStart(),g=[]}function p(){h(g[0][0],g[0][1]),x.lineEnd();var t,e=x.clean(),n=_.buffer(),i=n.length;if(g.pop(),d.push(g),g=null,i)if(1&e){t=n[0];var r,i=t.length-1,s=-1;if(i>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++s<i;)o.point((r=t[s])[0],r[1]);o.lineEnd()}}else i>1&&2&e&&n.push(n.pop().concat(n.shift())),f.push(n.filter(An))}var f,d,g,m=e(o),v=r.invert(i[0],i[1]),y={point:s,lineStart:u,lineEnd:c,polygonStart:function(){y.point=h,y.lineStart=l,y.lineEnd=p,f=[],d=[]},polygonEnd:function(){y.point=s,y.lineStart=u,y.lineEnd=c,f=na.merge(f);var t=qn(v,d);f.length?(w||(o.polygonStart(),w=!0),kn(f,Ln,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),f=d=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},_=Dn(),x=e(_),w=!1;return y}}function An(t){return t.length>1}function Dn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:y,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ln(t,e){return((t=t.x)[0]<0?t[1]-Ra-Aa:Ra-t[1])-((e=e.x)[0]<0?e[1]-Ra-Aa:Ra-e[1])}function Fn(t){var e,n=0/0,i=0/0,r=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?La:-La,u=ma(o-n);ma(u-La)<Aa?(t.point(n,i=(i+s)/2>0?Ra:-Ra),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&u>=La&&(ma(n-r)<Aa&&(n-=r*Aa),ma(o-a)<Aa&&(o-=a*Aa),i=Hn(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=0/0},clean:function(){return 2-e}}}function Hn(t,e,n,i){var r,o,s=Math.sin(t-n);return ma(s)>Aa?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*s)):(e+i)/2}function Rn(t,e,n,i){var r;if(null==t)r=n*Ra,i.point(-La,r),i.point(0,r),i.point(La,r),i.point(La,0),i.point(La,-r),i.point(0,-r),i.point(-La,-r),i.point(-La,0),i.point(-La,r);else if(ma(t[0]-e[0])>Aa){var o=t[0]<e[0]?La:-La;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function qn(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,s=0;bu.reset();for(var a=0,u=e.length;u>a;++a){var c=e[a],h=c.length;if(h)for(var l=c[0],p=l[0],f=l[1]/2+La/4,d=Math.sin(f),g=Math.cos(f),m=1;;){m===h&&(m=0),t=c[m];var v=t[0],y=t[1]/2+La/4,_=Math.sin(y),x=Math.cos(y),w=v-p,M=w>=0?1:-1,b=M*w,S=b>La,O=d*_;if(bu.add(Math.atan2(O*M*Math.sin(b),g*x+O*Math.cos(b))),o+=S?w+M*Fa:w,S^p>=n^v>=n){var T=vn(gn(l),gn(t));xn(T);var E=vn(r,T);xn(E);var z=(S^w>=0?-1:1)*te(E[2]);(i>z||i===z&&(T[0]||T[1]))&&(s+=S^w>=0?1:-1)}if(!m++)break;p=v,d=_,g=x,l=t}}return(-Aa>o||Aa>o&&0>bu)^1&s}function Vn(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,u,c,h;return{lineStart:function(){c=u=!1,h=1},point:function(l,p){var f,d=[l,p],g=e(l,p),m=s?g?0:r(l,p):g?r(l+(0>l?La:-La),p):0;if(!n&&(c=u=g)&&t.lineStart(),g!==u&&(f=i(n,d),(Mn(n,f)||Mn(d,f))&&(d[0]+=Aa,d[1]+=Aa,g=e(d[0],d[1]))),g!==u)h=0,g?(t.lineStart(),f=i(d,n),t.point(f[0],f[1])):(f=i(n,d),t.point(f[0],f[1]),t.lineEnd()),n=f;else if(a&&n&&s^g){var v;m&o||!(v=i(d,n,!0))||(h=0,s?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&Mn(n,d)||t.point(d[0],d[1]),n=d,u=g,o=m},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return h|(c&&u)<<1}}}function i(t,e,n){var i=gn(t),r=gn(e),s=[1,0,0],a=vn(i,r),u=mn(a,a),c=a[0],h=u-c*c;if(!h)return!n&&t;var l=o*u/h,p=-o*c/h,f=vn(s,a),d=_n(s,l),g=_n(a,p);yn(d,g);var m=f,v=mn(d,m),y=mn(m,m),_=v*v-y*(mn(d,d)-1);if(!(0>_)){var x=Math.sqrt(_),w=_n(m,(-v-x)/y);if(yn(w,d),w=wn(w),!n)return w;var M,b=t[0],S=e[0],O=t[1],T=e[1];b>S&&(M=b,b=S,S=M);var E=S-b,z=ma(E-La)<Aa,C=z||Aa>E;if(!z&&O>T&&(M=O,O=T,T=M),C?z?O+T>0^w[1]<(ma(w[0]-b)<Aa?O:T):O<=w[1]&&w[1]<=T:E>La^(b<=w[0]&&w[0]<=S)){var k=_n(m,(-v+x)/y);return yn(k,d),[w,wn(k)]}}}function r(e,n){var i=s?t:La-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),s=o>0,a=ma(o)>Aa,u=di(t,6*qa);return In(e,n,u,s?[0,-t]:[-La,t-La])}function Un(t,e,n,i){return function(r){var o,s=r.a,a=r.b,u=s.x,c=s.y,h=a.x,l=a.y,p=0,f=1,d=h-u,g=l-c;if(o=t-u,d||!(o>0)){if(o/=d,0>d){if(p>o)return;f>o&&(f=o)}else if(d>0){if(o>f)return;o>p&&(p=o)}if(o=n-u,d||!(0>o)){if(o/=d,0>d){if(o>f)return;o>p&&(p=o)}else if(d>0){if(p>o)return;f>o&&(f=o)}if(o=e-c,g||!(o>0)){if(o/=g,0>g){if(p>o)return;f>o&&(f=o)}else if(g>0){if(o>f)return;o>p&&(p=o)}if(o=i-c,g||!(0>o)){if(o/=g,0>g){if(o>f)return;o>p&&(p=o)}else if(g>0){if(p>o)return;f>o&&(f=o)}return p>0&&(r.a={x:u+p*d,y:c+p*g}),1>f&&(r.b={x:u+f*d,y:c+f*g}),r}}}}}}function jn(t,e,n,i){function r(i,r){return ma(i[0]-t)<Aa?r>0?0:3:ma(i[0]-n)<Aa?r>0?2:1:ma(i[1]-e)<Aa?r>0?1:0:r>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t){for(var e=0,n=m.length,i=t[1],r=0;n>r;++r)for(var o,s=1,a=m[r],u=a.length,c=a[0];u>s;++s)o=a[s],c[1]<=i?o[1]>i&&Q(c,o,t)>0&&++e:o[1]<=i&&Q(c,o,t)<0&&--e,c=o;return 0!==e}function c(o,a,u,c){var h=0,l=0;if(null==o||(h=r(o,u))!==(l=r(a,u))||s(o,a)<0^u>0){do c.point(0===h||3===h?t:n,h>1?i:e);while((h=(h+u+4)%4)!==l)}else c.point(a[0],a[1])}function h(r,o){return r>=t&&n>=r&&o>=e&&i>=o}function l(t,e){h(t,e)&&a.point(t,e)}function p(){C.point=d,m&&m.push(v=[]),S=!0,b=!1,w=M=0/0}function f(){g&&(d(y,_),x&&b&&E.rejoin(),g.push(E.buffer())),C.point=l,b&&a.lineEnd()}function d(t,e){t=Math.max(-Hu,Math.min(Hu,t)),e=Math.max(-Hu,Math.min(Hu,e));var n=h(t,e);if(m&&v.push([t,e]),S)y=t,_=e,x=n,S=!1,n&&(a.lineStart(),a.point(t,e));else if(n&&b)a.point(t,e);else{var i={a:{x:w,y:M},b:{x:t,y:e}};z(i)?(b||(a.lineStart(),a.point(i.a.x,i.a.y)),a.point(i.b.x,i.b.y),n||a.lineEnd(),O=!1):n&&(a.lineStart(),a.point(t,e),O=!1)}w=t,M=e,b=n}var g,m,v,y,_,x,w,M,b,S,O,T=a,E=Dn(),z=Un(t,e,n,i),C={point:l,lineStart:p,lineEnd:f,polygonStart:function(){a=E,g=[],m=[],O=!0},polygonEnd:function(){a=T,g=na.merge(g);var e=u([t,i]),n=O&&e,r=g.length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),c(null,null,1,a),a.lineEnd()),r&&kn(g,o,e,c,a),a.polygonEnd()),g=m=v=null}};return C}}function Gn(t){var e=0,n=La/3,i=si(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*La/180,n=t[1]*La/180):[e/La*180,n/La*180]},r}function Yn(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),s-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),s=Math.sqrt(o)/r;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/r,te((o-(t*t+n*n)*r*r)/(2*r))]},n}function Xn(){function t(t,e){qu+=r*t-i*e,i=t,r=e}var e,n,i,r;Yu.point=function(o,s){Yu.point=t,e=i=o,n=r=s},Yu.lineEnd=function(){t(e,n)}}function Bn(t,e){Vu>t&&(Vu=t),t>ju&&(ju=t),Uu>e&&(Uu=e),e>Gu&&(Gu=e)}function Zn(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function i(){a.point=t}function r(){s.push("Z")}var o=Wn(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=r},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(t){return o=Wn(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function Wn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Jn(t,e){Eu+=t,zu+=e,++Cu}function $n(){function t(t,i){var r=t-e,o=i-n,s=Math.sqrt(r*r+o*o);ku+=s*(e+t)/2,Pu+=s*(n+i)/2,Nu+=s,Jn(e=t,n=i)}var e,n;Bu.point=function(i,r){Bu.point=t,Jn(e=i,n=r)}}function Qn(){Bu.point=Jn}function Kn(){function t(t,e){var n=t-i,o=e-r,s=Math.sqrt(n*n+o*o);ku+=s*(i+t)/2,Pu+=s*(r+e)/2,Nu+=s,s=r*t-i*e,Iu+=s*(i+t),Au+=s*(r+e),Du+=3*s,Jn(i=t,r=e)}var e,n,i,r;Bu.point=function(o,s){Bu.point=t,Jn(e=i=o,n=r=s)},Bu.lineEnd=function(){t(e,n)}}function ti(t){function e(e,n){t.moveTo(e+s,n),t.arc(e,n,s,0,Fa)}function n(e,n){t.moveTo(e,n),a.point=i}function i(e,n){t.lineTo(e,n)}function r(){a.point=e}function o(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:r,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=r,a.point=e},pointRadius:function(t){return s=t,a},result:y};return a}function ei(t){function e(t){return(a?i:n)(t)}function n(e){return ri(e,function(n,i){n=t(n,i),e.point(n[0],n[1])})}function i(e){function n(n,i){n=t(n,i),e.point(n[0],n[1])}function i(){_=0/0,S.point=o,e.lineStart()}function o(n,i){var o=gn([n,i]),s=t(n,i);r(_,x,y,w,M,b,_=s[0],x=s[1],y=n,w=o[0],M=o[1],b=o[2],a,e),e.point(_,x)}function s(){S.point=n,e.lineEnd()}function u(){i(),S.point=c,S.lineEnd=h}function c(t,e){o(l=t,p=e),f=_,d=x,g=w,m=M,v=b,S.point=o}function h(){r(_,x,y,w,M,b,f,d,l,g,m,v,a,e),S.lineEnd=s,s()}var l,p,f,d,g,m,v,y,_,x,w,M,b,S={point:n,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),S.lineStart=u},polygonEnd:function(){e.polygonEnd(),S.lineStart=i}};return S}function r(e,n,i,a,u,c,h,l,p,f,d,g,m,v){var y=h-e,_=l-n,x=y*y+_*_;if(x>4*o&&m--){var w=a+f,M=u+d,b=c+g,S=Math.sqrt(w*w+M*M+b*b),O=Math.asin(b/=S),T=ma(ma(b)-1)<Aa||ma(i-p)<Aa?(i+p)/2:Math.atan2(M,w),E=t(T,O),z=E[0],C=E[1],k=z-e,P=C-n,N=_*k-y*P;(N*N/x>o||ma((y*k+_*P)/x-.5)>.3||s>a*f+u*d+c*g)&&(r(e,n,i,a,u,c,z,C,T,w/=S,M/=S,b,m,v),v.point(z,C),r(z,C,T,w,M,b,h,l,p,f,d,g,m,v))}}var o=.5,s=Math.cos(30*qa),a=16;return e.precision=function(t){return arguments.length?(a=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function ni(t){var e=ei(function(e,n){return t([e*Va,n*Va])});return function(t){return ai(e(t))}}function ii(t){this.stream=t}function ri(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function oi(t){return si(function(){return t})()}function si(t){function e(t){return t=a(t[0]*qa,t[1]*qa),[t[0]*p+u,c-t[1]*p]}function n(t){return t=a.invert((t[0]-u)/p,(c-t[1])/p),t&&[t[0]*Va,t[1]*Va]}function i(){a=zn(s=hi(v,y,_),o);var t=o(g,m);return u=f-t[0]*p,c=d+t[1]*p,r()}function r(){return h&&(h.valid=!1,h=null),e}var o,s,a,u,c,h,l=ei(function(t,e){return t=o(t,e),[t[0]*p+u,c-t[1]*p]}),p=150,f=480,d=250,g=0,m=0,v=0,y=0,_=0,x=Fu,w=Te,M=null,b=null;return e.stream=function(t){return h&&(h.valid=!1),h=ai(x(s,l(w(t)))),h.valid=!0,h},e.clipAngle=function(t){return arguments.length?(x=null==t?(M=t,Fu):Vn((M=+t)*qa),r()):M},e.clipExtent=function(t){return arguments.length?(b=t,w=t?jn(t[0][0],t[0][1],t[1][0],t[1][1]):Te,r()):b},e.scale=function(t){return arguments.length?(p=+t,i()):p},e.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],i()):[f,d]},e.center=function(t){return arguments.length?(g=t[0]%360*qa,m=t[1]%360*qa,i()):[g*Va,m*Va]},e.rotate=function(t){return arguments.length?(v=t[0]%360*qa,y=t[1]%360*qa,_=t.length>2?t[2]%360*qa:0,i()):[v*Va,y*Va,_*Va]},na.rebind(e,l,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function ai(t){return ri(t,function(e,n){t.point(e*qa,n*qa)})}function ui(t,e){return[t,e]}function ci(t,e){return[t>La?t-Fa:-La>t?t+Fa:t,e]}function hi(t,e,n){return t?e||n?zn(pi(t),fi(e,n)):pi(t):e||n?fi(e,n):ci}function li(t){return function(e,n){return e+=t,[e>La?e-Fa:-La>e?e+Fa:e,n]}}function pi(t){var e=li(t);return e.invert=li(-t),e}function fi(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),h=c*i+a*r;return[Math.atan2(u*o-h*s,a*i-c*r),te(h*o+u*s)]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,u=Math.sin(t)*n,c=Math.sin(e),h=c*o-u*s;return[Math.atan2(u*o+c*s,a*i+h*r),te(h*i-a*r)]},n}function di(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,s,a){var u=s*e;null!=r?(r=gi(n,r),o=gi(n,o),(s>0?o>r:r>o)&&(r+=s*Fa)):(r=t+s*Fa,o=t-.5*u);for(var c,h=r;s>0?h>o:o>h;h-=u)a.point((c=wn([n,-i*Math.cos(h),-i*Math.sin(h)]))[0],c[1])}}function gi(t,e){var n=gn(e);n[0]-=t,xn(n);var i=K(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-Aa)%(2*Math.PI)}function mi(t,e,n){var i=na.range(t,e-Aa,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function vi(t,e,n){var i=na.range(t,e-Aa,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function yi(t){return t.source}function _i(t){return t.target}function xi(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),s=Math.cos(i),a=Math.sin(i),u=r*Math.cos(t),c=r*Math.sin(t),h=s*Math.cos(n),l=s*Math.sin(n),p=2*Math.asin(Math.sqrt(re(i-e)+r*s*re(n-t))),f=1/Math.sin(p),d=p?function(t){var e=Math.sin(t*=p)*f,n=Math.sin(p-t)*f,i=n*u+e*h,r=n*c+e*l,s=n*o+e*a;return[Math.atan2(r,i)*Va,Math.atan2(s,Math.sqrt(i*i+r*r))*Va]}:function(){return[t*Va,e*Va]};return d.distance=p,d}function wi(){function t(t,r){var o=Math.sin(r*=qa),s=Math.cos(r),a=ma((t*=qa)-e),u=Math.cos(a);Zu+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=i*o-n*s*u)*a),n*o+i*s*u),e=t,n=o,i=s}var e,n,i;Wu.point=function(r,o){e=r*qa,n=Math.sin(o*=qa),i=Math.cos(o),Wu.point=t},Wu.lineEnd=function(){Wu.point=Wu.lineEnd=y}}function Mi(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),s=Math.cos(r);return[Math.atan2(t*o,i*s),Math.asin(i&&n*o/i)]},n}function bi(t,e){function n(t,e){s>0?-Ra+Aa>e&&(e=-Ra+Aa):e>Ra-Aa&&(e=Ra-Aa);var n=s/Math.pow(r(e),o);return[n*Math.sin(o*t),s-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(La/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),s=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=s-e,i=$(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(s/i,1/o))-Ra]},n):Oi}function Si(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return ma(r)<Aa?ui:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-$(r)*Math.sqrt(t*t+n*n)]},n)}function Oi(t,e){return[t,Math.log(Math.tan(La/4+e/2))]}function Ti(t){var e,n=oi(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var a=La*i(),u=r();o([[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function Ei(t,e){return[Math.log(Math.tan(La/4+e/2)),-t]}function zi(t){return t[0]}function Ci(t){return t[1]}function ki(t){for(var e=t.length,n=[0,1],i=2,r=2;e>r;r++){for(;i>1&&Q(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Pi(t,e){return t[0]-e[0]||t[1]-e[1]}function Ni(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Ii(t,e,n,i){var r=t[0],o=n[0],s=e[0]-r,a=i[0]-o,u=t[1],c=n[1],h=e[1]-u,l=i[1]-c,p=(a*(u-c)-l*(r-o))/(l*s-a*h);return[r+p*s,u+p*h]}function Ai(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Di(){nr(this),this.edge=this.site=this.circle=null}function Li(t){var e=ac.pop()||new Di;return e.site=t,e}function Fi(t){Bi(t),rc.remove(t),ac.push(t),nr(t)}function Hi(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,s=t.N,a=[t];Fi(t);for(var u=o;u.circle&&ma(n-u.circle.x)<Aa&&ma(i-u.circle.cy)<Aa;)o=u.P,a.unshift(u),Fi(u),u=o;a.unshift(u),Bi(u);for(var c=s;c.circle&&ma(n-c.circle.x)<Aa&&ma(i-c.circle.cy)<Aa;)s=c.N,a.push(c),Fi(c),c=s;a.push(c),Bi(c);var h,l=a.length;for(h=1;l>h;++h)c=a[h],u=a[h-1],Ki(c.edge,u.site,c.site,r);u=a[0],c=a[l-1],c.edge=$i(u.site,c.site,null,r),Xi(u),Xi(c)}function Ri(t){for(var e,n,i,r,o=t.x,s=t.y,a=rc._;a;)if(i=qi(a,s)-o,i>Aa)a=a.L;else{if(r=o-Vi(a,s),!(r>Aa)){i>-Aa?(e=a.P,n=a):r>-Aa?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}var u=Li(t);if(rc.insert(e,u),e||n){if(e===n)return Bi(e),n=Li(e.site),rc.insert(u,n),u.edge=n.edge=$i(e.site,u.site),Xi(e),void Xi(n);if(!n)return void(u.edge=$i(e.site,u.site));Bi(e),Bi(n);var c=e.site,h=c.x,l=c.y,p=t.x-h,f=t.y-l,d=n.site,g=d.x-h,m=d.y-l,v=2*(p*m-f*g),y=p*p+f*f,_=g*g+m*m,x={x:(m*y-f*_)/v+h,y:(p*_-g*y)/v+l};Ki(n.edge,c,d,x),u.edge=$i(c,t,null,x),n.edge=$i(t,d,null,x),Xi(e),Xi(n)}}function qi(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;n=s.site;var a=n.x,u=n.y,c=u-e;if(!c)return a;var h=a-i,l=1/o-1/c,p=h/c;return l?(-p+Math.sqrt(p*p-2*l*(h*h/(-2*c)-u+c/2+r-o/2)))/l+i:(i+a)/2}function Vi(t,e){var n=t.N;if(n)return qi(n,e);var i=t.site;return i.y===e?i.x:1/0}function Ui(t){this.site=t,this.edges=[]}function ji(t){for(var e,n,i,r,o,s,a,u,c,h,l=t[0][0],p=t[1][0],f=t[0][1],d=t[1][1],g=ic,m=g.length;m--;)if(o=g[m],o&&o.prepare())for(a=o.edges,u=a.length,s=0;u>s;)h=a[s].end(),i=h.x,r=h.y,c=a[++s%u].start(),e=c.x,n=c.y,(ma(i-e)>Aa||ma(r-n)>Aa)&&(a.splice(s,0,new tr(Qi(o.site,h,ma(i-l)<Aa&&d-r>Aa?{x:l,y:ma(e-l)<Aa?n:d}:ma(r-d)<Aa&&p-i>Aa?{x:ma(n-d)<Aa?e:p,y:d}:ma(i-p)<Aa&&r-f>Aa?{x:p,y:ma(e-p)<Aa?n:f}:ma(r-f)<Aa&&i-l>Aa?{x:ma(n-f)<Aa?e:l,y:f}:null),o.site,null)),++u)
}function Gi(t,e){return e.angle-t.angle}function Yi(){nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Xi(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var s=r.x,a=r.y,u=i.x-s,c=i.y-a,h=o.x-s,l=o.y-a,p=2*(u*l-c*h);if(!(p>=-Da)){var f=u*u+c*c,d=h*h+l*l,g=(l*f-c*d)/p,m=(u*d-h*f)/p,l=m+a,v=uc.pop()||new Yi;v.arc=t,v.site=r,v.x=g+s,v.y=l+Math.sqrt(g*g+m*m),v.cy=l,t.circle=v;for(var y=null,_=sc._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){y=_.P;break}_=_.L}else{if(!_.R){y=_;break}_=_.R}sc.insert(y,v),y||(oc=v)}}}}function Bi(t){var e=t.circle;e&&(e.P||(oc=e.N),sc.remove(e),uc.push(e),nr(e),t.circle=null)}function Zi(t){for(var e,n=nc,i=Un(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)e=n[r],(!Wi(e,t)||!i(e)||ma(e.a.x-e.b.x)<Aa&&ma(e.a.y-e.b.y)<Aa)&&(e.a=e.b=null,n.splice(r,1))}function Wi(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,s=e[0][0],a=e[1][0],u=e[0][1],c=e[1][1],h=t.l,l=t.r,p=h.x,f=h.y,d=l.x,g=l.y,m=(p+d)/2,v=(f+g)/2;if(g===f){if(s>m||m>=a)return;if(p>d){if(o){if(o.y>=c)return}else o={x:m,y:u};n={x:m,y:c}}else{if(o){if(o.y<u)return}else o={x:m,y:c};n={x:m,y:u}}}else if(i=(p-d)/(g-f),r=v-i*m,-1>i||i>1)if(p>d){if(o){if(o.y>=c)return}else o={x:(u-r)/i,y:u};n={x:(c-r)/i,y:c}}else{if(o){if(o.y<u)return}else o={x:(c-r)/i,y:c};n={x:(u-r)/i,y:u}}else if(g>f){if(o){if(o.x>=a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}else{if(o){if(o.x<s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}return t.a=o,t.b=n,!0}function Ji(t,e){this.l=t,this.r=e,this.a=this.b=null}function $i(t,e,n,i){var r=new Ji(t,e);return nc.push(r),n&&Ki(r,t,e,n),i&&Ki(r,e,t,i),ic[t.i].edges.push(new tr(r,t,e)),ic[e.i].edges.push(new tr(r,e,t)),r}function Qi(t,e,n){var i=new Ji(t,null);return i.a=e,i.b=n,nc.push(i),i}function Ki(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function tr(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function er(){this._=null}function nr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ir(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function rr(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function or(t){for(;t.L;)t=t.L;return t}function sr(t,e){var n,i,r,o=t.sort(ar).pop();for(nc=[],ic=new Array(t.length),rc=new er,sc=new er;;)if(r=oc,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))(o.x!==n||o.y!==i)&&(ic[o.i]=new Ui(o),Ri(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;Hi(r.arc)}e&&(Zi(e),ji(e));var s={cells:ic,edges:nc};return rc=sc=nc=ic=null,s}function ar(t,e){return e.y-t.y||e.x-t.x}function ur(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function cr(t){return t.x}function hr(t){return t.y}function lr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var s=.5*(n+r),a=.5*(i+o),u=e.nodes;u[0]&&pr(t,u[0],n,i,s,a),u[1]&&pr(t,u[1],s,i,r,a),u[2]&&pr(t,u[2],n,a,s,o),u[3]&&pr(t,u[3],s,a,r,o)}}function fr(t,e,n,i,r,o,s){var a,u=1/0;return function c(t,h,l,p,f){if(!(h>o||l>s||i>p||r>f)){if(d=t.point){var d,g=e-d[0],m=n-d[1],v=g*g+m*m;if(u>v){var y=Math.sqrt(u=v);i=e-y,r=n-y,o=e+y,s=n+y,a=d}}for(var _=t.nodes,x=.5*(h+p),w=.5*(l+f),M=e>=x,b=n>=w,S=b<<1|M,O=S+4;O>S;++S)if(t=_[3&S])switch(3&S){case 0:c(t,h,l,x,w);break;case 1:c(t,x,l,p,w);break;case 2:c(t,h,w,x,f);break;case 3:c(t,x,w,p,f)}}}(t,i,r,o,s),a}function dr(t,e){t=na.rgb(t),e=na.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,s=e.g-i,a=e.b-r;return function(t){return"#"+_e(Math.round(n+o*t))+_e(Math.round(i+s*t))+_e(Math.round(r+a*t))}}function gr(t,e){var n,i={},r={};for(n in t)n in e?i[n]=yr(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function mr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vr(t,e){var n,i,r,o=hc.lastIndex=lc.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=hc.exec(t))&&(i=lc.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:mr(n,i)})),o=lc.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,i=0;e>i;++i)a[(n=u[i]).i]=n.x(t);return a.join("")})}function yr(t,e){for(var n,i=na.interpolators.length;--i>=0&&!(n=na.interpolators[i](t,e)););return n}function _r(t,e){var n,i=[],r=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)i.push(yr(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;s>n;++n)r[n]=e[n];return function(t){for(n=0;a>n;++n)r[n]=i[n](t);return r}}function xr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function wr(t){return function(e){return 1-t(1-e)}}function Mr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function br(t){return t*t}function Sr(t){return t*t*t}function Or(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Tr(t){return function(e){return Math.pow(e,t)}}function Er(t){return 1-Math.cos(t*Ra)}function zr(t){return Math.pow(2,10*(t-1))}function Cr(t){return 1-Math.sqrt(1-t*t)}function kr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Fa*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,-10*i)*Math.sin((i-n)*Fa/e)}}function Pr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Nr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ir(t,e){t=na.hcl(t),e=na.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,s=e.c-i,a=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ce(n+o*t,i+s*t,r+a*t)+""}}function Ar(t,e){t=na.hsl(t),e=na.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,s=e.s-i,a=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ae(n+o*t,i+s*t,r+a*t)+""}}function Dr(t,e){t=na.lab(t),e=na.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,s=e.a-i,a=e.b-r;return function(t){return le(n+o*t,i+s*t,r+a*t)+""}}function Lr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Fr(t){var e=[t.a,t.b],n=[t.c,t.d],i=Rr(e),r=Hr(e,n),o=Rr(qr(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Va,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Va:0}function Hr(t,e){return t[0]*e[0]+t[1]*e[1]}function Rr(t){var e=Math.sqrt(Hr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function qr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Vr(t,e){var n,i=[],r=[],o=na.transform(t),s=na.transform(e),a=o.translate,u=s.translate,c=o.rotate,h=s.rotate,l=o.skew,p=s.skew,f=o.scale,d=s.scale;return a[0]!=u[0]||a[1]!=u[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:mr(a[0],u[0])},{i:3,x:mr(a[1],u[1])})):i.push(u[0]||u[1]?"translate("+u+")":""),c!=h?(c-h>180?h+=360:h-c>180&&(c+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:mr(c,h)})):h&&i.push(i.pop()+"rotate("+h+")"),l!=p?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:mr(l,p)}):p&&i.push(i.pop()+"skewX("+p+")"),f[0]!=d[0]||f[1]!=d[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:mr(f[0],d[0])},{i:n-2,x:mr(f[1],d[1])})):(1!=d[0]||1!=d[1])&&i.push(i.pop()+"scale("+d+")"),n=r.length,function(t){for(var e,o=-1;++o<n;)i[(e=r[o]).i]=e.x(t);return i.join("")}}function Ur(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function jr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Gr(t){for(var e=t.source,n=t.target,i=Xr(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Yr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Xr(t,e){if(t===e)return t;for(var n=Yr(t),i=Yr(e),r=n.pop(),o=i.pop(),s=null;r===o;)s=r,r=n.pop(),o=i.pop();return s}function Br(t){t.fixed|=2}function Zr(t){t.fixed&=-7}function Wr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Jr(t){t.fixed&=-5}function $r(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,u=-1;++u<a;)o=s[u],null!=o&&($r(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=e*n[t.point.index];t.charge+=t.pointCharge=c,i+=c*t.point.x,r+=c*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Qr(t,e){return na.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ro,t}function Kr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;--i>=0;)n.push(r[i])}function to(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,s=-1;++s<r;)n.push(o[s]);for(;null!=(t=i.pop());)e(t)}function eo(t){return t.children}function no(t){return t.value}function io(t,e){return e.value-t.value}function ro(t){return na.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function oo(t){return t.x}function so(t){return t.y}function ao(t,e,n){t.y0=e,t.y=n}function uo(t){return na.range(t.length)}function co(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function ho(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function lo(t){return t.reduce(po,0)}function po(t,e){return t+e[1]}function fo(t,e){return go(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function go(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function mo(t){return[na.min(t),na.max(t)]}function vo(t,e){return t.value-e.value}function yo(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function _o(t,e){t._pack_next=e,e._pack_prev=t}function xo(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return.999*r*r>n*n+i*i}function wo(t){function e(t){h=Math.min(t.x-t.r,h),l=Math.max(t.x+t.r,l),p=Math.min(t.y-t.r,p),f=Math.max(t.y+t.r,f)}if((n=t.children)&&(c=n.length)){var n,i,r,o,s,a,u,c,h=1/0,l=-1/0,p=1/0,f=-1/0;if(n.forEach(Mo),i=n[0],i.x=-i.r,i.y=0,e(i),c>1&&(r=n[1],r.x=r.r,r.y=0,e(r),c>2))for(o=n[2],Oo(i,r,o),e(o),yo(i,o),i._pack_prev=o,yo(o,r),r=i._pack_next,s=3;c>s;s++){Oo(i,r,o=n[s]);var d=0,g=1,m=1;for(a=r._pack_next;a!==r;a=a._pack_next,g++)if(xo(a,o)){d=1;break}if(1==d)for(u=i._pack_prev;u!==a._pack_prev&&!xo(u,o);u=u._pack_prev,m++);d?(m>g||g==m&&r.r<i.r?_o(i,r=a):_o(i=u,r),s--):(yo(i,o),r=o,e(o))}var v=(h+l)/2,y=(p+f)/2,_=0;for(s=0;c>s;s++)o=n[s],o.x-=v,o.y-=y,_=Math.max(_,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=_,n.forEach(bo)}}function Mo(t){t._pack_next=t._pack_prev=t}function bo(t){delete t._pack_next,delete t._pack_prev}function So(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,s=r.length;++o<s;)So(r[o],e,n,i)}function Oo(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var s=e.r+n.r,a=r*r+o*o;s*=s,i*=i;var u=.5+(i-s)/(2*a),c=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=t.x+u*r+c*o,n.y=t.y+u*o-c*r}else n.x=t.x+i,n.y=t.y}function To(t,e){return t.parent==e.parent?1:2}function Eo(t){var e=t.children;return e.length?e[0]:t.t}function zo(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Co(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function ko(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function Po(t,e,n){return t.a.parent===e.parent?t.a:n}function No(t){return 1+na.max(t,function(t){return t.y})}function Io(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ao(t){var e=t.children;return e&&e.length?Ao(e[0]):t}function Do(t){var e,n=t.children;return n&&(e=n.length)?Do(n[e-1]):t}function Lo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Fo(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Ho(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ro(t){return t.rangeExtent?t.rangeExtent():Ho(t.range())}function qo(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Vo(t,e){var n,i=0,r=t.length-1,o=t[i],s=t[r];return o>s&&(n=i,i=r,r=n,n=o,o=s,s=n),t[i]=e.floor(o),t[r]=e.ceil(s),t}function Uo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:Mc}function jo(t,e,n,i){var r=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=a;)r.push(n(t[s-1],t[s])),o.push(i(e[s-1],e[s]));return function(e){var n=na.bisect(t,e,1,a)-1;return o[n](r[n](e))}}function Go(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?jo:qo,u=i?jr:Ur;return s=r(t,e,u,n),a=r(e,t,u,yr),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Lr)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return Zo(t,e)},o.tickFormat=function(e,n){return Wo(t,e,n)},o.nice=function(e){return Xo(t,e),r()},o.copy=function(){return Go(t,e,n,i)},r()}function Yo(t,e){return na.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Xo(t,e){return Vo(t,Uo(Bo(t,e)[2]))}function Bo(t,e){null==e&&(e=10);var n=Ho(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Zo(t,e){return na.range.apply(na,Bo(t,e))}function Wo(t,e,n){var i=Bo(t,e);if(n){var r=hu.exec(n);if(r.shift(),"s"===r[8]){var o=na.formatPrefix(Math.max(ma(i[0]),ma(i[1])));return r[7]||(r[7]="."+Jo(o.scale(i[2]))),r[8]="f",n=na.format(r.join("")),function(t){return n(o.scale(t))+o.symbol}}r[7]||(r[7]="."+$o(r[8],i)),n=r.join("")}else n=",."+Jo(i[2])+"f";return na.format(n)}function Jo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function $o(t,e){var n=Jo(e[2]);return t in bc?Math.abs(n-Jo(Math.max(ma(e[0]),ma(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Qo(t,e,n,i){function r(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function s(e){return t(r(e))}return s.invert=function(e){return o(t.invert(e))},s.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((i=e.map(Number)).map(r)),s):i},s.base=function(n){return arguments.length?(e=+n,t.domain(i.map(r)),s):e},s.nice=function(){var e=Vo(i.map(r),n?Math:Oc);return t.domain(e),i=e.map(o),s},s.ticks=function(){var t=Ho(i),s=[],a=t[0],u=t[1],c=Math.floor(r(a)),h=Math.ceil(r(u)),l=e%1?2:e;if(isFinite(h-c)){if(n){for(;h>c;c++)for(var p=1;l>p;p++)s.push(o(c)*p);s.push(o(c))}else for(s.push(o(c));c++<h;)for(var p=l-1;p>0;p--)s.push(o(c)*p);for(c=0;s[c]<a;c++);for(h=s.length;s[h-1]>u;h--);s=s.slice(c,h)}return s},s.tickFormat=function(t,e){if(!arguments.length)return Sc;arguments.length<2?e=Sc:"function"!=typeof e&&(e=na.format(e));var i,a=Math.max(.1,t/s.ticks().length),u=n?(i=1e-12,Math.ceil):(i=-1e-12,Math.floor);return function(t){return t/o(u(r(t)+i))<=a?e(t):""}},s.copy=function(){return Qo(t.copy(),e,n,i)},Yo(s,t)}function Ko(t,e,n){function i(e){return t(r(e))}var r=ts(e),o=ts(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return Zo(n,t)},i.tickFormat=function(t,e){return Wo(n,t,e)},i.nice=function(t){return i.domain(Xo(n,t))},i.exponent=function(s){return arguments.length?(r=ts(e=s),o=ts(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return Ko(t.copy(),e,n)},Yo(i,t)}function ts(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function es(t,e){function n(n){return o[((r.get(n)||("range"===e.t?r.set(n,t.push(n)):0/0))-1)%o.length]}function i(e,n){return na.range(t.length).map(function(t){return e+n*t})}var r,o,s;return n.domain=function(i){if(!arguments.length)return t;t=[],r=new a;for(var o,s=-1,u=i.length;++s<u;)r.has(o=i[s])||r.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,s=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(r,a){arguments.length<2&&(a=0);var u=r[0],c=r[1],h=t.length<2?(u=(u+c)/2,0):(c-u)/(t.length-1+a);return o=i(u+h*a/2,h),s=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(r,a){arguments.length<2&&(a=0);var u=r[0],c=r[1],h=t.length<2?(u=c=Math.round((u+c)/2),0):(c-u)/(t.length-1+a)|0;return o=i(u+Math.round(h*a/2+(c-u-(t.length-1+a)*h)/2),h),s=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(r,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var c=r[1]<r[0],h=r[c-0],l=r[1-c],p=(l-h)/(t.length-a+2*u);return o=i(h+p*u,p),c&&o.reverse(),s=p*(1-a),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,a,u){arguments.length<2&&(a=0),arguments.length<3&&(u=a);var c=r[1]<r[0],h=r[c-0],l=r[1-c],p=Math.floor((l-h)/(t.length-a+2*u));return o=i(h+Math.round((l-h-(t.length-a)*p)/2),p),c&&o.reverse(),s=Math.round(p*(1-a)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Ho(e.a[0])},n.copy=function(){return es(t,e)},n.domain(t)}function ns(i,r){function o(){var t=0,e=r.length;for(a=[];++t<e;)a[t-1]=na.quantile(i,t/e);return s}function s(t){return isNaN(t=+t)?void 0:r[na.bisect(a,t)]}var a;return s.domain=function(r){return arguments.length?(i=r.map(e).filter(n).sort(t),o()):i},s.range=function(t){return arguments.length?(r=t,o()):r},s.quantiles=function(){return a},s.invertExtent=function(t){return t=r.indexOf(t),0>t?[0/0,0/0]:[t>0?a[t-1]:i[0],t<a.length?a[t]:i[i.length-1]]},s.copy=function(){return ns(i,r)},o()}function is(t,e,n){function i(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),s=n.length-1,i}var o,s;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},i.copy=function(){return is(t,e,n)},r()}function rs(t,e){function n(n){return n>=n?e[na.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return rs(t,e)},n}function os(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Zo(t,e)},e.tickFormat=function(e,n){return Wo(t,e,n)},e.copy=function(){return os(t)},e}function ss(){return 0}function as(t){return t.innerRadius}function us(t){return t.outerRadius}function cs(t){return t.startAngle}function hs(t){return t.endAngle}function ls(t){return t&&t.padAngle}function ps(t,e,n,i){return(t-n)*e-(e-i)*t>0?0:1}function fs(t,e,n,i,r){var o=t[0]-e[0],s=t[1]-e[1],a=(r?i:-i)/Math.sqrt(o*o+s*s),u=a*s,c=-a*o,h=t[0]+u,l=t[1]+c,p=e[0]+u,f=e[1]+c,d=(h+p)/2,g=(l+f)/2,m=p-h,v=f-l,y=m*m+v*v,_=n-i,x=h*f-p*l,w=(0>v?-1:1)*Math.sqrt(_*_*y-x*x),M=(x*v-m*w)/y,b=(-x*m-v*w)/y,S=(x*v+m*w)/y,O=(-x*m+v*w)/y,T=M-d,E=b-g,z=S-d,C=O-g;return T*T+E*E>z*z+C*C&&(M=S,b=O),[[M-u,b-c],[M*n/_,b*n/_]]}function ds(t){function e(e){function s(){c.push("M",o(t(h),a))}for(var u,c=[],h=[],l=-1,p=e.length,f=Oe(n),d=Oe(i);++l<p;)r.call(this,u=e[l],l)?h.push([+f.call(this,u,l),+d.call(this,u,l)]):h.length&&(s(),h=[]);return h.length&&s(),c.length?c.join(""):null}var n=zi,i=Ci,r=Cn,o=gs,s=o.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Pc.get(t)||gs).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function gs(t){return t.join("L")}function ms(t){return gs(t)+"Z"}function vs(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);return n>1&&r.push("H",i[0]),r.join("")}function ys(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function _s(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function xs(t,e){return t.length<4?gs(t):t[1]+bs(t.slice(1,-1),Ss(t,e))}function ws(t,e){return t.length<3?gs(t):t[0]+bs((t.push(t[0]),t),Ss([t[t.length-2]].concat(t,[t[1]]),e))}function Ms(t,e){return t.length<3?gs(t):t[0]+bs(t,Ss(t,e))}function bs(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return gs(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],s=e[0],a=s,u=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=t[1],u=2),e.length>1){a=e[1],o=t[u],u++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var c=2;c<e.length;c++,u++)o=t[u],a=e[c],i+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var h=t[u];i+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+h[0]+","+h[1]}return i}function Ss(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],s=t[1],a=1,u=t.length;++a<u;)n=o,o=s,s=t[a],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function Os(t){if(t.length<3)return gs(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],s=[r,r,r,(i=t[1])[0]],a=[o,o,o,i[1]],u=[r,",",o,"L",Cs(Ac,s),",",Cs(Ac,a)];for(t.push(t[n-1]);++e<=n;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),ks(u,s,a);return t.pop(),u.push("L",i),u.join("")}function Ts(t){if(t.length<4)return gs(t);for(var e,n=[],i=-1,r=t.length,o=[0],s=[0];++i<3;)e=t[i],o.push(e[0]),s.push(e[1]);for(n.push(Cs(Ac,o)+","+Cs(Ac,s)),--i;++i<r;)e=t[i],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),ks(n,o,s);return n.join("")}function Es(t){for(var e,n,i=-1,r=t.length,o=r+4,s=[],a=[];++i<4;)n=t[i%r],s.push(n[0]),a.push(n[1]);for(e=[Cs(Ac,s),",",Cs(Ac,a)],--i;++i<o;)n=t[i%r],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),ks(e,s,a);return e.join("")}function zs(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],s=t[0][1],a=t[n][0]-o,u=t[n][1]-s,c=-1;++c<=n;)i=t[c],r=c/n,i[0]=e*i[0]+(1-e)*(o+r*a),i[1]=e*i[1]+(1-e)*(s+r*u);return Os(t)}function Cs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ks(t,e,n){t.push("C",Cs(Nc,e),",",Cs(Nc,n),",",Cs(Ic,e),",",Cs(Ic,n),",",Cs(Ac,e),",",Cs(Ac,n))}function Ps(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ns(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],s=i[0]=Ps(r,o);++e<n;)i[e]=(s+(s=Ps(r=o,o=t[e+1])))/2;return i[e]=s,i}function Is(t){for(var e,n,i,r,o=[],s=Ns(t),a=-1,u=t.length-1;++a<u;)e=Ps(t[a],t[a+1]),ma(e)<Aa?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),s[a]=r*n,s[a+1]=r*i));for(a=-1;++a<=u;)r=(t[Math.min(u,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([r||0,s[a]*r||0]);return o}function As(t){return t.length<3?gs(t):t[0]+bs(t,Is(t))}function Ds(t){for(var e,n,i,r=-1,o=t.length;++r<o;)e=t[r],n=e[0],i=e[1]-Ra,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Ls(t){function e(e){function u(){g.push("M",a(t(v),l),h,c(t(m.reverse()),l),"Z")}for(var p,f,d,g=[],m=[],v=[],y=-1,_=e.length,x=Oe(n),w=Oe(r),M=n===i?function(){return f}:Oe(i),b=r===o?function(){return d}:Oe(o);++y<_;)s.call(this,p=e[y],y)?(m.push([f=+x.call(this,p,y),d=+w.call(this,p,y)]),v.push([+M.call(this,p,y),+b.call(this,p,y)])):m.length&&(u(),m=[],v=[]);return m.length&&u(),g.length?g.join(""):null}var n=zi,i=zi,r=0,o=Ci,s=Cn,a=gs,u=a.key,c=a,h="L",l=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(u="function"==typeof t?a=t:(a=Pc.get(t)||gs).key,c=a.reverse||a,h=a.closed?"M":"L",e):u},e.tension=function(t){return arguments.length?(l=t,e):l},e}function Fs(t){return t.radius}function Hs(t){return[t.x,t.y]}function Rs(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]-Ra;return[n*Math.cos(i),n*Math.sin(i)]}}function qs(){return 64}function Vs(){return"circle"}function Us(t){var e=Math.sqrt(t/La);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function js(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Gs(t,e,n){return wa(t,Vc),t.namespace=e,t.id=n,t}function Ys(t,e,n,i){var r=t.id,o=t.namespace;return q(t,"function"==typeof n?function(t,s,a){t[o][r].tween.set(e,i(n.call(t,t.__data__,s,a)))}:(n=i(n),function(t){t[o][r].tween.set(e,n)}))}function Xs(t){return null==t&&(t=""),function(){this.textContent=t}}function Bs(t){return null==t?"__transition__":"__transition_"+t+"__"}function Zs(t,e,n,i,r){var o=t[n]||(t[n]={active:0,count:0}),s=o[i];if(!s){var u=r.time;s=o[i]={tween:new a,time:u,delay:r.delay,duration:r.duration,ease:r.ease,index:e},r=null,++o.count,na.timer(function(r){function a(n){if(o.active>i)return h();var r=o[o.active];r&&(--o.count,delete o[o.active],r.event&&r.event.interrupt.call(t,t.__data__,r.index)),o.active=i,s.event&&s.event.start.call(t,t.__data__,e),s.tween.forEach(function(n,i){(i=i.call(t,t.__data__,e))&&g.push(i)}),p=s.ease,l=s.duration,na.timer(function(){return d.c=c(n||1)?Cn:c,1},0,u)}function c(n){if(o.active!==i)return 1;for(var r=n/l,a=p(r),u=g.length;u>0;)g[--u].call(t,a);return r>=1?(s.event&&s.event.end.call(t,t.__data__,e),h()):void 0}function h(){return--o.count?delete o[i]:delete t[n],1}var l,p,f=s.delay,d=au,g=[];return d.t=f+u,r>=f?a(r-f):void(d.c=a)},0,u)}}function Ws(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate("+(isFinite(i)?i:n(t))+",0)"})}function Js(t,e,n){t.attr("transform",function(t){var i=e(t);return"translate(0,"+(isFinite(i)?i:n(t))+")"})}function $s(t){return t.toISOString()}function Qs(t,e,n){function i(e){return t(e)}function r(t,n){var i=t[1]-t[0],r=i/n,o=na.bisect(Jc,r);return o==Jc.length?[e.year,Bo(t.map(function(t){return t/31536e6}),n)[2]]:o?e[r/Jc[o-1]<Jc[o]/r?o-1:o]:[Kc,Bo(t,n)[2]]}return i.invert=function(e){return Ks(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Ks)},i.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Ks(+n+1),e).length}var o=i.domain(),s=Ho(o),a=null==t?r(s,10):"number"==typeof t&&r(s,t);return a&&(t=a[0],e=a[1]),i.domain(Vo(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Ks(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Ks(+e+1);return e}}:t))},i.ticks=function(t,e){var n=Ho(i.domain()),o=null==t?r(n,10):"number"==typeof t?r(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Ks(+n[1]+1),1>e?1:e)},i.tickFormat=function(){return n},i.copy=function(){return Qs(t.copy(),e,n)},Yo(i,t)}function Ks(t){return new Date(t)}function ta(t){return JSON.parse(t.responseText)}function ea(t){var e=oa.createRange();return e.selectNode(oa.body),e.createContextualFragment(t.responseText)}var na={version:"3.5.3"};Date.now||(Date.now=function(){return+new Date});var ia=[].slice,ra=function(t){return ia.call(t)},oa=document,sa=oa.documentElement,aa=window;try{ra(sa.childNodes)[0].nodeType}catch(ua){ra=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}try{oa.createElement("div").style.setProperty("opacity",0,"")}catch(ca){var ha=aa.Element.prototype,la=ha.setAttribute,pa=ha.setAttributeNS,fa=aa.CSSStyleDeclaration.prototype,da=fa.setProperty;ha.setAttribute=function(t,e){la.call(this,t,e+"")},ha.setAttributeNS=function(t,e,n){pa.call(this,t,e,n+"")},fa.setProperty=function(t,e,n){da.call(this,t,e+"",n)}}na.ascending=t,na.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},na.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},na.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},na.extent=function(t,e){var n,i,r,o=-1,s=t.length;if(1===arguments.length){for(;++o<s;)if(null!=(i=t[o])&&i>=i){n=r=i;break}for(;++o<s;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;++o<s;)if(null!=(i=e.call(t,t[o],o))&&i>=i){n=r=i;break}for(;++o<s;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},na.sum=function(t,e){var i,r=0,o=t.length,s=-1;if(1===arguments.length)for(;++s<o;)n(i=+t[s])&&(r+=i);else for(;++s<o;)n(i=+e.call(t,t[s],s))&&(r+=i);return r},na.mean=function(t,i){var r,o=0,s=t.length,a=-1,u=s;if(1===arguments.length)for(;++a<s;)n(r=e(t[a]))?o+=r:--u;else for(;++a<s;)n(r=e(i.call(t,t[a],a)))?o+=r:--u;return u?o/u:void 0},na.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},na.median=function(i,r){var o,s=[],a=i.length,u=-1;if(1===arguments.length)for(;++u<a;)n(o=e(i[u]))&&s.push(o);else for(;++u<a;)n(o=e(r.call(i,i[u],u)))&&s.push(o);return s.length?na.quantile(s.sort(t),.5):void 0},na.variance=function(t,i){var r,o,s=t.length,a=0,u=0,c=-1,h=0;if(1===arguments.length)for(;++c<s;)n(r=e(t[c]))&&(o=r-a,a+=o/++h,u+=o*(r-a));else for(;++c<s;)n(r=e(i.call(t,t[c],c)))&&(o=r-a,a+=o/++h,u+=o*(r-a));return h>1?u/(h-1):void 0},na.deviation=function(){var t=na.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ga=i(t);na.bisectLeft=ga.left,na.bisect=na.bisectRight=ga.right,na.bisector=function(e){return i(1===e.length?function(n,i){return t(e(n),i)}:e)},na.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var i,r,o=n-e;o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},na.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},na.pairs=function(t){for(var e,n=0,i=t.length-1,r=t[0],o=new Array(0>i?0:i);i>n;)o[n]=[e=r,r=t[++n]];return o},na.zip=function(){if(!(i=arguments.length))return[];for(var t=-1,e=na.min(arguments,r),n=new Array(e);++t<e;)for(var i,o=-1,s=n[t]=new Array(i);++o<i;)s[o]=arguments[o][t];return n},na.transpose=function(t){return na.zip.apply(na,t)},na.keys=function(t){var e=[];for(var n in t)e.push(n);return e},na.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},na.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},na.merge=function(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--s]=i[e];return n};var ma=Math.abs;na.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var i,r=[],s=o(ma(n)),a=-1;if(t*=s,e*=s,n*=s,0>n)for(;(i=t+n*++a)>e;)r.push(i/s);else for(;(i=t+n*++a)<e;)r.push(i/s);return r},na.map=function(t,e){var n=new a;if(t instanceof a)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e.call(t,i=t[r],r),i)}else for(var s in t)n.set(s,t[s]);return n};var va="__proto__",ya="\x00";s(a,{has:h,get:function(t){return this._[u(t)]},set:function(t,e){return this._[u(t)]=e},remove:l,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:c(e),value:this._[e]});return t},size:f,empty:d,forEach:function(t){for(var e in this._)t.call(this,c(e),this._[e])
}}),na.nest=function(){function t(e,s,u){if(u>=o.length)return i?i.call(r,s):n?s.sort(n):s;for(var c,h,l,p,f=-1,d=s.length,g=o[u++],m=new a;++f<d;)(p=m.get(c=g(h=s[f])))?p.push(h):m.set(c,[h]);return e?(h=e(),l=function(n,i){h.set(n,t(e,i,u))}):(h={},l=function(n,i){h[n]=t(e,i,u)}),m.forEach(l),h}function e(t,n){if(n>=o.length)return t;var i=[],r=s[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,r={},o=[],s=[];return r.map=function(e,n){return t(n,e,0)},r.entries=function(n){return e(t(na.map,n,0),0)},r.key=function(t){return o.push(t),r},r.sortKeys=function(t){return s[o.length-1]=t,r},r.sortValues=function(t){return n=t,r},r.rollup=function(t){return i=t,r},r},na.set=function(t){var e=new g;if(t)for(var n=0,i=t.length;i>n;++n)e.add(t[n]);return e},s(g,{has:h,add:function(t){return this._[u(t+="")]=!0,t},remove:l,values:p,size:f,empty:d,forEach:function(t){for(var e in this._)t.call(this,c(e))}}),na.behavior={},na.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=m(t,e,e[n]);return t};var _a=["webkit","ms","moz","Moz","o","O"];na.dispatch=function(){for(var t=new _,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=x(t);return t},_.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},na.event=null,na.requote=function(t){return t.replace(xa,"\\$&")};var xa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,wa={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Ma=function(t,e){return e.querySelector(t)},ba=function(t,e){return e.querySelectorAll(t)},Sa=sa.matches||sa[v(sa,"matchesSelector")],Oa=function(t,e){return Sa.call(t,e)};"function"==typeof Sizzle&&(Ma=function(t,e){return Sizzle(t,e)[0]||null},ba=Sizzle,Oa=Sizzle.matchesSelector),na.selection=function(){return Ca};var Ta=na.selection.prototype=[];Ta.select=function(t){var e,n,i,r,o=[];t=O(t);for(var s=-1,a=this.length;++s<a;){o.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var u=-1,c=i.length;++u<c;)(r=i[u])?(e.push(n=t.call(r,r.__data__,u,s)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return S(o)},Ta.selectAll=function(t){var e,n,i=[];t=T(t);for(var r=-1,o=this.length;++r<o;)for(var s=this[r],a=-1,u=s.length;++a<u;)(n=s[a])&&(i.push(e=ra(t.call(n,n.__data__,a,r))),e.parentNode=n);return S(i)};var Ea={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};na.ns={prefix:Ea,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),Ea.hasOwnProperty(n)?{space:Ea[n],local:t}:t}},Ta.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=na.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Ta.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=k(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!C(t[r]).test(e))return!1;return!0}for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},Ta.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(I(n,t[n],e));return this}if(2>i)return aa.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(I(t,e,n))},Ta.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(A(e,t[e]));return this}return this.each(A(t,e))},Ta.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ta.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ta.append=function(t){return t=D(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ta.insert=function(t,e){return t=D(t),e=O(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Ta.remove=function(){return this.each(L)},Ta.data=function(t,e){function n(t,n){var i,r,o,s=t.length,l=n.length,p=Math.min(s,l),f=new Array(l),d=new Array(l),g=new Array(s);if(e){var m,v=new a,y=new Array(s);for(i=-1;++i<s;)v.has(m=e.call(r=t[i],r.__data__,i))?g[i]=r:v.set(m,r),y[i]=m;for(i=-1;++i<l;)(r=v.get(m=e.call(n,o=n[i],i)))?r!==!0&&(f[i]=r,r.__data__=o):d[i]=F(o),v.set(m,!0);for(i=-1;++i<s;)v.get(y[i])!==!0&&(g[i]=t[i])}else{for(i=-1;++i<p;)r=t[i],o=n[i],r?(r.__data__=o,f[i]=r):d[i]=F(o);for(;l>i;++i)d[i]=F(n[i]);for(;s>i;++i)g[i]=t[i]}d.update=f,d.parentNode=f.parentNode=g.parentNode=t.parentNode,u.push(d),c.push(f),h.push(g)}var i,r,o=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(i=this[0]).length);++o<s;)(r=i[o])&&(t[o]=r.__data__);return t}var u=V([]),c=S([]),h=S([]);if("function"==typeof t)for(;++o<s;)n(i=this[o],t.call(i,i.parentNode.__data__,o));else for(;++o<s;)n(i=this[o],t);return c.enter=function(){return u},c.exit=function(){return h},c},Ta.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ta.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=H(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,u=n.length;u>a;a++)(i=n[a])&&t.call(i,i.__data__,a,o)&&e.push(i)}return S(r)},Ta.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Ta.sort=function(t){t=R.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ta.each=function(t){return q(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Ta.call=function(t){var e=ra(arguments);return t.apply(e[0]=this,e),this},Ta.empty=function(){return!this.node()},Ta.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null},Ta.size=function(){var t=0;return q(this,function(){++t}),t};var za=[];na.selection.enter=V,na.selection.enter.prototype=za,za.append=Ta.append,za.empty=Ta.empty,za.node=Ta.node,za.call=Ta.call,za.size=Ta.size,za.select=function(t){for(var e,n,i,r,o,s=[],a=-1,u=this.length;++a<u;){i=(r=this[a]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var c=-1,h=r.length;++c<h;)(o=r[c])?(e.push(i[c]=n=t.call(r.parentNode,o.__data__,c,a)),n.__data__=o.__data__):e.push(null)}return S(s)},za.insert=function(t,e){return arguments.length<2&&(e=U(this)),Ta.insert.call(this,t,e)},na.select=function(t){var e=["string"==typeof t?Ma(t,oa):t];return e.parentNode=sa,S([e])},na.selectAll=function(t){var e=ra("string"==typeof t?ba(t,oa):t);return e.parentNode=sa,S([e])};var Ca=na.select(sa);Ta.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(j(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(j(t,e,n))};var ka=na.map({mouseenter:"mouseover",mouseleave:"mouseout"});ka.forEach(function(t){"on"+t in oa&&ka.remove(t)});var Pa="onselectstart"in oa?null:v(sa.style,"userSelect"),Na=0;na.mouse=function(t){return B(t,M())};var Ia=/WebKit/.test(aa.navigator.userAgent)?-1:0;na.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=M().changedTouches),e)for(var i,r=0,o=e.length;o>r;++r)if((i=e[r]).identifier===n)return B(t,i)},na.behavior.drag=function(){function t(){this.on("mousedown.drag",r).on("touchstart.drag",o)}function e(t,e,r,o,s){return function(){function a(){var t,n,i=e(p,g);i&&(t=i[0]-_[0],n=i[1]-_[1],d|=t|n,_=i,f({type:"drag",x:i[0]+c[0],y:i[1]+c[1],dx:t,dy:n}))}function u(){e(p,g)&&(v.on(o+m,null).on(s+m,null),y(d&&na.event.target===l),f({type:"dragend"}))}var c,h=this,l=na.event.target,p=h.parentNode,f=n.of(h,arguments),d=0,g=t(),m=".drag"+(null==g?"":"-"+g),v=na.select(r()).on(o+m,a).on(s+m,u),y=X(),_=e(p,g);i?(c=i.apply(h,arguments),c=[c.x-_[0],c.y-_[1]]):c=[0,0],f({type:"dragstart"})}}var n=b(t,"drag","dragstart","dragend"),i=null,r=e(y,na.mouse,J,"mousemove","mouseup"),o=e(Z,na.touch,W,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},na.rebind(t,n,"on")},na.touches=function(t,e){return arguments.length<2&&(e=M().touches),e?ra(e).map(function(e){var n=B(t,e);return n.identifier=e.identifier,n}):[]};var Aa=1e-6,Da=Aa*Aa,La=Math.PI,Fa=2*La,Ha=Fa-Aa,Ra=La/2,qa=La/180,Va=180/La,Ua=Math.SQRT2,ja=2,Ga=4;na.interpolateZoom=function(t,e){function n(t){var e=t*y;if(v){var n=ne(g),s=o/(ja*p)*(n*ie(Ua*e+g)-ee(g));return[i+s*c,r+s*h,o*n/ne(Ua*e+g)]}return[i+t*c,r+t*h,o*Math.exp(Ua*e)]}var i=t[0],r=t[1],o=t[2],s=e[0],a=e[1],u=e[2],c=s-i,h=a-r,l=c*c+h*h,p=Math.sqrt(l),f=(u*u-o*o+Ga*l)/(2*o*ja*p),d=(u*u-o*o-Ga*l)/(2*u*ja*p),g=Math.log(Math.sqrt(f*f+1)-f),m=Math.log(Math.sqrt(d*d+1)-d),v=m-g,y=(v||Math.log(u/o))/Ua;return n.duration=1e3*y,n},na.behavior.zoom=function(){function t(t){t.on(k,h).on(Ba+".zoom",p).on("dblclick.zoom",f).on(I,l)}function e(t){return[(t[0]-O.x)/O.k,(t[1]-O.y)/O.k]}function n(t){return[t[0]*O.k+O.x,t[1]*O.k+O.y]}function i(t){O.k=Math.max(E[0],Math.min(E[1],t))}function r(t,e){e=n(e),O.x+=t[0]-e[0],O.y+=t[1]-e[1]}function o(e,n,o,s){e.__chart__={x:O.x,y:O.y,k:O.k},i(Math.pow(2,s)),r(g=n,o),e=na.select(e),z>0&&(e=e.transition().duration(z)),e.call(t.event)}function s(){x&&x.domain(_.range().map(function(t){return(t-O.x)/O.k}).map(_.invert)),S&&S.domain(M.range().map(function(t){return(t-O.y)/O.k}).map(M.invert))}function a(t){C++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:O.k,translate:[O.x,O.y]})}function c(t){--C||t({type:"zoomend"}),g=null}function h(){function t(){h=1,r(na.mouse(i),p),u(s)}function n(){l.on(P,null).on(N,null),f(h&&na.event.target===o),c(s)}var i=this,o=na.event.target,s=A.of(i,arguments),h=0,l=na.select(aa).on(P,t).on(N,n),p=e(na.mouse(i)),f=X();qc.call(i),a(s)}function l(){function t(){var t=na.touches(d);return f=O.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function n(){var e=na.event.target;na.select(e).on(x,s).on(M,p),b.push(e);for(var n=na.event.changedTouches,i=0,r=n.length;r>i;++i)m[n[i].identifier]=null;var a=t(),u=Date.now();if(1===a.length){if(500>u-y){var c=a[0];o(d,c,m[c.identifier],Math.floor(Math.log(O.k)/Math.LN2)+1),w()}y=u}else if(a.length>1){var c=a[0],h=a[1],l=c[0]-h[0],f=c[1]-h[1];v=l*l+f*f}}function s(){var t,e,n,o,s=na.touches(d);qc.call(d);for(var a=0,c=s.length;c>a;++a,o=null)if(n=s[a],o=m[n.identifier]){if(e)break;t=n,e=o}if(o){var h=(h=n[0]-t[0])*h+(h=n[1]-t[1])*h,l=v&&Math.sqrt(h/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+o[0])/2,(e[1]+o[1])/2],i(l*f)}y=null,r(t,e),u(g)}function p(){if(na.event.touches.length){for(var e=na.event.changedTouches,n=0,i=e.length;i>n;++n)delete m[e[n].identifier];for(var r in m)return void t()}na.selectAll(b).on(_,null),S.on(k,h).on(I,l),T(),c(g)}var f,d=this,g=A.of(d,arguments),m={},v=0,_=".zoom-"+na.event.changedTouches[0].identifier,x="touchmove"+_,M="touchend"+_,b=[],S=na.select(d),T=X();n(),a(g),S.on(k,null).on(I,n)}function p(){var t=A.of(this,arguments);v?clearTimeout(v):(d=e(g=m||na.mouse(this)),qc.call(this),a(t)),v=setTimeout(function(){v=null,c(t)},50),w(),i(Math.pow(2,.002*Ya())*O.k),r(g,d),u(t)}function f(){var t=na.mouse(this),n=Math.log(O.k)/Math.LN2;o(this,t,e(t),na.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var d,g,m,v,y,_,x,M,S,O={x:0,y:0,k:1},T=[960,500],E=Xa,z=250,C=0,k="mousedown.zoom",P="mousemove.zoom",N="mouseup.zoom",I="touchstart.zoom",A=b(t,"zoomstart","zoom","zoomend");return t.event=function(t){t.each(function(){var t=A.of(this,arguments),e=O;Hc?na.select(this).transition().each("start.zoom",function(){O=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var n=T[0],i=T[1],r=g?g[0]:n/2,o=g?g[1]:i/2,s=na.interpolateZoom([(r-O.x)/O.k,(o-O.y)/O.k,n/O.k],[(r-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var i=s(e),a=n/i[2];this.__chart__=O={x:r-i[0]*a,y:o-i[1]*a,k:a},u(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=O,a(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(O={x:+e[0],y:+e[1],k:O.k},s(),t):[O.x,O.y]},t.scale=function(e){return arguments.length?(O={x:O.x,y:O.y,k:+e},s(),t):O.k},t.scaleExtent=function(e){return arguments.length?(E=null==e?Xa:[+e[0],+e[1]],t):E},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(T=e&&[+e[0],+e[1]],t):T},t.duration=function(e){return arguments.length?(z=+e,t):z},t.x=function(e){return arguments.length?(x=e,_=e.copy(),O={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(S=e,M=e.copy(),O={x:0,y:0,k:1},t):S},na.rebind(t,A,"on")};var Ya,Xa=[0,1/0],Ba="onwheel"in oa?(Ya=function(){return-na.event.deltaY*(na.event.deltaMode?120:1)},"wheel"):"onmousewheel"in oa?(Ya=function(){return na.event.wheelDelta},"mousewheel"):(Ya=function(){return-na.event.detail},"MozMousePixelScroll");na.color=oe,oe.prototype.toString=function(){return this.rgb()+""},na.hsl=se;var Za=se.prototype=new oe;Za.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new se(this.h,this.s,this.l/t)},Za.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new se(this.h,this.s,t*this.l)},Za.rgb=function(){return ae(this.h,this.s,this.l)},na.hcl=ue;var Wa=ue.prototype=new oe;Wa.brighter=function(t){return new ue(this.h,this.c,Math.min(100,this.l+Ja*(arguments.length?t:1)))},Wa.darker=function(t){return new ue(this.h,this.c,Math.max(0,this.l-Ja*(arguments.length?t:1)))},Wa.rgb=function(){return ce(this.h,this.c,this.l).rgb()},na.lab=he;var Ja=18,$a=.95047,Qa=1,Ka=1.08883,tu=he.prototype=new oe;tu.brighter=function(t){return new he(Math.min(100,this.l+Ja*(arguments.length?t:1)),this.a,this.b)},tu.darker=function(t){return new he(Math.max(0,this.l-Ja*(arguments.length?t:1)),this.a,this.b)},tu.rgb=function(){return le(this.l,this.a,this.b)},na.rgb=me;var eu=me.prototype=new oe;eu.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),new me(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new me(r,r,r)},eu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new me(t*this.r,t*this.g,t*this.b)},eu.hsl=function(){return we(this.r,this.g,this.b)},eu.toString=function(){return"#"+_e(this.r)+_e(this.g)+_e(this.b)};var nu=na.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});nu.forEach(function(t,e){nu.set(t,ve(e))}),na.functor=Oe,na.xhr=Ee(Te),na.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var s=ze(t,e,null==n?i:r(n),o);return s.row=function(t){return arguments.length?s.response(null==(n=t)?i:r(t)):n},s}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(s).join(t)}function s(t){return a.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var a=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(h>=c)return s;if(r)return r=!1,o;var e=h;if(34===t.charCodeAt(e)){for(var n=e;n++<c;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}h=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++h):10===i&&(r=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c>h;){var i=t.charCodeAt(h++),a=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(h)&&(++h,++a);else if(i!==u)continue;return t.slice(e,h-a)}return t.slice(e)}for(var i,r,o={},s={},a=[],c=t.length,h=0,l=0;(i=n())!==s;){for(var p=[];i!==o&&i!==s;)p.push(i),i=n();e&&null==(p=e(p,l++))||a.push(p)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new g,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(s).join(t)].concat(e.map(function(e){return r.map(function(t){return s(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},na.csv=na.dsv(",","text/csv"),na.tsv=na.dsv("	","text/tab-separated-values");var iu,ru,ou,su,au,uu=aa[v(aa,"requestAnimationFrame")]||function(t){setTimeout(t,17)};na.timer=function(t,e,n){var i=arguments.length;2>i&&(e=0),3>i&&(n=Date.now());var r=n+e,o={c:t,t:r,f:!1,n:null};ru?ru.n=o:iu=o,ru=o,ou||(su=clearTimeout(su),ou=1,uu(Pe))},na.timer.flush=function(){Ne(),Ie()},na.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var cu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(De);na.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=na.round(t,Ae(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),cu[8+n/3]};var hu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,lu=na.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=na.round(t,Ae(t,e))).toFixed(Math.max(0,Math.min(20,Ae(t*(1+1e-15),e))))}}),pu=na.time={},fu=Date;He.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){du.setUTCDate.apply(this._,arguments)},setDay:function(){du.setUTCDay.apply(this._,arguments)},setFullYear:function(){du.setUTCFullYear.apply(this._,arguments)},setHours:function(){du.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){du.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){du.setUTCMinutes.apply(this._,arguments)},setMonth:function(){du.setUTCMonth.apply(this._,arguments)},setSeconds:function(){du.setUTCSeconds.apply(this._,arguments)},setTime:function(){du.setTime.apply(this._,arguments)}};var du=Date.prototype;pu.year=Re(function(t){return t=pu.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),pu.years=pu.year.range,pu.years.utc=pu.year.utc.range,pu.day=Re(function(t){var e=new fu(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),pu.days=pu.day.range,pu.days.utc=pu.day.utc.range,pu.dayOfYear=function(t){var e=pu.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=pu[t]=Re(function(t){return(t=pu.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=pu.year(t).getDay();return Math.floor((pu.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});pu[t+"s"]=n.range,pu[t+"s"].utc=n.utc.range,pu[t+"OfYear"]=function(t){var n=pu.year(t).getDay();return Math.floor((pu.dayOfYear(t)+(n+e)%7)/7)}}),pu.week=pu.sunday,pu.weeks=pu.sunday.range,pu.weeks.utc=pu.sunday.utc.range,pu.weekOfYear=pu.sundayOfYear;var gu={"-":"",_:" ",0:"0"},mu=/^\s*\d+/,vu=/^%/;na.locale=function(t){return{numberFormat:Le(t),timeFormat:Ve(t)}};var yu=na.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});na.format=yu.numberFormat,na.geo={},cn.prototype={s:0,t:0,add:function(t){hn(t,this.t,_u),hn(_u.s,this.s,this),this.s?this.t+=_u.t:this.s=_u.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var _u=new cn;na.geo.stream=function(t,e){t&&xu.hasOwnProperty(t.type)?xu[t.type](t,e):ln(t,e)};var xu={Feature:function(t,e){ln(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ln(n[i].geometry,e)}},wu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){pn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)pn(n[i],e,0)},Polygon:function(t,e){fn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ln(n[i],e)}};na.geo.area=function(t){return Mu=0,na.geo.stream(t,Su),Mu};var Mu,bu=new cn,Su={sphere:function(){Mu+=4*La},point:y,lineStart:y,lineEnd:y,polygonStart:function(){bu.reset(),Su.lineStart=dn},polygonEnd:function(){var t=2*bu;Mu+=0>t?4*La+t:t,Su.lineStart=Su.lineEnd=Su.point=y}};na.geo.bounds=function(){function t(t,e){_.push(x=[h=t,p=t]),l>e&&(l=e),e>f&&(f=e)}function e(e,n){var i=gn([e*qa,n*qa]);if(v){var r=vn(v,i),o=[r[1],-r[0],0],s=vn(o,r);xn(s),s=wn(s);var u=e-d,c=u>0?1:-1,g=s[0]*Va*c,m=ma(u)>180;if(m^(g>c*d&&c*e>g)){var y=s[1]*Va;y>f&&(f=y)}else if(g=(g+360)%360-180,m^(g>c*d&&c*e>g)){var y=-s[1]*Va;l>y&&(l=y)}else l>n&&(l=n),n>f&&(f=n);m?d>e?a(h,e)>a(h,p)&&(p=e):a(e,p)>a(h,p)&&(h=e):p>=h?(h>e&&(h=e),e>p&&(p=e)):e>d?a(h,e)>a(h,p)&&(p=e):a(e,p)>a(h,p)&&(h=e)}else t(e,n);v=i,d=e}function n(){w.point=e}function i(){x[0]=h,x[1]=p,w.point=t,v=null}function r(t,n){if(v){var i=t-d;y+=ma(i)>180?i+(i>0?360:-360):i}else g=t,m=n;Su.point(t,n),e(t,n)}function o(){Su.lineStart()}function s(){r(g,m),Su.lineEnd(),ma(y)>Aa&&(h=-(p=180)),x[0]=h,x[1]=p,v=null}function a(t,e){return(e-=t)<0?e+360:e}function u(t,e){return t[0]-e[0]}function c(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var h,l,p,f,d,g,m,v,y,_,x,w={point:t,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=o,w.lineEnd=s,y=0,Su.polygonStart()},polygonEnd:function(){Su.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=i,0>bu?(h=-(p=180),l=-(f=90)):y>Aa?f=90:-Aa>y&&(l=-90),x[0]=h,x[1]=p}};return function(t){f=p=-(h=l=1/0),_=[],na.geo.stream(t,w);var e=_.length;if(e){_.sort(u);for(var n,i=1,r=_[0],o=[r];e>i;++i)n=_[i],c(n[0],r)||c(n[1],r)?(a(r[0],n[1])>a(r[0],r[1])&&(r[1]=n[1]),a(n[0],r[1])>a(r[0],r[1])&&(r[0]=n[0])):o.push(r=n);for(var s,n,d=-1/0,e=o.length-1,i=0,r=o[e];e>=i;r=n,++i)n=o[i],(s=a(r[1],n[0]))>d&&(d=s,h=n[0],p=r[1])}return _=x=null,1/0===h||1/0===l?[[0/0,0/0],[0/0,0/0]]:[[h,l],[p,f]]}}(),na.geo.centroid=function(t){Ou=Tu=Eu=zu=Cu=ku=Pu=Nu=Iu=Au=Du=0,na.geo.stream(t,Lu);var e=Iu,n=Au,i=Du,r=e*e+n*n+i*i;return Da>r&&(e=ku,n=Pu,i=Nu,Aa>Tu&&(e=Eu,n=zu,i=Cu),r=e*e+n*n+i*i,Da>r)?[0/0,0/0]:[Math.atan2(n,e)*Va,te(i/Math.sqrt(r))*Va]};var Ou,Tu,Eu,zu,Cu,ku,Pu,Nu,Iu,Au,Du,Lu={sphere:y,point:bn,lineStart:On,lineEnd:Tn,polygonStart:function(){Lu.lineStart=En},polygonEnd:function(){Lu.lineStart=On}},Fu=In(Cn,Fn,Rn,[-La,-La/2]),Hu=1e9;na.geo.clipExtent=function(){var t,e,n,i,r,o,s={stream:function(t){return r&&(r.valid=!1),r=o(t),r.valid=!0,r},extent:function(a){return arguments.length?(o=jn(t=+a[0][0],e=+a[0][1],n=+a[1][0],i=+a[1][1]),r&&(r.valid=!1,r=null),s):[[t,e],[n,i]]}};return s.extent([[0,0],[960,500]])},(na.geo.conicEqualArea=function(){return Gn(Yn)}).raw=Yn,na.geo.albers=function(){return na.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},na.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return e=null,n(o,s),e||(i(o,s),e)||r(o,s),e}var e,n,i,r,o=na.geo.albers(),s=na.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=na.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?s:r>=.166&&.234>r&&i>=-.214&&-.115>i?a:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=s.stream(t),i=a.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),a.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),a.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var c=o.scale(),h=+e[0],l=+e[1];return n=o.translate(e).clipExtent([[h-.455*c,l-.238*c],[h+.455*c,l+.238*c]]).stream(u).point,i=s.translate([h-.307*c,l+.201*c]).clipExtent([[h-.425*c+Aa,l+.12*c+Aa],[h-.214*c-Aa,l+.234*c-Aa]]).stream(u).point,r=a.translate([h-.205*c,l+.212*c]).clipExtent([[h-.214*c+Aa,l+.166*c+Aa],[h-.115*c-Aa,l+.234*c-Aa]]).stream(u).point,t},t.scale(1070)};var Ru,qu,Vu,Uu,ju,Gu,Yu={point:y,lineStart:y,lineEnd:y,polygonStart:function(){qu=0,Yu.lineStart=Xn},polygonEnd:function(){Yu.lineStart=Yu.lineEnd=Yu.point=y,Ru+=ma(qu/2)}},Xu={point:Bn,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},Bu={point:Jn,lineStart:$n,lineEnd:Qn,polygonStart:function(){Bu.lineStart=Kn},polygonEnd:function(){Bu.point=Jn,Bu.lineStart=$n,Bu.lineEnd=Qn}};na.geo.path=function(){function t(t){return t&&("function"==typeof a&&o.pointRadius(+a.apply(this,arguments)),s&&s.valid||(s=r(o)),na.geo.stream(t,s)),o.result()}function e(){return s=null,t}var n,i,r,o,s,a=4.5;return t.area=function(t){return Ru=0,na.geo.stream(t,r(Yu)),Ru},t.centroid=function(t){return Eu=zu=Cu=ku=Pu=Nu=Iu=Au=Du=0,na.geo.stream(t,r(Bu)),Du?[Iu/Du,Au/Du]:Nu?[ku/Nu,Pu/Nu]:Cu?[Eu/Cu,zu/Cu]:[0/0,0/0]},t.bounds=function(t){return ju=Gu=-(Vu=Uu=1/0),na.geo.stream(t,r(Xu)),[[Vu,Uu],[ju,Gu]]},t.projection=function(t){return arguments.length?(r=(n=t)?t.stream||ni(t):Te,e()):n},t.context=function(t){return arguments.length?(o=null==(i=t)?new Zn:new ti(t),"function"!=typeof a&&o.pointRadius(a),e()):i},t.pointRadius=function(e){return arguments.length?(a="function"==typeof e?e:(o.pointRadius(+e),+e),t):a},t.projection(na.geo.albersUsa()).context(null)},na.geo.transform=function(t){return{stream:function(e){var n=new ii(e);for(var i in t)n[i]=t[i];return n}}},ii.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},na.geo.projection=oi,na.geo.projectionMutator=si,(na.geo.equirectangular=function(){return oi(ui)}).raw=ui.invert=ui,na.geo.rotation=function(t){function e(e){return e=t(e[0]*qa,e[1]*qa),e[0]*=Va,e[1]*=Va,e}return t=hi(t[0]%360*qa,t[1]*qa,t.length>2?t[2]*qa:0),e.invert=function(e){return e=t.invert(e[0]*qa,e[1]*qa),e[0]*=Va,e[1]*=Va,e},e},ci.invert=ui,na.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=hi(-t[0]*qa,-t[1]*qa,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Va,t[1]*=Va}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=di((e=+i)*qa,r*qa),t):e},t.precision=function(i){return arguments.length?(n=di(e*qa,(r=+i)*qa),t):r},t.angle(90)},na.geo.distance=function(t,e){var n,i=(e[0]-t[0])*qa,r=t[1]*qa,o=e[1]*qa,s=Math.sin(i),a=Math.cos(i),u=Math.sin(r),c=Math.cos(r),h=Math.sin(o),l=Math.cos(o);return Math.atan2(Math.sqrt((n=l*s)*n+(n=c*h-u*l*a)*n),u*h+c*l*a)},na.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return na.range(Math.ceil(o/m)*m,r,m).map(p).concat(na.range(Math.ceil(c/v)*v,u,v).map(f)).concat(na.range(Math.ceil(i/d)*d,n,d).filter(function(t){return ma(t%m)>Aa}).map(h)).concat(na.range(Math.ceil(a/g)*g,s,g).filter(function(t){return ma(t%v)>Aa
}).map(l))}var n,i,r,o,s,a,u,c,h,l,p,f,d=10,g=d,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[p(o).concat(f(u).slice(1),p(r).reverse().slice(1),f(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],c=+e[0][1],u=+e[1][1],o>r&&(e=o,o=r,r=e),c>u&&(e=c,c=u,u=e),t.precision(y)):[[o,c],[r,u]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(y)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(d=+e[0],g=+e[1],t):[d,g]},t.precision=function(e){return arguments.length?(y=+e,h=mi(a,s,90),l=vi(i,n,y),p=mi(c,u,90),f=vi(o,r,y),t):y},t.majorExtent([[-180,-90+Aa],[180,90-Aa]]).minorExtent([[-180,-80-Aa],[180,80+Aa]])},na.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=yi,r=_i;return t.distance=function(){return na.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},na.geo.interpolate=function(t,e){return xi(t[0]*qa,t[1]*qa,e[0]*qa,e[1]*qa)},na.geo.length=function(t){return Zu=0,na.geo.stream(t,Wu),Zu};var Zu,Wu={sphere:y,point:y,lineStart:wi,lineEnd:y,polygonStart:y,polygonEnd:y},Ju=Mi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(na.geo.azimuthalEqualArea=function(){return oi(Ju)}).raw=Ju;var $u=Mi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},Te);(na.geo.azimuthalEquidistant=function(){return oi($u)}).raw=$u,(na.geo.conicConformal=function(){return Gn(bi)}).raw=bi,(na.geo.conicEquidistant=function(){return Gn(Si)}).raw=Si;var Qu=Mi(function(t){return 1/t},Math.atan);(na.geo.gnomonic=function(){return oi(Qu)}).raw=Qu,Oi.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ra]},(na.geo.mercator=function(){return Ti(Oi)}).raw=Oi;var Ku=Mi(function(){return 1},Math.asin);(na.geo.orthographic=function(){return oi(Ku)}).raw=Ku;var tc=Mi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(na.geo.stereographic=function(){return oi(tc)}).raw=tc,Ei.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ra]},(na.geo.transverseMercator=function(){var t=Ti(Ei),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Ei,na.geom={},na.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,r=Oe(n),o=Oe(i),s=t.length,a=[],u=[];for(e=0;s>e;e++)a.push([+r.call(this,t[e],e),+o.call(this,t[e],e),e]);for(a.sort(Pi),e=0;s>e;e++)u.push([a[e][0],-a[e][1]]);var c=ki(a),h=ki(u),l=h[0]===c[0],p=h[h.length-1]===c[c.length-1],f=[];for(e=c.length-1;e>=0;--e)f.push(t[a[c[e]][2]]);for(e=+l;e<h.length-p;++e)f.push(t[a[h[e]][2]]);return f}var n=zi,i=Ci;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},na.geom.polygon=function(t){return wa(t,ec),t};var ec=na.geom.polygon.prototype=[];ec.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},ec.centroid=function(t){var e,n,i=-1,r=this.length,o=0,s=0,a=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=a,a=this[i],n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return[o*t,s*t]},ec.clip=function(t){for(var e,n,i,r,o,s,a=Ai(t),u=-1,c=this.length-Ai(this),h=this[c-1];++u<c;){for(e=t.slice(),t.length=0,r=this[u],o=e[(i=e.length-a)-1],n=-1;++n<i;)s=e[n],Ni(s,h,r)?(Ni(o,h,r)||t.push(Ii(o,s,h,r)),t.push(s)):Ni(o,h,r)&&t.push(Ii(o,s,h,r)),o=s;a&&t.push(t[0]),h=r}return t};var nc,ic,rc,oc,sc,ac=[],uc=[];Ui.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Gi),e.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=or(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(ir(this,n),t=n,n=t.U),n.C=!1,i.C=!0,rr(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(rr(this,n),t=n,n=t.U),n.C=!1,i.C=!0,ir(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,s=t.R;if(n=o?s?or(s):o:s,r?r.L===t?r.L=n:r.R=n:this._=n,o&&s?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=s,s.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,ir(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,rr(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,ir(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,rr(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ir(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,rr(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},na.geom.voronoi=function(t){function e(t){var e=new Array(t.length),i=a[0][0],r=a[0][1],o=a[1][0],s=a[1][1];return sr(n(t),a).cells.forEach(function(n,a){var u=n.edges,c=n.site,h=e[a]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):c.x>=i&&c.x<=o&&c.y>=r&&c.y<=s?[[i,s],[o,s],[o,r],[i,r]]:[];h.point=t[a]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Aa)*Aa,y:Math.round(s(t,e)/Aa)*Aa,i:e}})}var i=zi,r=Ci,o=i,s=r,a=cc;return t?e(t):(e.links=function(t){return sr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return sr(n(t)).cells.forEach(function(n,i){for(var r,o,s=n.site,a=n.edges.sort(Gi),u=-1,c=a.length,h=a[c-1].edge,l=h.l===s?h.r:h.l;++u<c;)r=h,o=l,h=a[u].edge,l=h.l===s?h.r:h.l,i<o.i&&i<l.i&&ur(s,o,l)<0&&e.push([t[i],t[o.i],t[l.i]])}),e},e.x=function(t){return arguments.length?(o=Oe(i=t),e):i},e.y=function(t){return arguments.length?(s=Oe(r=t),e):r},e.clipExtent=function(t){return arguments.length?(a=null==t?cc:t,e):a===cc?null:a},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):a===cc?null:a&&a[1]},e)};var cc=[[-1e6,-1e6],[1e6,1e6]];na.geom.delaunay=function(t){return na.geom.voronoi().triangles(t)},na.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,s,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var u=t.x,h=t.y;if(null!=u)if(ma(u-n)+ma(h-i)<.01)c(t,e,n,i,r,o,s,a);else{var l=t.point;t.x=t.y=t.point=null,c(t,l,u,h,r,o,s,a),c(t,e,n,i,r,o,s,a)}else t.x=n,t.y=i,t.point=e}else c(t,e,n,i,r,o,s,a)}function c(t,e,n,i,r,s,a,u){var c=.5*(r+a),h=.5*(s+u),l=n>=c,p=i>=h,f=p<<1|l;t.leaf=!1,t=t.nodes[f]||(t.nodes[f]=lr()),l?r=c:a=c,p?s=h:u=h,o(t,e,n,i,r,s,a,u)}var h,l,p,f,d,g,m,v,y,_=Oe(a),x=Oe(u);if(null!=e)g=e,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),l=[],p=[],d=t.length,s)for(f=0;d>f;++f)h=t[f],h.x<g&&(g=h.x),h.y<m&&(m=h.y),h.x>v&&(v=h.x),h.y>y&&(y=h.y),l.push(h.x),p.push(h.y);else for(f=0;d>f;++f){var w=+_(h=t[f],f),M=+x(h,f);g>w&&(g=w),m>M&&(m=M),w>v&&(v=w),M>y&&(y=M),l.push(w),p.push(M)}var b=v-g,S=y-m;b>S?y=m+b:v=g+S;var O=lr();if(O.add=function(t){o(O,t,+_(t,++f),+x(t,f),g,m,v,y)},O.visit=function(t){pr(t,O,g,m,v,y)},O.find=function(t){return fr(O,t[0],t[1],g,m,v,y)},f=-1,null==e){for(;++f<d;)o(O,t[f],l[f],p[f],g,m,v,y);--f}else t.forEach(O.add);return l=p=t=h=null,O}var s,a=zi,u=Ci;return(s=arguments.length)?(a=cr,u=hr,3===s&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(u=t,o):u},o.extent=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o):null==e?null:[[e,n],[i,r]]},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i-e,r-n]},o)},na.interpolateRgb=dr,na.interpolateObject=gr,na.interpolateNumber=mr,na.interpolateString=vr;var hc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lc=new RegExp(hc.source,"g");na.interpolate=yr,na.interpolators=[function(t,e){var n=typeof e;return("string"===n?nu.has(e)||/^(#|rgb\(|hsl\()/.test(e)?dr:vr:e instanceof oe?dr:Array.isArray(e)?_r:"object"===n&&isNaN(e)?gr:mr)(t,e)}],na.interpolateArray=_r;var pc=function(){return Te},fc=na.map({linear:pc,poly:Tr,quad:function(){return br},cubic:function(){return Sr},sin:function(){return Er},exp:function(){return zr},circle:function(){return Cr},elastic:kr,back:Pr,bounce:function(){return Nr}}),dc=na.map({"in":Te,out:wr,"in-out":Mr,"out-in":function(t){return Mr(wr(t))}});na.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,i=e>=0?t.slice(e+1):"in";return n=fc.get(n)||pc,i=dc.get(i)||Te,xr(i(n.apply(null,ia.call(arguments,1))))},na.interpolateHcl=Ir,na.interpolateHsl=Ar,na.interpolateLab=Dr,na.interpolateRound=Lr,na.transform=function(t){var e=oa.createElementNS(na.ns.prefix.svg,"g");return(na.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Fr(n?n.matrix:gc)})(t)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gc={a:1,b:0,c:0,d:1,e:0,f:0};na.interpolateTransform=Vr,na.layout={},na.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(Gr(t[n]));return e}},na.layout.chord=function(){function t(){var t,c,l,p,f,d={},g=[],m=na.range(o),v=[];for(n=[],i=[],t=0,p=-1;++p<o;){for(c=0,f=-1;++f<o;)c+=r[p][f];g.push(c),v.push(na.range(o)),t+=c}for(s&&m.sort(function(t,e){return s(g[t],g[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),t=(Fa-h*o)/t,c=0,p=-1;++p<o;){for(l=c,f=-1;++f<o;){var y=m[p],_=v[y][f],x=r[y][_],w=c,M=c+=x*t;d[y+"-"+_]={index:y,subindex:_,startAngle:w,endAngle:M,value:x}}i[y]={index:y,startAngle:l,endAngle:c,value:(c-l)/t},c+=h}for(p=-1;++p<o;)for(f=p-1;++f<o;){var b=d[p+"-"+f],S=d[f+"-"+p];(b.value||S.value)&&n.push(b.value<S.value?{source:S,target:b}:{source:b,target:S})}u&&e()}function e(){n.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,s,a,u,c={},h=0;return c.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,c):r},c.padding=function(t){return arguments.length?(h=t,n=i=null,c):h},c.sortGroups=function(t){return arguments.length?(s=t,n=i=null,c):s},c.sortSubgroups=function(t){return arguments.length?(a=t,n=null,c):a},c.sortChords=function(t){return arguments.length?(u=t,n&&e(),c):u},c.chords=function(){return n||t(),n},c.groups=function(){return i||t(),i},c},na.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=r-n,u=o*o+s*s;if(u>a*a/m){if(d>u){var c=e.charge/u;t.px-=o*c,t.py-=s*c}return!0}if(e.point&&u&&d>u){var c=e.pointCharge/u;t.px-=o*c,t.py-=s*c}}return!e.charge}}function e(t){t.px=na.event.x,t.py=na.event.y,a.resume()}var n,i,r,o,s,a={},u=na.dispatch("start","tick","end"),c=[1,1],h=.9,l=mc,p=vc,f=-30,d=yc,g=.1,m=.64,v=[],y=[];return a.tick=function(){if((i*=.99)<.005)return u.end({type:"end",alpha:i=0}),!0;var e,n,a,l,p,d,m,_,x,w=v.length,M=y.length;for(n=0;M>n;++n)a=y[n],l=a.source,p=a.target,_=p.x-l.x,x=p.y-l.y,(d=_*_+x*x)&&(d=i*o[n]*((d=Math.sqrt(d))-r[n])/d,_*=d,x*=d,p.x-=_*(m=l.weight/(p.weight+l.weight)),p.y-=x*m,l.x+=_*(m=1-m),l.y+=x*m);if((m=i*g)&&(_=c[0]/2,x=c[1]/2,n=-1,m))for(;++n<w;)a=v[n],a.x+=(_-a.x)*m,a.y+=(x-a.y)*m;if(f)for($r(e=na.geom.quadtree(v),i,s),n=-1;++n<w;)(a=v[n]).fixed||e.visit(t(a));for(n=-1;++n<w;)a=v[n],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*h,a.y-=(a.py-(a.py=a.y))*h);u.tick({type:"tick",alpha:i})},a.nodes=function(t){return arguments.length?(v=t,a):v},a.links=function(t){return arguments.length?(y=t,a):y},a.size=function(t){return arguments.length?(c=t,a):c},a.linkDistance=function(t){return arguments.length?(l="function"==typeof t?t:+t,a):l},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,a):p},a.friction=function(t){return arguments.length?(h=+t,a):h},a.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,a):f},a.chargeDistance=function(t){return arguments.length?(d=t*t,a):Math.sqrt(d)},a.gravity=function(t){return arguments.length?(g=+t,a):g},a.theta=function(t){return arguments.length?(m=t*t,a):Math.sqrt(m)},a.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(u.start({type:"start",alpha:i=t}),na.timer(a.tick)),a):i},a.start=function(){function t(t,i){if(!n){for(n=new Array(u),a=0;u>a;++a)n[a]=[];for(a=0;c>a;++a){var r=y[a];n[r.source.index].push(r.target),n[r.target.index].push(r.source)}}for(var o,s=n[e],a=-1,c=s.length;++a<c;)if(!isNaN(o=s[a][t]))return o;return Math.random()*i}var e,n,i,u=v.length,h=y.length,d=c[0],g=c[1];for(e=0;u>e;++e)(i=v[e]).index=e,i.weight=0;for(e=0;h>e;++e)i=y[e],"number"==typeof i.source&&(i.source=v[i.source]),"number"==typeof i.target&&(i.target=v[i.target]),++i.source.weight,++i.target.weight;for(e=0;u>e;++e)i=v[e],isNaN(i.x)&&(i.x=t("x",d)),isNaN(i.y)&&(i.y=t("y",g)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(r=[],"function"==typeof l)for(e=0;h>e;++e)r[e]=+l.call(this,y[e],e);else for(e=0;h>e;++e)r[e]=l;if(o=[],"function"==typeof p)for(e=0;h>e;++e)o[e]=+p.call(this,y[e],e);else for(e=0;h>e;++e)o[e]=p;if(s=[],"function"==typeof f)for(e=0;u>e;++e)s[e]=+f.call(this,v[e],e);else for(e=0;u>e;++e)s[e]=f;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return n||(n=na.behavior.drag().origin(Te).on("dragstart.force",Br).on("drag.force",e).on("dragend.force",Zr)),arguments.length?void this.on("mouseover.force",Wr).on("mouseout.force",Jr).call(n):n},na.rebind(a,u,"on")};var mc=20,vc=1,yc=1/0;na.layout.hierarchy=function(){function t(r){var o,s=[r],a=[];for(r.depth=0;null!=(o=s.pop());)if(a.push(o),(c=n.call(t,o,o.depth))&&(u=c.length)){for(var u,c,h;--u>=0;)s.push(h=c[u]),h.parent=o,h.depth=o.depth+1;i&&(o.value=0),o.children=c}else i&&(o.value=+i.call(t,o,o.depth)||0),delete o.children;return to(r,function(t){var n,r;e&&(n=t.children)&&n.sort(e),i&&(r=t.parent)&&(r.value+=t.value)}),a}var e=io,n=eo,i=no;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(i=e,t):i},t.revalue=function(e){return i&&(Kr(e,function(t){t.children&&(t.value=0)}),to(e,function(e){var n;e.children||(e.value=+i.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},na.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(s=o.length)){var s,a,u,c=-1;for(i=e.value?i/e.value:0;++c<s;)t(a=o[c],n,u=a.value*i,r),n+=u}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var s=i.call(this,n,o);return t(s[0],0,r[0],r[1]/e(s[0])),s}var i=na.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},Qr(n,i)},na.layout.pie=function(){function t(s){var a,u=s.length,c=s.map(function(n,i){return+e.call(t,n,i)}),h=+("function"==typeof i?i.apply(this,arguments):i),l=("function"==typeof r?r.apply(this,arguments):r)-h,p=Math.min(Math.abs(l)/u,+("function"==typeof o?o.apply(this,arguments):o)),f=p*(0>l?-1:1),d=(l-u*f)/na.sum(c),g=na.range(u),m=[];return null!=n&&g.sort(n===_c?function(t,e){return c[e]-c[t]}:function(t,e){return n(s[t],s[e])}),g.forEach(function(t){m[t]={data:s[t],value:a=c[t],startAngle:h,endAngle:h+=a*d+f,padAngle:p}}),m}var e=Number,n=_c,i=0,r=Fa,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var _c={};na.layout.stack=function(){function t(a,u){if(!(p=a.length))return a;var c=a.map(function(n,i){return e.call(t,n,i)}),h=c.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),l=n.call(t,h,u);c=na.permute(c,l),h=na.permute(h,l);var p,f,d,g,m=i.call(t,h,u),v=c[0].length;for(d=0;v>d;++d)for(r.call(t,c[0][d],g=m[d],h[0][d][1]),f=1;p>f;++f)r.call(t,c[f][d],g+=h[f-1][d][1],h[f][d][1]);return a}var e=Te,n=uo,i=co,r=ao,o=oo,s=so;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:xc.get(e)||uo,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:wc.get(e)||co,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(r=e,t):r},t};var xc=na.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(ho),o=t.map(lo),s=na.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,u=0,c=[],h=[];for(e=0;i>e;++e)n=s[e],u>a?(a+=o[n],c.push(n)):(u+=o[n],h.push(n));return h.reverse().concat(c)},reverse:function(t){return na.range(t.length).reverse()},"default":uo}),wc=na.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,s=[],a=0,u=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>a&&(a=i),s.push(i)}for(n=0;o>n;++n)u[n]=(a-s[n])/2;return u},wiggle:function(t){var e,n,i,r,o,s,a,u,c,h=t.length,l=t[0],p=l.length,f=[];for(f[0]=u=c=0,n=1;p>n;++n){for(e=0,r=0;h>e;++e)r+=t[e][n][1];for(e=0,o=0,a=l[n][0]-l[n-1][0];h>e;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;o+=s*t[e][n][1]}f[n]=u-=r?o/r*a:0,c>u&&(c=u)}for(n=0;p>n;++n)f[n]-=c;return f},expand:function(t){var e,n,i,r=t.length,o=t[0].length,s=1/r,a=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:co});na.layout.histogram=function(){function t(t,o){for(var s,a,u=[],c=t.map(n,this),h=i.call(this,c,o),l=r.call(this,h,c,o),o=-1,p=c.length,f=l.length-1,d=e?1:1/p;++o<f;)s=u[o]=[],s.dx=l[o+1]-(s.x=l[o]),s.y=0;if(f>0)for(o=-1;++o<p;)a=c[o],a>=h[0]&&a<=h[1]&&(s=u[na.bisect(l,a,1,f)-1],s.y+=d,s.push(t[o]));return u}var e=!0,n=Number,i=mo,r=fo;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=Oe(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return go(t,e)}:Oe(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},na.layout.pack=function(){function t(t,o){var s=n.call(this,t,o),a=s[0],u=r[0],c=r[1],h=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(a.x=a.y=0,to(a,function(t){t.r=+h(t.value)}),to(a,wo),i){var l=i*(e?1:Math.max(2*a.r/u,2*a.r/c))/2;to(a,function(t){t.r+=l}),to(a,wo),to(a,function(t){t.r-=l})}return So(a,u/2,c/2,e?1:1/Math.max(2*a.r/u,2*a.r/c)),s}var e,n=na.layout.hierarchy().sort(vo),i=0,r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(i=+e,t):i},Qr(t,n)},na.layout.tree=function(){function t(t,r){var h=s.call(this,t,r),l=h[0],p=e(l);if(to(p,n),p.parent.m=-p.z,Kr(p,i),c)Kr(l,o);else{var f=l,d=l,g=l;Kr(l,function(t){t.x<f.x&&(f=t),t.x>d.x&&(d=t),t.depth>g.depth&&(g=t)});var m=a(f,d)/2-f.x,v=u[0]/(d.x+a(d,f)/2+m),y=u[1]/(g.depth||1);Kr(l,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return h}function e(t){for(var e,n={A:null,children:[t]},i=[n];null!=(e=i.pop());)for(var r,o=e.children,s=0,a=o.length;a>s;++s)i.push((o[s]=r={_:o[s],parent:e,children:(r=o[s].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=r);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){ko(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+a(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+a(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function i(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var i,r=t,o=t,s=e,u=r.parent.children[0],c=r.m,h=o.m,l=s.m,p=u.m;s=zo(s),r=Eo(r),s&&r;)u=Eo(u),o=zo(o),o.a=t,i=s.z+l-r.z-c+a(s._,r._),i>0&&(Co(Po(s,t,n),t,i),c+=i,h+=i),l+=s.m,c+=r.m,p+=u.m,h+=o.m;s&&!zo(o)&&(o.t=s,o.m+=l-h),r&&!Eo(u)&&(u.t=r,u.m+=c-p,n=t)}return n}function o(t){t.x*=u[0],t.y=t.depth*u[1]}var s=na.layout.hierarchy().sort(null).value(null),a=To,u=[1,1],c=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(c=null==(u=e)?o:null,t):c?null:u},t.nodeSize=function(e){return arguments.length?(c=null==(u=e)?null:o,t):c?u:null},Qr(t,s)},na.layout.cluster=function(){function t(t,o){var s,a=e.call(this,t,o),u=a[0],c=0;to(u,function(t){var e=t.children;e&&e.length?(t.x=Io(e),t.y=No(e)):(t.x=s?c+=n(t,s):0,t.y=0,s=t)});var h=Ao(u),l=Do(u),p=h.x-n(h,l)/2,f=l.x+n(l,h)/2;return to(u,r?function(t){t.x=(t.x-u.x)*i[0],t.y=(u.y-t.y)*i[1]}:function(t){t.x=(t.x-p)/(f-p)*i[0],t.y=(1-(u.y?t.y/u.y:1))*i[1]}),a}var e=na.layout.hierarchy().sort(null).value(null),n=To,i=[1,1],r=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(r=null==(i=e),t):r?null:i},t.nodeSize=function(e){return arguments.length?(r=null!=(i=e),t):r?i:null},Qr(t,e)},na.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var s,a,u,c=l(n),h=[],p=o.slice(),d=1/0,g="slice"===f?c.dx:"dice"===f?c.dy:"slice-dice"===f?1&n.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(p,c.dx*c.dy/n.value),h.area=0;(u=p.length)>0;)h.push(s=p[u-1]),h.area+=s.area,"squarify"!==f||(a=i(h,g))<=d?(p.pop(),d=a):(h.area-=h.pop().area,r(h,g,c,!1),g=Math.min(c.dx,c.dy),h.length=h.area=0,d=1/0);h.length&&(r(h,g,c,!0),h.length=h.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,s=l(e),a=i.slice(),u=[];for(t(a,s.dx*s.dy/e.value),u.area=0;o=a.pop();)u.push(o),u.area+=o.area,null!=o.z&&(r(u,o.z?s.dx:s.dy,s,!a.length),u.length=u.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,s=-1,a=t.length;++s<a;)(n=t[s].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*d/i,i/(e*o*d)):1/0}function r(t,e,n,i){var r,o=-1,s=t.length,a=n.x,c=n.y,h=e?u(t.area/e):0;if(e==n.dx){for((i||h>n.dy)&&(h=n.dy);++o<s;)r=t[o],r.x=a,r.y=c,r.dy=h,a+=r.dx=Math.min(n.x+n.dx-a,h?u(r.area/h):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=h,n.dy-=h}else{for((i||h>n.dx)&&(h=n.dx);++o<s;)r=t[o],r.x=a,r.y=c,r.dx=h,c+=r.dy=Math.min(n.y+n.dy-c,h?u(r.area/h):0);r.z=!1,r.dy+=n.y+n.dy-c,n.x+=h,n.dx-=h}}function o(i){var r=s||a(i),o=r[0];return o.x=0,o.y=0,o.dx=c[0],o.dy=c[1],s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),p&&(s=r),r}var s,a=na.layout.hierarchy(),u=Math.round,c=[1,1],h=null,l=Lo,p=!1,f="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(c=t,o):c},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Lo(e):Fo(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Fo(e,t)}if(!arguments.length)return h;var i;return l=null==(h=t)?Lo:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(u=t?Math.round:Number,o):u!=Number},o.sticky=function(t){return arguments.length?(p=t,s=null,o):p},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(f=t+"",o):f},Qr(o,a)},na.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=na.random.normal.apply(na,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=na.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},na.scale={};var Mc={floor:Te,ceil:Te};na.scale.linear=function(){return Go([0,1],[0,1],yr,!1)};var bc={s:1,g:1,p:1,r:1,e:1};na.scale.log=function(){return Qo(na.scale.linear().domain([0,1]),10,!0,[1,10])};var Sc=na.format(".0e"),Oc={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};na.scale.pow=function(){return Ko(na.scale.linear(),1,[0,1])},na.scale.sqrt=function(){return na.scale.pow().exponent(.5)},na.scale.ordinal=function(){return es([],{t:"range",a:[[]]})},na.scale.category10=function(){return na.scale.ordinal().range(Tc)},na.scale.category20=function(){return na.scale.ordinal().range(Ec)},na.scale.category20b=function(){return na.scale.ordinal().range(zc)},na.scale.category20c=function(){return na.scale.ordinal().range(Cc)};var Tc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ye),Ec=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ye),zc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ye),Cc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ye);na.scale.quantile=function(){return ns([],[])},na.scale.quantize=function(){return is(0,1,[0,1])},na.scale.threshold=function(){return rs([.5],[0,1])},na.scale.identity=function(){return os([0,1])},na.svg={},na.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),c=Math.max(0,+i.apply(this,arguments)),h=s.apply(this,arguments)-Ra,l=a.apply(this,arguments)-Ra,p=Math.abs(l-h),f=h>l?0:1;if(t>c&&(d=c,c=t,t=d),p>=Ha)return e(c,f)+(t?e(t,1-f):"")+"Z";var d,g,m,v,y,_,x,w,M,b,S,O,T=0,E=0,z=[];if((v=(+u.apply(this,arguments)||0)/2)&&(m=o===kc?Math.sqrt(t*t+c*c):+o.apply(this,arguments),f||(E*=-1),c&&(E=te(m/c*Math.sin(v))),t&&(T=te(m/t*Math.sin(v)))),c){y=c*Math.cos(h+E),_=c*Math.sin(h+E),x=c*Math.cos(l-E),w=c*Math.sin(l-E);var C=Math.abs(l-h-2*E)<=La?0:1;if(E&&ps(y,_,x,w)===f^C){var k=(h+l)/2;y=c*Math.cos(k),_=c*Math.sin(k),x=w=null}}else y=_=0;if(t){M=t*Math.cos(l-T),b=t*Math.sin(l-T),S=t*Math.cos(h+T),O=t*Math.sin(h+T);var P=Math.abs(h-l+2*T)<=La?0:1;if(T&&ps(M,b,S,O)===1-f^P){var N=(h+l)/2;M=t*Math.cos(N),b=t*Math.sin(N),S=O=null}}else M=b=0;if((d=Math.min(Math.abs(c-t)/2,+r.apply(this,arguments)))>.001){g=c>t^f?0:1;var I=null==S?[M,b]:null==x?[y,_]:Ii([y,_],[S,O],[x,w],[M,b]),A=y-I[0],D=_-I[1],L=x-I[0],F=w-I[1],H=1/Math.sin(Math.acos((A*L+D*F)/(Math.sqrt(A*A+D*D)*Math.sqrt(L*L+F*F)))/2),R=Math.sqrt(I[0]*I[0]+I[1]*I[1]);if(null!=x){var q=Math.min(d,(c-R)/(H+1)),V=fs(null==S?[M,b]:[S,O],[y,_],c,q,f),U=fs([x,w],[M,b],c,q,f);d===q?z.push("M",V[0],"A",q,",",q," 0 0,",g," ",V[1],"A",c,",",c," 0 ",1-f^ps(V[1][0],V[1][1],U[1][0],U[1][1]),",",f," ",U[1],"A",q,",",q," 0 0,",g," ",U[0]):z.push("M",V[0],"A",q,",",q," 0 1,",g," ",U[0])}else z.push("M",y,",",_);if(null!=S){var j=Math.min(d,(t-R)/(H-1)),G=fs([y,_],[S,O],t,-j,f),Y=fs([M,b],null==x?[y,_]:[x,w],t,-j,f);d===j?z.push("L",Y[0],"A",j,",",j," 0 0,",g," ",Y[1],"A",t,",",t," 0 ",f^ps(Y[1][0],Y[1][1],G[1][0],G[1][1]),",",1-f," ",G[1],"A",j,",",j," 0 0,",g," ",G[0]):z.push("L",Y[0],"A",j,",",j," 0 0,",g," ",G[0])}else z.push("L",M,",",b)}else z.push("M",y,",",_),null!=x&&z.push("A",c,",",c," 0 ",C,",",f," ",x,",",w),z.push("L",M,",",b),null!=S&&z.push("A",t,",",t," 0 ",P,",",1-f," ",S,",",O);return z.push("Z"),z.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=as,i=us,r=ss,o=kc,s=cs,a=hs,u=ls;return t.innerRadius=function(e){return arguments.length?(n=Oe(e),t):n},t.outerRadius=function(e){return arguments.length?(i=Oe(e),t):i},t.cornerRadius=function(e){return arguments.length?(r=Oe(e),t):r},t.padRadius=function(e){return arguments.length?(o=e==kc?kc:Oe(e),t):o},t.startAngle=function(e){return arguments.length?(s=Oe(e),t):s},t.endAngle=function(e){return arguments.length?(a=Oe(e),t):a},t.padAngle=function(e){return arguments.length?(u=Oe(e),t):u},t.centroid=function(){var t=(+n.apply(this,arguments)+ +i.apply(this,arguments))/2,e=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-Ra;return[Math.cos(e)*t,Math.sin(e)*t]},t};var kc="auto";na.svg.line=function(){return ds(Te)};var Pc=na.map({linear:gs,"linear-closed":ms,step:vs,"step-before":ys,"step-after":_s,basis:Os,"basis-open":Ts,"basis-closed":Es,bundle:zs,cardinal:Ms,"cardinal-open":xs,"cardinal-closed":ws,monotone:As});Pc.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Nc=[0,2/3,1/3,0],Ic=[0,1/3,2/3,0],Ac=[0,1/6,2/3,1/6];na.svg.line.radial=function(){var t=ds(Ds);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ys.reverse=_s,_s.reverse=ys,na.svg.area=function(){return Ls(Te)},na.svg.area.radial=function(){var t=Ls(Ds);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},na.svg.chord=function(){function t(t,a){var u=e(this,o,t,a),c=e(this,s,t,a);return"M"+u.p0+i(u.r,u.p1,u.a1-u.a0)+(n(u,c)?r(u.r,u.p1,u.r,u.p0):r(u.r,u.p1,c.r,c.p0)+i(c.r,c.p1,c.a1-c.a0)+r(c.r,c.p1,u.r,u.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=a.call(t,r,i),s=u.call(t,r,i)-Ra,h=c.call(t,r,i)-Ra;return{r:o,a0:s,a1:h,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(h),o*Math.sin(h)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>La)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=yi,s=_i,a=Fs,u=cs,c=hs;return t.radius=function(e){return arguments.length?(a=Oe(e),t):a},t.source=function(e){return arguments.length?(o=Oe(e),t):o},t.target=function(e){return arguments.length?(s=Oe(e),t):s},t.startAngle=function(e){return arguments.length?(u=Oe(e),t):u},t.endAngle=function(e){return arguments.length?(c=Oe(e),t):c},t},na.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),s=n.call(this,t,r),a=(o.y+s.y)/2,u=[o,{x:o.x,y:a},{x:s.x,y:a},s];return u=u.map(i),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=yi,n=_i,i=Hs;return t.source=function(n){return arguments.length?(e=Oe(n),t):e},t.target=function(e){return arguments.length?(n=Oe(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},na.svg.diagonal.radial=function(){var t=na.svg.diagonal(),e=Hs,n=t.projection;return t.projection=function(t){return arguments.length?n(Rs(e=t)):e},t},na.svg.symbol=function(){function t(t,i){return(Dc.get(e.call(this,t,i))||Us)(n.call(this,t,i))}var e=Vs,n=qs;return t.type=function(n){return arguments.length?(e=Oe(n),t):e},t.size=function(e){return arguments.length?(n=Oe(e),t):n},t};var Dc=na.map({circle:Us,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Fc)),n=e*Fc;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"
},"triangle-down":function(t){var e=Math.sqrt(t/Lc),n=e*Lc/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Lc),n=e*Lc/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});na.svg.symbolTypes=Dc.keys();var Lc=Math.sqrt(3),Fc=Math.tan(30*qa);Ta.transition=function(t){for(var e,n,i=Hc||++Uc,r=Bs(t),o=[],s=Rc||{time:Date.now(),ease:Or,delay:0,duration:250},a=-1,u=this.length;++a<u;){o.push(e=[]);for(var c=this[a],h=-1,l=c.length;++h<l;)(n=c[h])&&Zs(n,h,r,i,s),e.push(n)}return Gs(o,r,i)},Ta.interrupt=function(t){return this.each(null==t?qc:js(Bs(t)))};var Hc,Rc,qc=js(Bs()),Vc=[],Uc=0;Vc.call=Ta.call,Vc.empty=Ta.empty,Vc.node=Ta.node,Vc.size=Ta.size,na.transition=function(t,e){return t&&t.transition?Hc?t.transition(e):t:Ca.transition(t)},na.transition.prototype=Vc,Vc.select=function(t){var e,n,i,r=this.id,o=this.namespace,s=[];t=O(t);for(var a=-1,u=this.length;++a<u;){s.push(e=[]);for(var c=this[a],h=-1,l=c.length;++h<l;)(i=c[h])&&(n=t.call(i,i.__data__,h,a))?("__data__"in i&&(n.__data__=i.__data__),Zs(n,h,o,r,i[o][r]),e.push(n)):e.push(null)}return Gs(s,o,r)},Vc.selectAll=function(t){var e,n,i,r,o,s=this.id,a=this.namespace,u=[];t=T(t);for(var c=-1,h=this.length;++c<h;)for(var l=this[c],p=-1,f=l.length;++p<f;)if(i=l[p]){o=i[a][s],n=t.call(i,i.__data__,p,c),u.push(e=[]);for(var d=-1,g=n.length;++d<g;)(r=n[d])&&Zs(r,d,a,s,o),e.push(r)}return Gs(u,a,s)},Vc.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=H(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]);for(var n=this[o],a=0,u=n.length;u>a;a++)(i=n[a])&&t.call(i,i.__data__,a,o)&&e.push(i)}return Gs(r,this.namespace,this.id)},Vc.tween=function(t,e){var n=this.id,i=this.namespace;return arguments.length<2?this.node()[i][n].tween.get(t):q(this,null==e?function(e){e[i][n].tween.remove(t)}:function(r){r[i][n].tween.set(t,e)})},Vc.attr=function(t,e){function n(){this.removeAttribute(a)}function i(){this.removeAttributeNS(a.space,a.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var s="transform"==t?Vr:yr,a=na.ns.qualify(t);return Ys(this,"attr."+t,e,a.local?o:r)},Vc.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=na.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},Vc.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+="",function(){var i,r=aa.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=yr(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Ys(this,"style."+t,e,r)},Vc.styleTween=function(t,e,n){function i(i,r){var o=e.call(this,i,r,aa.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,i)},Vc.text=function(t){return Ys(this,"text",t,Xs)},Vc.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Vc.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=na.ease.apply(na,arguments)),q(this,function(i){i[n][e].ease=t}))},Vc.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:q(this,"function"==typeof t?function(i,r,o){i[n][e].delay=+t.call(i,i.__data__,r,o)}:(t=+t,function(i){i[n][e].delay=t}))},Vc.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:q(this,"function"==typeof t?function(i,r,o){i[n][e].duration=Math.max(1,t.call(i,i.__data__,r,o))}:(t=Math.max(1,t),function(i){i[n][e].duration=t}))},Vc.each=function(t,e){var n=this.id,i=this.namespace;if(arguments.length<2){var r=Rc,o=Hc;try{Hc=n,q(this,function(e,r,o){Rc=e[i][n],t.call(e,e.__data__,r,o)})}finally{Rc=r,Hc=o}}else q(this,function(r){var o=r[i][n];(o.event||(o.event=na.dispatch("start","end","interrupt"))).on(t,e)});return this},Vc.transition=function(){for(var t,e,n,i,r=this.id,o=++Uc,s=this.namespace,a=[],u=0,c=this.length;c>u;u++){a.push(t=[]);for(var e=this[u],h=0,l=e.length;l>h;h++)(n=e[h])&&(i=n[s][r],Zs(n,h,s,o,{time:i.time,ease:i.ease,delay:i.delay+i.duration,duration:i.duration})),t.push(n)}return Gs(a,s,o)},na.svg.axis=function(){function t(t){t.each(function(){var t,c=na.select(this),h=this.__chart__||n,l=this.__chart__=n.copy(),p=null==u?l.ticks?l.ticks.apply(l,a):l.domain():u,f=null==e?l.tickFormat?l.tickFormat.apply(l,a):Te:e,d=c.selectAll(".tick").data(p,l),g=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Aa),m=na.transition(d.exit()).style("opacity",Aa).remove(),v=na.transition(d.order()).style("opacity",1),y=Math.max(r,0)+s,_=Ro(l),x=c.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),na.transition(x));g.append("line"),g.append("text");var M,b,S,O,T=g.select("line"),E=v.select("line"),z=d.select("text").text(f),C=g.select("text"),k=v.select("text"),P="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(t=Ws,M="x",S="y",b="x2",O="y2",z.attr("dy",0>P?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+P*o+"V0H"+_[1]+"V"+P*o)):(t=Js,M="y",S="x",b="y2",O="x2",z.attr("dy",".32em").style("text-anchor",0>P?"end":"start"),w.attr("d","M"+P*o+","+_[0]+"H0V"+_[1]+"H"+P*o)),T.attr(O,P*r),C.attr(S,P*y),E.attr(b,0).attr(O,P*r),k.attr(M,0).attr(S,P*y),l.rangeBand){var N=l,I=N.rangeBand()/2;h=l=function(t){return N(t)+I}}else h.rangeBand?h=l:m.call(t,l,h);g.call(t,h,l),v.call(t,l,l)})}var e,n=na.scale.linear(),i=jc,r=6,o=6,s=3,a=[10],u=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in Gc?e+"":jc,t):i},t.ticks=function(){return arguments.length?(a=arguments,t):a},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(r=+e,o=+arguments[n-1],t):r},t.innerTickSize=function(e){return arguments.length?(r=+e,t):r},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(){return arguments.length&&t},t};var jc="bottom",Gc={top:1,right:1,bottom:1,left:1};na.svg.brush=function(){function t(o){o.each(function(){var o=na.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",r).on("touchstart.brush",r),s=o.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=o.selectAll(".resize").data(d,Te);a.exit().remove(),a.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Yc[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",t.empty()?"none":null);var h,l=na.transition(o),p=na.transition(s);u&&(h=Ro(u),p.attr("x",h[0]).attr("width",h[1]-h[0]),n(l)),c&&(h=Ro(c),p.attr("y",h[0]).attr("height",h[1]-h[0]),i(l)),e(l)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",h[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function i(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function r(){function r(){32==na.event.keyCode&&(z||(y=null,k[0]-=h[1],k[1]-=l[1],z=2),w())}function d(){32==na.event.keyCode&&2==z&&(k[0]+=h[1],k[1]+=l[1],z=0,w())}function g(){var t=na.mouse(x),r=!1;_&&(t[0]+=_[0],t[1]+=_[1]),z||(na.event.altKey?(y||(y=[(h[0]+h[1])/2,(l[0]+l[1])/2]),k[0]=h[+(t[0]<y[0])],k[1]=l[+(t[1]<y[1])]):y=null),T&&m(t,u,0)&&(n(S),r=!0),E&&m(t,c,1)&&(i(S),r=!0),r&&(e(S),b({type:"brush",mode:z?"move":"resize"}))}function m(t,e,n){var i,r,a=Ro(e),u=a[0],c=a[1],d=k[n],g=n?l:h,m=g[1]-g[0];return z&&(u-=d,c-=m+d),i=(n?f:p)?Math.max(u,Math.min(c,t[n])):t[n],z?r=(i+=d)+m:(y&&(d=Math.max(u,Math.min(c,2*y[n]-i))),i>d?(r=i,i=d):r=d),g[0]!=i||g[1]!=r?(n?s=null:o=null,g[0]=i,g[1]=r,!0):void 0}function v(){g(),S.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),na.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),b({type:"brushend"})}var y,_,x=this,M=na.select(na.event.target),b=a.of(x,arguments),S=na.select(x),O=M.datum(),T=!/^(n|s)$/.test(O)&&u,E=!/^(e|w)$/.test(O)&&c,z=M.classed("extent"),C=X(),k=na.mouse(x),P=na.select(aa).on("keydown.brush",r).on("keyup.brush",d);if(na.event.changedTouches?P.on("touchmove.brush",g).on("touchend.brush",v):P.on("mousemove.brush",g).on("mouseup.brush",v),S.interrupt().selectAll("*").interrupt(),z)k[0]=h[0]-k[0],k[1]=l[0]-k[1];else if(O){var N=+/w$/.test(O),I=+/^n/.test(O);_=[h[1-N]-k[0],l[1-I]-k[1]],k[0]=h[N],k[1]=l[I]}else na.event.altKey&&(y=k.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),na.select("body").style("cursor",M.style("cursor")),b({type:"brushstart"}),g()}var o,s,a=b(t,"brushstart","brush","brushend"),u=null,c=null,h=[0,0],l=[0,0],p=!0,f=!0,d=Xc[0];return t.event=function(t){t.each(function(){var t=a.of(this,arguments),e={x:h,y:l,i:o,j:s},n=this.__chart__||e;this.__chart__=e,Hc?na.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,h=n.x,l=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=_r(h,e.x),i=_r(l,e.y);return o=s=null,function(r){h=e.x=n(r),l=e.y=i(r),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,d=Xc[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,d=Xc[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(p=!!e[0],f=!!e[1]):u?p=!!e:c&&(f=!!e),t):u&&c?[p,f]:u?p:c?f:null},t.extent=function(e){var n,i,r,a,p;return arguments.length?(u&&(n=e[0],i=e[1],c&&(n=n[0],i=i[0]),o=[n,i],u.invert&&(n=u(n),i=u(i)),n>i&&(p=n,n=i,i=p),(n!=h[0]||i!=h[1])&&(h=[n,i])),c&&(r=e[0],a=e[1],u&&(r=r[1],a=a[1]),s=[r,a],c.invert&&(r=c(r),a=c(a)),r>a&&(p=r,r=a,a=p),(r!=l[0]||a!=l[1])&&(l=[r,a])),t):(u&&(o?(n=o[0],i=o[1]):(n=h[0],i=h[1],u.invert&&(n=u.invert(n),i=u.invert(i)),n>i&&(p=n,n=i,i=p))),c&&(s?(r=s[0],a=s[1]):(r=l[0],a=l[1],c.invert&&(r=c.invert(r),a=c.invert(a)),r>a&&(p=r,r=a,a=p))),u&&c?[[n,r],[i,a]]:u?[n,i]:c&&[r,a])},t.clear=function(){return t.empty()||(h=[0,0],l=[0,0],o=s=null),t},t.empty=function(){return!!u&&h[0]==h[1]||!!c&&l[0]==l[1]},na.rebind(t,a,"on")};var Yc={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bc=pu.format=yu.timeFormat,Zc=Bc.utc,Wc=Zc("%Y-%m-%dT%H:%M:%S.%LZ");Bc.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?$s:Wc,$s.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},$s.toString=Wc.toString,pu.second=Re(function(t){return new fu(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),pu.seconds=pu.second.range,pu.seconds.utc=pu.second.utc.range,pu.minute=Re(function(t){return new fu(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),pu.minutes=pu.minute.range,pu.minutes.utc=pu.minute.utc.range,pu.hour=Re(function(t){var e=t.getTimezoneOffset()/60;return new fu(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),pu.hours=pu.hour.range,pu.hours.utc=pu.hour.utc.range,pu.month=Re(function(t){return t=pu.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),pu.months=pu.month.range,pu.months.utc=pu.month.utc.range;var Jc=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$c=[[pu.second,1],[pu.second,5],[pu.second,15],[pu.second,30],[pu.minute,1],[pu.minute,5],[pu.minute,15],[pu.minute,30],[pu.hour,1],[pu.hour,3],[pu.hour,6],[pu.hour,12],[pu.day,1],[pu.day,2],[pu.week,1],[pu.month,1],[pu.month,3],[pu.year,1]],Qc=Bc.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Cn]]),Kc={range:function(t,e,n){return na.range(Math.ceil(t/n)*n,+e,n).map(Ks)},floor:Te,ceil:Te};$c.year=pu.year,pu.scale=function(){return Qs(na.scale.linear(),$c,Qc)};var th=$c.map(function(t){return[t[0].utc,t[1]]}),eh=Zc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Cn]]);th.year=pu.year.utc,pu.scale.utc=function(){return Qs(na.scale.linear(),th,eh)},na.text=Ee(function(t){return t.responseText}),na.json=function(t,e){return ze(t,"application/json",ta,e)},na.html=function(t,e){return ze(t,"text/html",ea,e)},na.xml=Ee(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define("d3/d3",na):"object"==typeof module&&module.exports&&(module.exports=na),this.d3=na}(),define("famous/surfaces/ContainerSurface",["require","exports","module","../core/Surface","../core/Context"],function(t,e,n){function i(t){r.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var r=t("../core/Surface"),o=t("../core/Context");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.prototype.elementType="div",i.prototype.elementClass="famous-surface",i.prototype.add=function(){return this.context.add.apply(this.context,arguments)},i.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),r.prototype.render.apply(this,arguments)},i.prototype.deploy=function(){return this._shouldRecalculateSize=!0,r.prototype.deploy.apply(this,arguments)},i.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,e=r.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),e},n.exports=i}),define("famous/physics/PhysicsEngine",["require","exports","module","../core/EventHandler"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=M(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function r(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,e,n){return void 0===e&&(e=this.getParticlesAndBodies()),e instanceof Array||(e=[e]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:e,source:n},r.call(this,t).push(this._currAgentId),this._currAgentId++}function s(t){return this._agentData[t]}function a(t){var e=s.call(this,this._forces[t]);e.agent.applyForce(e.targets,e.source)}function u(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function c(t,e){var n=this._agentData[this._constraints[t]];return n.agent.applyConstraint(n.targets,n.source,e)}function h(t){for(var e=0;e<this.options.constraintSteps;){for(var n=this._constraints.length-1;n>-1;n--)c.call(this,n,t);e++}}function l(t,e){t.integrateVelocity(e),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function p(t,e){t.integrateAngularMomentum(e),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function f(t,e){t.integrateOrientation(e)}function d(t,e){t.integratePosition(e),t.emit(b.update,t)}function g(t){u.call(this,t),this.forEach(l,t),this.forEachBody(p,t),h.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function m(){var t=0,e=0;return this.forEach(function(n){e=n.getEnergy(),t+=e}),t}function v(){var t=0;for(var e in this._agentData)t+=this.getAgentEnergy(e);return t}var y=t("../core/EventHandler"),_=17,x=1e3/120,w=17,M=Date.now,b={start:"start",update:"update",end:"end"};i.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},i.prototype.setOptions=function(t){for(var e in t)this.options[e]&&(this.options[e]=t[e])},i.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},i.prototype.removeBody=function(t){var e=t.isBody?this._bodies:this._particles,n=e.indexOf(t);if(n>-1){for(var i in this._agentData)this._agentData.hasOwnProperty(i)&&this.detachFrom(this._agentData[i].id,t);e.splice(n,1)}0===this.getBodies().length&&(this._hasBodies=!1)},i.prototype.attach=function(t,e,n){if(this.wake(),t instanceof Array){for(var i=[],r=0;r<t.length;r++)i[r]=o.call(this,t[r],e,n);return i}return o.call(this,t,e,n)},i.prototype.attachTo=function(t,e){s.call(this,t).targets.push(e)},i.prototype.detach=function(t){var e=this.getAgent(t),n=r.call(this,e),i=n.indexOf(t);n.splice(i,1),delete this._agentData[t]},i.prototype.detachFrom=function(t,e){var n=s.call(this,t);if(n.source===e)this.detach(t);else{var i=n.targets,r=i.indexOf(e);r>-1&&i.splice(r,1)}},i.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},i.prototype.getAgent=function(t){return s.call(this,t).agent},i.prototype.getParticles=function(){return this._particles},i.prototype.getBodies=function(){return this._bodies},i.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},i.prototype.forEachParticle=function(t,e){for(var n=this.getParticles(),i=0,r=n.length;r>i;i++)t.call(this,n[i],e)},i.prototype.forEachBody=function(t,e){if(this._hasBodies)for(var n=this.getBodies(),i=0,r=n.length;r>i;i++)t.call(this,n[i],e)},i.prototype.forEach=function(t,e){this.forEachParticle(t,e),this.forEachBody(t,e)},i.prototype.getAgentEnergy=function(t){var e=s.call(this,t);return e.agent.getEnergy(e.targets,e.source)},i.prototype.getEnergy=function(){return m.call(this)+v.call(this)},i.prototype.step=function(){if(!this.isSleeping()){var t=M(),e=t-this._prevTime;this._prevTime=t,x>e||(e>w&&(e=w),g.call(this,_),this.emit(b.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},i.prototype.isSleeping=function(){return this._isSleeping},i.prototype.isActive=function(){return!this._isSleeping},i.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(b.end,this),this._isSleeping=!0)},i.prototype.wake=function(){this._isSleeping&&(this._prevTime=M(),this.emit(b.start,this),this._isSleeping=!1)},i.prototype.emit=function(t,e){null!==this._eventHandler&&this._eventHandler.emit(t,e)},i.prototype.on=function(t,e){null===this._eventHandler&&(this._eventHandler=new y),this._eventHandler.on(t,e)},n.exports=i}),define("famous/math/Vector",["require","exports","module"],function(t,e,n){function i(t,e,n){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=e||0,this.z=n||0),this}function r(t,e,n){return this.x=t,this.y=e,this.z=n,this}function o(t){return r.call(this,t[0],t[1],t[2]||0)}function s(t){return r.call(this,t.x,t.y,t.z)}function a(t){return r.call(this,t,0,0)}var u=new i(0,0,0);i.prototype.add=function(t){return r.call(u,this.x+t.x,this.y+t.y,this.z+t.z)},i.prototype.sub=function(t){return r.call(u,this.x-t.x,this.y-t.y,this.z-t.z)},i.prototype.mult=function(t){return r.call(u,t*this.x,t*this.y,t*this.z)},i.prototype.div=function(t){return this.mult(1/t)},i.prototype.cross=function(t){var e=this.x,n=this.y,i=this.z,o=t.x,s=t.y,a=t.z;return r.call(u,i*s-n*a,e*a-i*o,n*o-e*s)},i.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},i.prototype.rotateX=function(t){var e=this.x,n=this.y,i=this.z,o=Math.cos(t),s=Math.sin(t);return r.call(u,e,n*o-i*s,n*s+i*o)},i.prototype.rotateY=function(t){var e=this.x,n=this.y,i=this.z,o=Math.cos(t),s=Math.sin(t);return r.call(u,i*s+e*o,n,i*o-e*s)},i.prototype.rotateZ=function(t){var e=this.x,n=this.y,i=this.z,o=Math.cos(t),s=Math.sin(t);return r.call(u,e*o-n*s,e*s+n*o,i)},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.prototype.normSquared=function(){return this.dot(this)},i.prototype.norm=function(){return Math.sqrt(this.normSquared())},i.prototype.normalize=function(t){0===arguments.length&&(t=1);var e=this.norm();return e>1e-7?s.call(u,this.mult(t/e)):r.call(u,t,0,0)},i.prototype.clone=function(){return new i(this)},i.prototype.isZero=function(){return!(this.x||this.y||this.z)},i.prototype.set=function(t){return t instanceof Array?o.call(this,t):"number"==typeof t?a.call(this,t):s.call(this,t)},i.prototype.setXYZ=function(){return r.apply(this,arguments)},i.prototype.set1D=function(t){return a.call(this,t)},i.prototype.put=function(t){this===u?s.call(t,u):s.call(t,this)},i.prototype.clear=function(){return r.call(this,0,0,0)},i.prototype.cap=function c(c){if(1/0===c)return s.call(u,this);var t=this.norm();return t>c?s.call(u,this.mult(c/t)):s.call(u,this)},i.prototype.project=function(t){return t.mult(this.dot(t))},i.prototype.reflectAcross=function(t){return t.normalize().put(t),s(u,this.sub(this.project(t).mult(2)))},i.prototype.get=function(){return[this.x,this.y,this.z]},i.prototype.get1D=function(){return this.x},n.exports=i}),define("famous/physics/integrators/SymplecticEuler",["require","exports","module"],function(t,e,n){var i={};i.integrateVelocity=function(t,e){var n=t.velocity,i=t.inverseMass,r=t.force;r.isZero()||(n.add(r.mult(e*i)).put(n),r.clear())},i.integratePosition=function(t,e){var n=t.position,i=t.velocity;n.add(i.mult(e)).put(n)},i.integrateAngularMomentum=function(t,e){var n=t.angularMomentum,i=t.torque;i.isZero()||(n.add(i.mult(e)).put(n),i.clear())},i.integrateOrientation=function(t,e){var n=t.orientation,i=t.angularVelocity;i.isZero()||n.add(n.multiply(i).scalarMultiply(.5*e)).put(n)},n.exports=i}),define("famous/physics/bodies/Particle",["require","exports","module","../../math/Vector","../../core/Transform","../../core/EventHandler","../integrators/SymplecticEuler"],function(t,e,n){function i(t){t=t||{};var e=i.DEFAULT_OPTIONS;this.position=new o,this.velocity=new o,this.force=new o,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:e.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||e.position),this.setVelocity(t.velocity||e.velocity),this.force.set(t.force||[0,0,0]),this.transform=s.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function r(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var o=t("../../math/Vector"),s=t("../../core/Transform"),a=t("../../core/EventHandler"),u=t("../integrators/SymplecticEuler");i.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var c={start:"start",update:"update",end:"end"},h=Date.now;i.prototype.isBody=!1,i.prototype.isActive=function(){return!this._isSleeping},i.prototype.sleep=function(){this._isSleeping||(this.emit(c.end,this),this._isSleeping=!0)},i.prototype.wake=function(){this._isSleeping&&(this.emit(c.start,this),this._isSleeping=!1,this._prevTime=h(),this._engine&&this._engine.wake())},i.prototype.setPosition=function(t){this.position.set(t)},i.prototype.setPosition1D=function(t){this.position.x=t},i.prototype.getPosition=function(){return this._engine.step(),this.position.get()},i.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},i.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},i.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},i.prototype.getVelocity=function(){return this.velocity.get()},i.prototype.setForce=function(t){this.force.set(t),this.wake()},i.prototype.getVelocity1D=function(){return this.velocity.x},i.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},i.prototype.getMass=function(){return this.mass},i.prototype.reset=function(t,e){this.setPosition(t||[0,0,0]),this.setVelocity(e||[0,0,0])},i.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},i.prototype.applyImpulse=function(t){if(!t.isZero()){var e=this.velocity;e.add(t.mult(this.inverseMass)).put(e)}},i.prototype.integrateVelocity=function(t){u.integrateVelocity(this,t)},i.prototype.integratePosition=function(t){u.integratePosition(this,t)},i.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},i.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},i.prototype.getTransform=function(){this._engine.step();var t=this.position,e=this.transform;return e[12]=t.x,e[13]=t.y,e[14]=t.z,e},i.prototype.modify=function(t){var e=this._spec.target;return e.transform=this.getTransform(),e.target=t,this._spec},i.prototype.emit=function(t,e){this._eventOutput&&this._eventOutput.emit(t,e)},i.prototype.on=function(){return r.call(this),this.on.apply(this,arguments)},i.prototype.removeListener=function(){return r.call(this),this.removeListener.apply(this,arguments)},i.prototype.pipe=function(){return r.call(this),this.pipe.apply(this,arguments)},i.prototype.unpipe=function(){return r.call(this),this.unpipe.apply(this,arguments)},n.exports=i}),define("famous/physics/forces/Force",["require","exports","module","../../math/Vector","../../core/EventHandler"],function(t,e,n){function i(t){this.force=new r(t),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}var r=t("../../math/Vector"),o=t("../../core/EventHandler");i.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},i.prototype.applyForce=function(t){for(var e=t.length;e--;)t[e].applyForce(this.force)},i.prototype.getEnergy=function(){return 0},n.exports=i}),define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,e,n){function i(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),r.call(this)}var r=t("./Force");i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},i.DEFAULT_OPTIONS={strength:.01,forceFunction:i.FORCE_FUNCTIONS.LINEAR},i.prototype.applyForce=function(t){var e,n,i=this.options.strength,r=this.options.forceFunction,o=this.force;for(e=0;e<t.length;e++)n=t[e],r(n.velocity).mult(-i).put(o),n.applyForce(o)},i.prototype.setOptions=function(t){for(var e in t)this.options[e]=t[e]},n.exports=i}),define("famous/physics/forces/Spring",["require","exports","module","./Force","../../math/Vector"],function(t,e,n){function i(t){a.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new u(0,0,0),s.call(this)}function r(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function o(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function s(){r.call(this),o.call(this)}var a=t("./Force"),u=t("../../math/Vector");i.prototype=Object.create(a.prototype),i.prototype.constructor=i;var c=Math.PI,h=150;i.FORCE_FUNCTIONS={FENE:function(t,e){var n=.99*e,i=Math.max(Math.min(t,n),-n);return i/(1-i*i/(e*e))},HOOK:function(t){return t}},i.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:i.FORCE_FUNCTIONS.HOOK},i.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof u&&(this.options.anchor=t.anchor.position),t.anchor instanceof u&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new u(t.anchor))),void 0!==t.period&&(t.period<h&&(t.period=h,console.warn("The period of a SpringTransition is capped at "+h+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),s.call(this),a.prototype.setOptions.call(this,t)},i.prototype.applyForce=function(t,e){var n,i,r,o,s,a,u=this.force,c=this.disp,h=this.options,l=h.stiffness,p=h.damping,f=h.length,d=h.maxLength,g=h.anchor||e.position,m=h.forceFunction;for(n=0;n<t.length;n++){if(i=t[n],r=i.position,o=i.velocity,g.sub(r).put(c),s=c.norm()-f,0===s)return;a=i.mass,l*=a,p*=a,c.normalize(l*m(s,d)).put(u),p&&(e?u.add(o.sub(e.velocity).mult(-p)).put(u):u.add(o.mult(-p)).put(u)),i.applyForce(u),e&&e.applyForce(u.mult(-1))}},i.prototype.getEnergy=function(t,e){for(var n=this.options,i=n.length,r=e?e.position:n.anchor,o=n.stiffness,s=0,a=0;a<t.length;a++){var u=t[a],c=r.sub(u.position).norm()-i;s+=.5*o*c*c}return s},n.exports=i}),define("famous/core/ViewSequence",["require","exports","module"],function(t,e,n){function i(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),this._previousNode=null,this._nextNode=null}i.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},i.Backing.prototype.getValue=function(t){var e=t-this.firstIndex;return 0>e||e>=this.array.length?null:this.array[e]},i.Backing.prototype.setValue=function(t,e){this.array[t-this.firstIndex]=e},i.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},i.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var e=[0,0],n=0;t>n;n++){var i=this.array[n].getSize();if(!i)return void 0;void 0!==e[0]&&(void 0===i[0]?e[0]=void 0:e[0]+=i[0]),void 0!==e[1]&&(void 0===i[1]?e[1]=void 0:e[1]+=i[1]),this.cumulativeSizes[n+1]=e.slice()}return this.sizeDirty=!1,e},i.Backing.prototype.reindex=function(t,e,n){if(this.array[0]){for(var i=0,r=this.firstIndex,o=n-e,s=this.firstNode;t-1>r;)s=s.getNext(),r++;
var a=s;for(i=0;e>i;i++)s=s.getNext(),s&&(s._previousNode=a);var u=s?s.getNext():null;for(a._nextNode=null,s=a,i=0;n>i;i++)s=s.getNext();if(r+=n,s!==u&&(s._nextNode=u,u&&(u._previousNode=s)),u)for(s=u,r++;s&&r<this.array.length+this.firstIndex;)s._nextNode?s.index+=o:s.index=r,s=s.getNext(),r++;this.trackSize&&(this.sizeDirty=!0)}},i.prototype.getPrevious=function(){var t=this._.array.length;return t?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+t-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},i.prototype.getNext=function(){var t=this._.array.length;return t?this.index===this._.firstIndex+t-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},i.prototype.indexOf=function(t){return this._.array.indexOf(t)},i.prototype.getIndex=function(){return this.index},i.prototype.toString=function(){return""+this.index},i.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},i.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},i.prototype.splice=function(t,e){var n=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,e].concat(n)),this._.reindex(t,e,n.length)},i.prototype.swap=function(t){var e=t.get(),n=this.get();this._.setValue(this.index,e),this._.setValue(t.index,n);var i=this._previousNode,r=this._nextNode,o=this.index,s=t._previousNode,a=t._nextNode,u=t.index;this.index=u,this._previousNode=s===this?t:s,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=o,t._previousNode=i===t?this:i,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=r===t?this:r,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},i.prototype.get=function(){return this._.getValue(this.index)},i.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},i.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},n.exports=i}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,e,n){function i(t){s.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new r(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var r=t("./Context"),o=t("./Transform"),s=t("./Surface");i.SIZE_ZERO=[0,0],i.prototype=Object.create(s.prototype),i.prototype.elementType="div",i.prototype.elementClass="famous-group",i.prototype.add=function(){return this.context.add.apply(this.context,arguments)},i.prototype.render=function(){return s.prototype.render.call(this)},i.prototype.deploy=function(t){this.context.migrate(t)},i.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},i.prototype.commit=function(t){var e=t.transform,n=t.origin,r=t.opacity,a=t.size,u=s.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(e,[-n[0]*a[0],-n[1]*a[1],0]),opacity:r,origin:n,size:i.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-n[0]*a[0],-n[1]*a[1],0),origin:n,size:a}),u},n.exports=i}),define("famous/views/Scroller",["require","exports","module","../core/Entity","../core/Group","../core/OptionsManager","../core/Transform","../utilities/Utility","../core/ViewSequence","../core/EventHandler"],function(t,e,n){function i(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new c,this.group.add({render:a.bind(this)}),this._entityId=u.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new d,this._eventOutput=new d,d.setInputHandler(this,this._eventInput),d.setOutputHandler(this,this._eventOutput)}function r(t){t||(t=this._contextSize);var e=this.options.direction;return void 0===t[e]?this._contextSize[e]:t[e]}function o(t,e,n){var i=t.getSize?t.getSize():this._contextSize,o=this._outputFunction(e);return n.push({transform:o,target:t.render()}),r.call(this,i)}function s(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?r.call(this,this.getCumulativeSize()):r.call(this,this._contextSize)}function a(){for(var t=null,e=this._position,n=[],i=-this._positionOffset,a=s.call(this),u=this._node;u&&i-e<a+this.options.margin;)i+=o.call(this,u,i,n),u=u.getNext?u.getNext():null;var c=this._node,h=r.call(this,c.getSize());if(a>i){for(;c&&a>h;)c=c.getPrevious(),c&&(h+=r.call(this,c.getSize()));for(c=this._node;c&&a>h;)c=c.getNext(),c&&(h+=r.call(this,c.getSize()))}for(!u&&a-g>i-e?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:i-a})):!this._node.getPrevious()&&-g>e?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),u=this._node&&this._node.getPrevious?this._node.getPrevious():null,i=-this._positionOffset,u&&(t=u.getSize?u.getSize():this._contextSize,i-=r.call(this,t));u&&i-e>-(a+this.options.margin);)o.call(this,u,i,n),u=u.getPrevious?u.getPrevious():null,u&&(t=u.getSize?u.getSize():this._contextSize,i-=r.call(this,t));return n}var u=t("../core/Entity"),c=t("../core/Group"),h=t("../core/OptionsManager"),l=t("../core/Transform"),p=t("../utilities/Utility"),f=t("../core/ViewSequence"),d=t("../core/EventHandler");i.DEFAULT_OPTIONS={direction:p.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var g=0;i.prototype.getCumulativeSize=function(t){return void 0===t&&(t=this._node._.cumulativeSizes.length-1),this._node._.getSize(t)},i.prototype.setOptions=function(t){t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(t)},i.prototype.onEdge=function(){return this._onEdge},i.prototype.outputFrom=function(t,e){t||(t=function(t){return this.options.direction===p.Direction.X?l.translate(t,0):l.translate(0,t)}.bind(this),e||(e=t)),this._outputFunction=t,this._masterOutputFunction=e?e:function(e){return l.inverse(t(-e))}},i.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},i.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},i.prototype.getSize=function(t){return t?this._contextSize:this._size},i.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},i.prototype.commit=function(t){var e=t.transform,n=t.opacity,i=t.origin,r=t.size;this.options.clipSize||r[0]===this._contextSize[0]&&r[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=r[0],this._contextSize[1]=r[1],this.options.direction===p.Direction.X?(this._size[0]=s.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=s.call(this)));var o=this._masterOutputFunction(-this._position);return{transform:l.multiply(e,o),size:r,opacity:n,origin:i,target:this.group.render()}},n.exports=i}),define("famous/inputs/ScrollSync",["require","exports","module","../core/EventHandler","../core/Engine","../core/OptionsManager"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._inProgress=!1,this._loopBound=!1}function r(){if(this._inProgress&&h()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,e=this._payload;e.position=this._position,e.velocity=t,e.slip=!0,this._eventOutput.emit("end",e)}}function o(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,m=this._payload,m.slip=!0,m.position=this._position,m.clientX=t.clientX,m.clientY=t.clientY,m.offsetX=t.offsetX,m.offsetY=t.offsetY,this._eventOutput.emit("start",m),this._loopBound||(a.on("prerender",r.bind(this)),this._loopBound=!0));var e=h(),n=this._prevTime||e,o=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,s=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(o*=this.options.lineHeight,s*=this.options.lineHeight),this.options.rails&&(Math.abs(o)>Math.abs(s)?s=0:o=0);var u,l,p=Math.max(e-n,c),f=o/p,d=s/p,g=this.options.scale;this.options.direction===i.DIRECTION_X?(l=g*o,u=g*f,this._position+=l):this.options.direction===i.DIRECTION_Y?(l=g*s,u=g*d,this._position+=l):(l=[g*o,g*s],u=[g*f,g*d],this._position[0]+=l[0],this._position[1]+=l[1]);var m=this._payload;m.delta=l,m.velocity=u,m.position=this._position,m.slip=!0,this._eventOutput.emit("update",m),this._prevTime=e,this._prevVel=u}var s=t("../core/EventHandler"),a=t("../core/Engine"),u=t("../core/OptionsManager");i.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},i.DIRECTION_X=0,i.DIRECTION_Y=1;var c=8,h=Date.now;i.prototype.getOptions=function(){return this.options},i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.exports=i}),define("famous/inputs/TouchTracker",["require","exports","module","../core/EventHandler"],function(t,e,n){function i(t,e,n){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:e.origin,timestamp:h(),count:e.touches.length,history:n}}function r(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=i(n,t,null);this.eventOutput.emit("trackstart",r),this.selective||this.touchHistory[n.identifier]||this.track(r)}}}function o(t){if(!(t.touches.length>this.touchLimit))for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=this.touchHistory[n.identifier];if(r){var o=i(n,t,r);this.touchHistory[n.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function s(t){if(this.isTouched){for(var e=0;e<t.changedTouches.length;e++){var n=t.changedTouches[e],r=this.touchHistory[n.identifier];if(r){var o=i(n,t,r);this.touchHistory[n.identifier].push(o),this.eventOutput.emit("trackend",o),delete this.touchHistory[n.identifier]}}this.isTouched=!1}}function a(){for(var t in this.touchHistory){var e=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:e[e.length-1].touch,timestamp:Date.now(),count:0,history:e}),delete this.touchHistory[t]}}function u(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new c,this.eventOutput=new c,c.setInputHandler(this,this.eventInput),c.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",r.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",s.bind(this)),this.eventInput.on("touchcancel",s.bind(this)),this.eventInput.on("unpipe",a.bind(this)),this.isTouched=!1}var c=t("../core/EventHandler"),h=Date.now;u.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},n.exports=u}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","../core/EventHandler","../core/OptionsManager","./SyncUtils"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._eventOutput=new c,this._touchTracker=new u({touchLimit:this.options.touchLimit}),c.setOutputHandler(this,this._eventOutput),c.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",r.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",a.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function r(t){var e,n;void 0!==this.options.direction?(this._position=0,e=0,n=0):(this._position=[0,0],e=[0,0],n=[0,0]);var i=this._payload;i.delta=n,i.position=this._position,i.velocity=e,i.clientX=t.x,i.clientY=t.y,i.count=t.count,i.touch=t.identifier,this._eventOutput.emit("start",i)}function o(t){s.call(this,t)}function s(t){var e=t.history,n=e[e.length-1],r=l.getTimeHistoryPosition(e,this.options.timeSampleDuration),o=r.timestamp,s=n.timestamp,a=n.x-r.x,u=n.y-r.y,c=n.x-o,h=n.y-o;this.options.rails&&(Math.abs(a)>Math.abs(u)?u=0:a=0,Math.abs(c)>Math.abs(h)?h=0:c=0);var f,d,g=Math.max(s-o,p),m=c/g,v=h/g,y=this.options.scale;this.options.direction===i.DIRECTION_X?(d=y*a,f=y*m,this._position+=d):this.options.direction===i.DIRECTION_Y?(d=y*u,f=y*v,this._position+=d):(d=[y*a,y*u],f=[y*m,y*v],this._position[0]+=d[0],this._position[1]+=d[1]);var _=this._payload;_.delta=d,_.velocity=f,_.position=this._position,_.clientX=t.x,_.clientY=t.y,_.count=t.count,_.touch=t.identifier,this._eventOutput.emit("update",_)}function a(t){s.call(this,t),this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var u=t("./TouchTracker"),c=t("../core/EventHandler"),h=t("../core/OptionsManager"),l=t("./SyncUtils");i.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1,timeSampleDuration:400},i.DIRECTION_X=0,i.DIRECTION_Y=1;var p=8;i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.prototype.getOptions=function(){return this.options},n.exports=i}),define("famous/views/Scrollview",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Drag","../physics/forces/Spring","../core/EventHandler","../core/OptionsManager","../core/ViewSequence","../views/Scroller","../utilities/Utility","../inputs/GenericSync","../inputs/ScrollSync","../inputs/TouchSync"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new w(this.options),this._scroller=new b(this.options),this.sync=new O(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==S.Direction.Y}),this._physicsEngine=new m,this._particle=new v,this._physicsEngine.addBody(this._particle),this.spring=new _({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new y({forceFunction:y.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new y({forceFunction:y.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=z.NONE,this._onEdge=C.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new x,this._eventOutput=new x,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),x.setInputHandler(this,this._eventInput),x.setOutputHandler(this,this._eventOutput),a.call(this),t&&this.setOptions(t)}function r(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),c.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var e=-t.velocity,n=-t.delta;if(this._onEdge!==C.NONE&&t.slip&&(0>e&&this._onEdge===C.TOP||e>0&&this._onEdge===C.BOTTOM?this._earlyEnd||(s.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.getVelocity())&&r.call(this,t)),!this._earlyEnd){if(this._touchVelocity=e,t.slip){var i=this.options.speedLimit;-i>e?e=-i:e>i&&(e=i),this.setVelocity(e);var o=16*i;n>o?n=o:-o>n&&(n=-o)}this.setPosition(this.getPosition()+n),this._displacement+=n,this._springState===z.NONE&&d.call(this)}}function s(t){if(this._touchCount=t.count||0,!this._touchCount){c.call(this),this._onEdge!==C.NONE&&f.call(this,this._edgeSpringPosition,z.EDGE),u.call(this);var e=-t.velocity,n=this.options.speedLimit;t.slip&&(n*=this.options.edgeGrip),-n>e?e=-n:e>n&&(e=n),this.setVelocity(e),this._touchVelocity=0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",r),this._eventInput.on("update",o),this._eventInput.on("end",s),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(t){this._edgeSpringPosition=t.position,l.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(t){this._springState===z.NONE&&d.call(this),this._displacement=t.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==z.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function u(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function c(){this._springState=z.NONE,this._physicsEngine.detachAll()}function h(t){var e=this.options.direction,n=t.getSize();return n?n[e]:this._scroller.getSize()[e]}function l(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===z.EDGE||f.call(this,this._edgeSpringPosition,z.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(c.call(this),u.call(this))}function p(){if(!this._touchCount&&this._springState!==z.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var e=this.getPosition(),n=Math.abs(t)>this.options.pageSwitchSpeed,i=h.call(this,this._node),r=e>.5*i,o=t>0,s=0>t;this._needsPaginationCheck=!1,r&&!n||n&&o?this.goToNextPage():n&&s?this.goToPreviousPage():f.call(this,0,z.PAGE)}}}function f(t,e){var n;e===z.EDGE?(this._edgeSpringPosition=t,n={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):e===z.PAGE&&(this._pageSpringPosition=t,n={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(n),e&&!this._springState&&(c.call(this),this._springState=e,u.call(this)),this._springState=e}function d(){var t=0,e=this.getPosition();e+=(0>e?-.5:.5)>>0;for(var n=h.call(this,this._node),i=this._node.getNext();t+e>=n&&i;)t-=n,this._scroller.sequenceFrom(i),this._node=i,i=this._node.getNext(),n=h.call(this,this._node);for(var r,o=this._node.getPrevious();0>=t+e&&o;)r=h.call(this,o),this._scroller.sequenceFrom(o),this._node=o,t+=r,o=this._node.getPrevious();t&&g.call(this,t),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*n&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*n&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function g(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._totalShift+=t,this._springState===z.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===z.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var m=t("../physics/PhysicsEngine"),v=t("../physics/bodies/Particle"),y=t("../physics/forces/Drag"),_=t("../physics/forces/Spring"),x=t("../core/EventHandler"),w=t("../core/OptionsManager"),M=t("../core/ViewSequence"),b=t("../views/Scroller"),S=t("../utilities/Utility"),O=t("../inputs/GenericSync"),T=t("../inputs/ScrollSync"),E=t("../inputs/TouchSync");O.register({scroll:T,touch:E});var z={NONE:0,EDGE:1,PAGE:2},C={TOP:-1,NONE:0,BOTTOM:1};i.DEFAULT_OPTIONS={direction:S.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},i.prototype.getCurrentIndex=function(){return this._node.index},i.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===C.TOP)return null;if(this.getPosition()>1&&this._springState===z.NONE)return f.call(this,0,z.PAGE),this._node;var t=this._node.getPrevious();if(t){var e=h.call(this,t);this._scroller.sequenceFrom(t),this._node=t,g.call(this,e),f.call(this,0,z.PAGE)}return t},i.prototype.goToNextPage=function(){if(!this._node||this._onEdge===C.BOTTOM)return null;var t=this._node.getNext();if(t){var e=h.call(this,this._node);this._scroller.sequenceFrom(t),this._node=t,g.call(this,-e),f.call(this,0,z.PAGE)}return t},i.prototype.goToPage=function(t){var e,n=this.getCurrentIndex();if(n>t)for(e=0;n-t>e;e++)this.goToPreviousPage();if(t>n)for(e=0;t-n>e;e++)this.goToNextPage()},i.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},i.prototype.getPosition=function(){return this._particle.getPosition1D()},i.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},i.prototype.getOffset=i.prototype.getPosition,i.prototype.setPosition=function(t){this._particle.setPosition1D(t)},i.prototype.setOffset=i.prototype.setPosition,i.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},i.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},i.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=S.Direction.X:"y"===t.direction&&(t.direction=S.Direction.Y)),t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(t),this._scroller.setOptions(t),void 0!==t.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==t.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==t.edgePeriod||void 0!==t.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(t.rails||void 0!==t.direction||void 0!==t.syncScale||t.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===S.Direction.X?O.DIRECTION_X:O.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},i.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new M({array:t,trackSize:!0})),this._node=t,this._scroller.sequenceFrom(t)},i.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},i.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&p.call(this),this._scroller.render()},n.exports=i}),define("famous/views/ScrollContainer",["require","exports","module","../surfaces/ContainerSurface","../core/EventHandler","./Scrollview","../utilities/Utility","../core/OptionsManager"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this.container=new r(this.options.container),this.scrollview=new s(this.options.scrollview),this.container.add(this.scrollview),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventInput.pipe(this.scrollview),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this.container.pipe(this._eventOutput),this.scrollview.pipe(this._eventOutput)}var r=t("../surfaces/ContainerSurface"),o=t("../core/EventHandler"),s=t("./Scrollview"),a=(t("../utilities/Utility"),t("../core/OptionsManager"));i.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{}},i.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},i.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},i.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},i.prototype.render=function(){return this.container.render()},n.exports=i}),define("famous/modifiers/StateModifier",["require","exports","module","../core/Modifier","../core/Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,n){function i(t){this._transformState=new a(o.identity),this._opacityState=new s(1),this._originState=new s([0,0]),this._alignState=new s([0,0]),this._sizeState=new s([0,0]),this._proportionsState=new s([0,0]),this._modifier=new r({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null,proportions:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,this._hasProportions=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size),t.proportions&&this.setProportions(t.proportions))}var r=t("../core/Modifier"),o=t("../core/Transform"),s=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");i.prototype.setTransform=function(t,e,n){return this._transformState.set(t,e,n),this},i.prototype.setOpacity=function(t,e,n){return this._opacityState.set(t,e,n),this},i.prototype.setOrigin=function(t,e,n){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,e,n),this)},i.prototype.setAlign=function(t,e,n){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,e,n),this)},i.prototype.setSize=function(t,e,n){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,e,n),this)},i.prototype.setProportions=function(t,e,n){return null===t?(this._hasProportions&&(this._modifier.proportionsFrom(null),this._hasProportions=!1),this):(this._hasProportions||(this._hasProportions=!0,this._modifier.proportionsFrom(this._proportionsState)),this._proportionsState.set(t,e,n),this)},i.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt(),this._proportionsState.halt()},i.prototype.getTransform=function(){return this._transformState.get()},i.prototype.getFinalTransform=function(){return this._transformState.getFinal()},i.prototype.getOpacity=function(){return this._opacityState.get()},i.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},i.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},i.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},i.prototype.getProportions=function(){return this._hasProportions?this._proportionsState.get():null},i.prototype.modify=function(t){return this._modifier.modify(t)},n.exports=i}),define("famous/views/GridLayout",["require","exports","module","../core/Entity","../core/RenderNode","../core/Transform","../core/ViewSequence","../core/EventHandler","../core/Modifier","../core/OptionsManager","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this.optionsManager=new p(this.options),t&&this.setOptions(t),this.id=a.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new h,h.setOutputHandler(this,this._eventOutput)}function r(t,e,n){var i=[t[0],t[1]];i[0]-=this.options.gutterSize[0]*(e-1),i[1]-=this.options.gutterSize[1]*(n-1);for(var r,a=Math.round(i[1]/n),u=Math.round(i[0]/e),c=0,h=0,l=0;n>l;l++){r=0;for(var p=0;e>p;p++)void 0===this._modifiers[h]?o.call(this,h,[u,a],[r,c,0],1):s.call(this,h,[u,a],[r,c,0],1),h++,r+=u+this.options.gutterSize[0];c+=a+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=n*e,l=this._activeCount;l<this._modifiers.length;l++)s.call(this,l,[Math.round(u),Math.round(a)],[0,0],0);this._eventOutput.emit("reflow")}function o(t,e,n,i){var r={transform:new d(u.translate.apply(null,n)),opacity:new f(i),size:new f(e)},o=new l({transform:r.transform,opacity:r.opacity,size:r.size});this._states[t]=r,this._modifiers[t]=o}function s(t,e,n,i){var r=this._states[t],o=r.size,s=r.opacity,a=r.transform,u=this.options.transition;a.halt(),s.halt(),o.halt(),a.setTranslate(n,u),o.set(e,u),s.set(i,u)}var a=t("../core/Entity"),u=(t("../core/RenderNode"),t("../core/Transform")),c=t("../core/ViewSequence"),h=t("../core/EventHandler"),l=t("../core/Modifier"),p=t("../core/OptionsManager"),f=t("../transitions/Transitionable"),d=t("../transitions/TransitionableTransform");i.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},i.prototype.render=function(){return this.id},i.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},i.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new c(t)),this.sequence=t},i.prototype.getSize=function(){return this._contextSizeCache},i.prototype.commit=function(t){var e=t.transform,n=t.opacity,i=t.origin,o=t.size,s=this.options.dimensions[0],a=this.options.dimensions[1];(o[0]!==this._contextSizeCache[0]||o[1]!==this._contextSizeCache[1]||s!==this._dimensionsCache[0]||a!==this._dimensionsCache[1])&&r.call(this,o,s,a);for(var c=this.sequence,h=[],l=0;c&&l<this._modifiers.length;){var p=c.get(),f=this._modifiers[l];l>=this._activeCount&&this._states[l].opacity.isActive()&&(this._modifiers.splice(l,1),this._states.splice(l,1)),p&&h.push(f.modify({origin:i,target:p.render()})),c=c.getNext(),l++}return o&&(e=u.moveThen([-o[0]*i[0],-o[1]*i[1],0],e)),{transform:e,opacity:n,size:o,target:h}},n.exports=i}),define("famous/views/FlexibleLayout",["require","exports","module","../core/Entity","../core/Transform","../core/OptionsManager","../core/EventHandler","../transitions/Transitionable"],function(t,e,n){function i(t){this.options=Object.create(i.DEFAULT_OPTIONS),this.optionsManager=new u(this.options),t&&this.setOptions(t),this.id=s.register(this),this._ratios=new h(this.options.ratios),this._nodes=[],this._size=[0,0],this._cachedDirection=null,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new c,c.setOutputHandler(this,this._eventOutput)
}function r(t,e,n){var r,o,s,u,c=0,h=e,l=0;for(this._cachedLengths=[],this._cachedTransforms=[],u=0;u<t.length;u++)o=t[u],s=this._nodes[u],"number"!=typeof o?h-=s.getSize()[n]||0:l+=o;for(u=0;u<t.length;u++)s=this._nodes[u],o=t[u],e="number"==typeof o?h*o/l:s.getSize()[n],r=n===i.DIRECTION_X?a.translate(c,0,0):a.translate(0,c,0),this._cachedTransforms.push(r),this._cachedLengths.push(e),c+=e}function o(t,e){for(var n=0;n<t.length;n++)if("number"!=typeof t[n]&&this._nodes[n].getSize()[e]!==this._cachedLengths[n])return!0;return!1}var s=t("../core/Entity"),a=t("../core/Transform"),u=t("../core/OptionsManager"),c=t("../core/EventHandler"),h=t("../transitions/Transitionable");i.DIRECTION_X=0,i.DIRECTION_Y=1,i.DEFAULT_OPTIONS={direction:i.DIRECTION_X,transition:!1,ratios:[]},i.prototype.render=function(){return this.id},i.prototype.setOptions=function(t){this.optionsManager.setOptions(t)},i.prototype.sequenceFrom=function(t){if(this._nodes=t,0===this._ratios.get().length){for(var e=[],n=0;n<this._nodes.length;n++)e.push(1);this.setRatios(e)}},i.prototype.setRatios=function(t,e,n){void 0===e&&(e=this.options.transition);var i=this._ratios;0===i.get().length&&(e=void 0),i.isActive()&&i.halt(),i.set(t,e,n),this._ratiosDirty=!0},i.prototype.getSize=function(){return this._size},i.prototype.commit=function(t){var e,n=t.size,i=t.transform,s=t.origin,u=t.opacity,c=this._ratios.get(),h=this.options.direction,l=n[h];(l!==this._size[h]||this._ratiosDirty||this._ratios.isActive()||h!==this._cachedDirection||o.call(this,c,h))&&(r.call(this,c,l,h),l!==this._size[h]&&(this._size[0]=n[0],this._size[1]=n[1]),h!==this._cachedDirection&&(this._cachedDirection=h),this._ratiosDirty&&(this._ratiosDirty=!1));for(var p=[],f=0;f<c.length;f++)e=[void 0,void 0],l=this._cachedLengths[f],e[h]=l,p.push({transform:this._cachedTransforms[f],size:e,target:this._nodes[f].render()});return n&&0!==s[0]&&0!==s[1]&&(i=a.moveThen([-n[0]*s[0],-n[1]*s[1],0],i)),{transform:i,size:n,opacity:u,target:p}},n.exports=i}),define("views/LanguagePieView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/views/FlexibleLayout","famous/utilities/Timer","famous/core/EventHandler","famous/transitions/Transitionable"],function(t,e,n){function i(t){u.apply(this,arguments),this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput);var e=new c({ratios:[6,6]}),n=window.innerWidth,i=(window.innerHeight,.82),p=.1;this.contentWidth=i*n,this.svgWidth=Math.floor(p*n);var f=r(this.svgWidth),d=new l([this.contentWidth,100]);window.onresize=function(){n=window.innerWidth},this.languageModifier=new s({size:d.get(),transform:a.translate(0,0,10),origin:[.5,0],align:[.5,0]}),this.svgLanguage=new o({size:[void 0,void 0],content:f,properties:{fontSize:"11px",zIndex:10}}),this.textLanguage=new o({size:[void 0,void 0],content:"<h2> Language</h2><p>Ukrainian, Lithuanian, Bulgarian, and other Eastern European communities speak Russian, which makes the Russian speaking community the second largest segment of the foreign born US population, which is estimated at 5 million people.</p>",properties:{zIndex:10}});var g=[];g.push(this.svgLanguage),g.push(this.textLanguage),e.sequenceFrom(g),this.bgColor=new o({size:[void 0,void 0],properties:{backgroundColor:"#FFFAE2"}}),this.svgLanguage.pipe(t),this.add(this.bgColor),this.add(this.languageModifier).add(e)}function r(t){var e=document.createElementNS(d3.ns.prefix.svg,"svg"),n=t,i=n,r=i/2,o=d3.scale.category20c(),s=[{label:"Russian",value:20},{label:"Hispanic",value:65},{label:"Others",value:25}],a=d3.select(e).data([s]).attr("width",n).attr("height",i).append("svg:g").attr("transform","translate("+r+","+r+")"),u=d3.layout.pie().value(function(t){return t.value}),c=d3.svg.arc().outerRadius(r),h=a.selectAll("g.slice").data(u).enter().append("svg:g").attr("class","slice");return h.append("svg:path").attr("fill",function(t,e){return o(e)}).attr("d",function(t){return c(t)}),h.append("svg:text").attr("transform",function(t){return t.innerRadius=0,t.outerRadius=r,"translate("+c.centroid(t)+")"}).attr("text-anchor","middle").text(function(t,e){return s[e].label}),e}var o=t("famous/core/Surface"),s=t("famous/core/Modifier"),a=t("famous/core/Transform"),u=t("famous/core/View"),c=t("famous/views/FlexibleLayout"),h=(t("famous/utilities/Timer"),t("famous/core/EventHandler")),l=t("famous/transitions/Transitionable");i.prototype=Object.create(u.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={},n.exports=i}),define("text",["module"],function(t){var e,n,i,r,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,h=c&&location.protocol&&location.protocol.replace(/\:/,""),l=c&&location.hostname,p=c&&(location.port||void 0),f={},d=t.config&&t.config()||{};return e={version:"2.0.12",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(u);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=s[e];try{t=new ActiveXObject(n)}catch(i){}if(t){s=[n];break}}return t},parseName:function(t){var e,n,i,r=!1,o=t.indexOf("."),s=0===t.indexOf("./")||0===t.indexOf("../");return-1!==o&&(!s||o>1)?(e=t.substring(0,o),n=t.substring(o+1,t.length)):e=t,i=n||e,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:e=i),{moduleName:e,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,i,r){var o,s,a,u=e.xdRegExp.exec(t);return u?(o=u[2],s=u[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==r)):!0},finishLoad:function(t,n,i,r){i=n?e.strip(i):i,d.isBuild&&(f[t]=i),r(i)},load:function(t,n,i,r){if(r&&r.isBuild&&!r.inlineText)return void i();d.isBuild=r&&r.isBuild;var o=e.parseName(t),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),u=d.useXhr||e.useXhr;return 0===a.indexOf("empty:")?void i():void(!c||u(a,h,l,p)?e.get(a,function(n){e.finishLoad(t,o.strip,n,i)},function(t){i.error&&i.error(t)}):n([s],function(t){e.finishLoad(o.moduleName+"."+o.ext,o.strip,t,i)}))},write:function(t,n,i){if(f.hasOwnProperty(n)){var r=e.jsEscape(f[n]);i.asModule(t+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,n,i,r,o){var s=e.parseName(n),a=s.ext?"."+s.ext:"",u=s.moduleName+a,c=i.toUrl(s.moduleName+a)+".js";e.load(u,i,function(){var n=function(t){return r(c,t)};n.asModule=function(t,e){return r.asModule(t,c,e)},e.write(t,u,n,o)},o)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),e.get=function(t,e,i){try{var r=n.readFileSync(t,"utf8");0===r.indexOf("")&&(r=r.substring(1)),e(r)}catch(o){i&&i(o)}}):"xhr"===d.env||!d.env&&e.createXhr()?e.get=function(t,n,i,r){var o,s=e.createXhr();if(s.open("GET",t,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);d.onXhr&&d.onXhr(s,t),s.onreadystatechange=function(){var e,r;4===s.readyState&&(e=s.status||0,e>399&&600>e?(r=new Error(t+" HTTP status: "+e),r.xhr=s,i&&i(r)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,t))},s.send(null)}:"rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,i,r="utf-8",o=new java.io.File(t),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),u="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);u=String(n.toString())}finally{a.close()}e(u)}:("xpconnect"===d.env||!d.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,e.get=function(t,e){var n,s,a,u={};o&&(t=t.replace(/\//g,"\\")),a=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),s.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),u),s.close(),n.close(),e(u.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),e}),define("text!jade/demographicsPage.html",[],function(){return'<section class="svet-services"><article class="dem-content-top"><div class="h-services text-center">Demographics</div><p class="text-center">The Russian - American population in the United States is estimated at nearly</p><h2 class="text-center">2.9 million people</h2><br/><p>It is the second largest ethnic market, making up 10.4% of 28.4 million foreign born people in the country.</p><h4>States with the highest concentration of the Russian-American population:</h4><p>New York Tri-State area  24% (approx. 696,000 people)<br/>California  17% (approx. 493,000 people)<br/>Illinois  16% (approx. 464,000 plus people)</p></article><aside class="sun-times"><div class="chicago-news text-center"><img src="img/dem/map.jpg"/></div></aside></section>'}),define("views/DemographicView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/views/GridLayout","famous/utilities/Timer","famous/core/EventHandler","views/LanguagePieView","text!jade/demographicsPage.html"],function(t,e,n){function i(e){o.apply(this,arguments),this.eventInput=new a,this.eventOutput=new a,a.setInputHandler(this,this.eventInput),a.setOutputHandler(this,this.eventOutput);var n=t("text!jade/demographicsPage.html");this.contentPart1=new r({size:[void 0,void 0],content:n,properties:{backgroundColor:"#FFFAE2"}}),this.languagePieView=new u(e);var i=[];i.push(this.contentPart1),i.push(this.languagePieView);var c=new s({direction:1,dimensions:[1,2]});c.sequenceFrom(i),this.add(c),this.contentPart1.pipe(e)}var r=t("famous/core/Surface"),o=(t("famous/core/Modifier"),t("famous/core/Transform"),t("famous/core/View")),s=t("famous/views/GridLayout"),a=(t("famous/utilities/Timer"),t("famous/core/EventHandler")),u=t("views/LanguagePieView");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={},n.exports=i}),define("text!jade/homePage.html",[],function(){return'<section><article class="svet-media-group"><h2 class="h-services text-center">SVET Russian Media Group</h2><p class="text-center">is the Midwests first and oldest publishing and advertising company serving the Russian, Ukrainian and Lithuanian communities since 1990.</p></article><article class="svet-services"><div class="productsServises"><div class="home-icon-container news-daily"><img src="img/home-page/news-daily.png"/></div><div class="h-home">SVET<br/>Daily Newspaper</div><p>Over 48 pages  circulation 12,000 copies weekly. It is the most up-to-date Russian language newspaper outside of Russia. It appears on the newsstands after 3:00 PM. It is free of charge. In addition, subscribers receive newspapers in their homes via second class mail.</p></div><div class="productsServises"><div class="home-icon-container container-yp"><div class="news-weekly"><img src="img/home-page/yellow-pages.png"/></div></div><div class="h-home">Russian-American<br/>Yellow Pages</div><p>The Russian Yellow Pages present over 650 full color pages of services and products to the Russian-speaking community in the Chicagoland area. Free distribution in Chicago and its North and Northwestern suburbs.</p></div><div class="productsServises"><div class="home-icon-container container-weekly"><div class="news-weekly"><img src="img/home-page/news-weekly2.png"/></div></div><div class="h-home">Saturday Plus<br/>Weekly Newspaper</div><p>Free Paper with over 48 pages weekly. It covers entertainment and other social news in Unites States and abroad. It packs the latest information on travel destinations and hot vacation spots.</p></div><div class="productsServises"><div class="home-icon-container container-radio"><div class="news-weekly"><img src="img/home-page/radio2.png"/></div></div><div class="h-home">Radio<br/>Program OSA</div><p>Sunday morning talk show with Alex Etman airs every Sunday on 1240 AM radio from 11:00 a.m. to 1:00 p.m. listen to Radio OSA programs.</p></div></article></section>'}),define("text!jade/aboutUsPage.html",[],function(){return'<section class="svet-services"><aside class="sun-times"><div class="chicago-news text-center"><img src="img/aboutUs/aboutus_1.jpg"/></div></aside><article class="about-content-top"><div class="h-services text-center">SVET International publishing house</div><p>From the viewpoint of our partners SVET International Publishing House is a typical "company with the past", which basic philosophy is hinged upon well-taken conservatism, weighed approach and clear calculations. It was not for nothing that all previous outside convulsions and crises bypassed our publishing house. Our meticulous attitude towards entering into deals is completely justified by strict performance of undertaken liabilities and flawless financial stability.</p><p>The competitors consider SVET International Publishing House to be a typical "company with the future", with steady dynamic growth of all indicators which have to be taken into account willingly or not. Once in two years a completely new project is given birth, which is introducing radical changes into the ethnic publishing market in Chicagoland.</p><p>Our colleagues recognize with an imperceptible shade of envy that the SVET International Publishing house managed to combine incompatible things: the creative approach to technologies and technological approach to creativity.</p></article></section><section class="svet-services"><br/><article class="about-content-bottom"><p>One more feature is even more intriguing. For some reason it is a current belief that poverty and dependence are inherent to the nature of every writing person. This formula is overturned by the very existence of SVET Publishing House where creativity in journalism is rated as high as commercial or administrative skills.</p><p>The fact of popularity of SVET\'s publications speaks for itself and do not need any further commends. Each paper is ranking highest among other press publications in its field. The total circulation of publishing house is leading well ahead all other Chicago-based Russian language press publications at large.</p><p>Over the past THIRTEEN years our publishing house has accumulated a considerable brainpower and intellectual potential. Journalists and designers regard invitation for work in SVET International Publishing House as a highest appreciation of their proficiency and skills.</p><p>What does it mean in the real life? Our partners can completely rely on immaculate professionalism of our managers. They have the best authors and designers at their command. SVET International Publishing House is associated not only with the most effective advertising media. It is a great source of new ideas!</p></article><aside class="sun-times"><div class="chicago-news text-center"><img src="img/aboutUs/aboutus_2.jpg"/></div></aside></section>'}),define("text!jade/clientsPage.html",[],function(){return'<section class="svet-services"><div class="h-services text-center">Our Clients</div><article><div class="clients-content"><h2>Finance</h2><ul><li>MB Financial Bank</li><li>Harris Bank</li><li>ColeTaylor Bank</li><li>Devon Bank</li><li>Western Union</li><li>Bank Financial</li><li>Robbins & Lloyd Mortgage Corporation</li><li><em>And more...</em></li></ul></div><div class="clients-content"><h2>Auto</h2><ul><li>Arlington Toyota</li><li>Bermans Auto Group</li><li>Castle Honda</li><li>Fields Dodge and Jeep</li><li>Fields Infinity</li><li>Harley Davidson</li><li>Lexus of Orland</li><li>Prestige Leasing</li><li>Rich\'s Yamaha</li><li>Star Nissan</li><li><em>And more...</em></li></ul></div><div class="clients-content"><h2>Stores</h2><ul><li>Studio 41 Home Design</li><li>Home Depot</li><li>C.D. Peacock</li><li>Fresh Farms</li><li>Highland Health Food</li><li>Garden Fresh</li><li>Farmers Best</li><li>H-Mart</li><li>Bendes Specialty Foods</li><li>Jimenez</li><li><em>And more...</em></li></ul></div></article><article><div class="clients-content"><h2>Restaurants</h2><ul><li>Maggianos</li><li>McCormick and Schmicks</li><li>Zhivago (Skokie)</li><li>Kamehachi (Chicago, Northbrook)</li><li>Gridleys Grille (Long Grove)</li><li>Bella Via (Highland Park)</li><li>Dover Straits</li><li>Elephant (Niles)</li><li>Michael (Winnetka)</li><li>Le Titi De Paris (Arl Hts)</li><li>India House (Buffalo Grove)</li><li>Jimmys Charhouse (Riverwoods)</li><li>Omega (Niles)</li><li>Tapas Gitana (Northfield)</li><li>Raw Bar (Chicago)</li><li>Wild Fish (Arl Hts)</li><li>Brazzaz (Chicago)</li><li><em>And more...</em></li></ul></div><div class="clients-content"><h2>Insurance</h2><ul><li>Allstate Insurance / Roman Sher</li><li>State Farm Insurance / Bonnie Perkovich</li><li>Country Insurance / Paul Moskvitin</li><li>Country Insurance / Yelena Sokolova</li><li>American Family insurance / Renata Tolvaisaite</li><li><em>And more...</em></li></ul><h2>Health</h2><ul><li>Pearle Vision</li><li>Womens Health First</li><li>Gordin Medical Center</li><li>Rush North Shore Medical Center</li><li>IL Dental Center</li><li>North Shore Vascular</li><li>Mount Sinai Hospital</li><li>Dr. Elena Levitina</li><li>Healthy Trust<em>And more...</em></li></ul></div><div class="clients-content"><h2>Attorneys</h2><ul><li>Davidson & Schiller, LLC</li><li>Chepov & Scott</li><li>Law Office of A. Gruzmark</li><li>Law Office of A. Liberfarb</li><li>DeFrenza, Moskoni Matyjewicz, P.C.</li><li>Birg & Meltser</li><li>Law office of A. Tolmatsky</li><li>Law Office of L. Golub</li><li>Law office of M. Kern</li><li> Slava A. Tenenbaum, chartered</li><li>Barry Rabovsky</li><li><em>And more...</em></li></ul></div></article><!--article--><!--    .clients-img-container--><!--        img(src="img/clients/clientsBEST.jpg")--></section>'}),define("text!jade/radioPage.html",[],function(){return'<section class="svet-services"><div class="h-services text-center">Radio "OSA"</div><div class="live-radio text-center"><a href="mms://medik.imcpro.com/svet_live"><img src="img/radio/radio_5.png"/></a><h2><a href="mms://medik.imcpro.com/svet_live">Live Translation</a></h2></div><br/><hr/><br/><h2>Archive 2014</h2><article><div class="radio-content-inline winter"><h4>December</h4><p><a href="mms://strean.imcpro.com/svet/2014-12-28.asf">12.28.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-12-21.asf">12.21.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-12-14.asf">12.14.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-12-07.asf">12.07.2014</a></p></div><div class="radio-content-inline fall"><h4>November</h4><p><a href="mms://strean.imcpro.com/svet/2014-11-30.asf">11.30.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-11-23.asf">11.23.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-11-16.asf">11.16.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-11-09.asf">11.09.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-11-02.asf">11.02.2014</a></p></div><div class="radio-content-inline fall"><h4>October</h4><p><a href="mms://strean.imcpro.com/svet/2014-10-26.asf">10.26.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-10-19_001.asf">10.19.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-10-19.asf">10.19.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-10-12.asf">10.12.2014</a></p></div><div class="radio-content-inline fall"><h4>September</h4><p><a href="mms://strean.imcpro.com/svet/2014-09-28.asf">09.28.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-09-21.asf">09.21.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-09-14.asf">09.14.2014</a></p></div><div class="radio-content-inline summer"><h4>August</h4><p><a href="mms://strean.imcpro.com/svet/2014-08-31.asf">08.31.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-08-24.asf">08.24.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-08-17.asf">08.17.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-08-10.asf">08.10.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-08-03.asf">08.03.2014</a></p></div><div class="radio-content-inline summer"><h4>July</h4><p><a href="mms://strean.imcpro.com/svet/2014-07-27.asf">07.27.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-07-20.asf">07.20.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-07-13_001.asf">07.13.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-07-13.asf">07.13.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-07-06.asf">07.06.2014</a></p></div><div class="radio-content-inline summer"><h4>June</h4><p><a href="mms://strean.imcpro.com/svet/2014-06-29.asf">06.29.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-06-22.asf">06.22.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-06-15.asf">06.15.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-06-08.asf">06.08.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-06-01.asf">06.01.2014</a></p></div><div class="radio-content-inline spring"><h4>May</h4><p><a href="mms://strean.imcpro.com/svet/2014-05-25.asf">05.25.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-05-18.asf">05.18.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-05-04.asf">05.04.2014</a></p></div><div class="radio-content-inline spring"><h4>April</h4><p><a href="mms://strean.imcpro.com/svet/2014-04-27.asf">04.27.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-04-21.asf">04.21.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-04-20.asf">04.20.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-04-13.asf">04.13.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-04-06.asf">04.06.2014</a></p></div><div class="radio-content-inline spring"><h4>March</h4><p><a href="mms://strean.imcpro.com/svet/2014-03-30.asf">03.30.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-03-23.asf">03.23.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-03-16.asf">03.16.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-03-09.asf">03.09.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-03-02.asf">03.02.2014</a></p></div><div class="radio-content-inline winter"><h4>February</h4><p><a href="mms://strean.imcpro.com/svet/2014-02-23.asf">02.23.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-02-16.asf">02.16.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-02-09.asf">02.09.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-02-02.asf">02.02.2014</a></p></div><div class="radio-content-inline winter"><h4>January</h4><p><a href="mms://strean.imcpro.com/svet/2014-01-26.asf">01.26.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-01-19.asf">01.19.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-01-12.asf">01.12.2014</a></p><p><a href="mms://strean.imcpro.com/svet/2014-01-09.asf">01.09.2014</a></p></div></article></section><section class="svet-services"><br/><hr/><br/><h2>Archive 2013</h2><article><div class="radio-content-inline winter"><h4>December</h4><p><a href="mms://strean.imcpro.com/svet/2013-12-29.asf">12.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-12-22.asf">12.22.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-12-15.asf">12.15.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-12-08.asf">12.08.2013</a></p></div><div class="radio-content-inline fall"><h4>November</h4><p><a href="mms://strean.imcpro.com/svet/2013-11-24.asf">11.24.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-17_001.asf">11.17.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-17.asf">11.17.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-10_002.asf">11.10.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-10_001.asf">11.10.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-10.asf">11.10.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-03.asf">11.03.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-03_002.asf">11.03.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-11-03_001.asf">11.03.2013</a></p></div><div class="radio-content-inline fall"><h4>October</h4><p><a href="mms://strean.imcpro.com/svet/2013-10-27.asf">10.27.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-10-20_001.asf">10.20.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-10-20.asf">10.20.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-10-13.asf">10.13.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-10-06_002.asf">10.06.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-10-06_001.asf">10.06.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-10-06.asf">10.06.2013</a></p></div><div class="radio-content-inline fall"><h4>September</h4><p><a href="mms://strean.imcpro.com/svet/2013-09-29.asf">09.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-22.asf">09.22.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-22_001.asf">09.22.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-22_002.asf">09.22.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-15.asf">09.15.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-08_001.asf">09.08.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-08.asf">09.08.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-08_002.asf">09.08.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-01_003.asf">09.01.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-01_002.asf">09.01.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-01_001.asf">09.01.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-09-01.asf">09.01.2013</a></p></div><div class="radio-content-inline summer"><h4>August</h4><p><a href="mms://strean.imcpro.com/svet/2013-08-25.asf">08.25.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-25_001.asf">08.25.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-25_003.asf">08.25.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-25_002.asf">08.25.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-18_002.asf">08.18.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-18_001.asf">08.18.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-18.asf">08.18.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-11_003.asf">08.11.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-11_002.asf">08.11.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-11_001.asf">08.11.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-11.asf">08.11.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-04.asf">08.04.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-04_002.asf">08.04.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-08-04_001.asf">08.04.2013</a></p></div><div class="radio-content-inline summer"><h4>July</h4><p><a href="mms://strean.imcpro.com/svet/2013-07-30.asf">07.30.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-07-22.asf">07.22.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-07-14.asf">07.14.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-07-14_001.asf">07.14.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-07-08.asf">07.08.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-07-07_001.asf">07.07.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-07-07.asf">07.07.2013</a></p></div><div class="radio-content-inline summer"><h4>June</h4><p><a href="mms://strean.imcpro.com/svet/2013-06-30_001.asf">06.30.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-06-30.asf">06.30.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-06-23.asf">06.23.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-06-16.asf">06.16.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-06-09.asf">06.09.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-06-02.asf">06.02.2013</a></p></div><div class="radio-content-inline spring"><h4>May</h4><p><a href="mms://strean.imcpro.com/svet/2013-05-26.asf">05.26.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-05-20.asf">05.20.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-05-20_001.asf">05.20.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-05-19.asf">05.19.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-05-12.asf">05.12.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-05-06.asf">05.06.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-05-02.asf">05.02.2013</a></p></div><div class="radio-content-inline spring"><h4>April</h4><p><a href="mms://strean.imcpro.com/svet/2013-04-30.asf">04.30.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-29.asf">04.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-29_001.asf">04.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-29_002.asf">04.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-29_004.asf">04.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-29_003.asf">04.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-29_005.asf">04.29.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-28.asf">04.28.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-25_002.asf">04.25.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-25_001.asf">04.25.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-25.asf">04.25.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-21_001.asf">04.21.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-21.asf">04.21.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-04-14.asf">04.14.2013</a></p></div><div class="radio-content-inline spring"><h4>March</h4><p><a href="mms://strean.imcpro.com/svet/2013-03-10.asf">03.10.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-03-10_001.asf">03.10.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-03-03_002.asf">03.03.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-03-03_001.asf">03.03.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-03-03.asf">03.03.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-03-03_003.asf">03.03.2013</a></p></div><div class="radio-content-inline winter"><h4>February</h4><p><a href="mms://strean.imcpro.com/svet/2013-02-24.asf">02.24.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-02-17.asf">02.17.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-02-10.asf">02.10.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-02-03.asf">02.03.2013</a></p></div><div class="radio-content-inline winter"><h4>January</h4><p><a href="mms://strean.imcpro.com/svet/2013-01-27.asf">01.27.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-01-20.asf">01.20.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-01-13.asf">01.13.2013</a></p><p><a href="mms://strean.imcpro.com/svet/2013-01-06.asf">01.06.2013</a></p></div></article></section>'}),define("text!jade/contactUsPage.html",[],function(){return'<section class="svet-services"><div class="h-services text-center">Contact Us</div><br/><article class="dem-content-bottom"><table width="220" border="0" cellspacing="0" cellpadding="0" style="margin-top:10px;" class="simpleText"><tbody><tr><td></td><td colspan="2">900 Skokie Blvd., Suite 103, Northbrook, IL 60062<br/>Tel. (847)715-9407<br/>Fax: (847)715-9677<br/>E-mail:<a href="mailto:svet@svet.com" class="menu2"> manager@svet.com</a></td></tr><tr><td colspan="3" height="8"></td></tr></tbody></table></article></section>'
}),define("views/HomeScroll",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/views/ScrollContainer","famous/core/ViewSequence","famous/modifiers/StateModifier","famous/core/EventHandler","d3/d3","views/DemographicView","text!jade/homePage.html","text!jade/aboutUsPage.html","text!jade/clientsPage.html","text!jade/radioPage.html","text!jade/contactUsPage.html"],function(t,e,n){function i(t){this.generalSync=t,this.eventInput=new a,a.setInputHandler(this,this.eventInput),this.eventInput.on("pageChange",function(t){alert(t)}),s.apply(this,arguments),r.call(this),this.scrollview.setOptions({pageSwitchSpeed:.2,paginated:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,speedLimit:1,margin:5330})}function r(){var e=this,n=this.generalSync,i=t("text!jade/homePage.html"),r=t("text!jade/aboutUsPage.html");this.demographicsPage=new u(n);var s=t("text!jade/clientsPage.html"),a=t("text!jade/radioPage.html"),c=t("text!jade/contactUsPage.html");this.contents=[],this.contentHome=new o({size:[void 0,void 0],content:i,properties:{fontSize:"16px",backgroundColor:"#FFE1D0"}}),this.contentAbout=new o({size:[void 0,void 0],content:r,properties:{backgroundColor:"#E6FFEF"}}),this.contentClients=new o({size:[void 0,void 0],content:s,properties:{backgroundColor:"#E6FFDB"}}),this.contentRadio=new o({size:[void 0,void 0],content:a,properties:{backgroundColor:"#FFF1E9"}}),this.contentContact=new o({size:[void 0,void 0],content:c,properties:{backgroundColor:"#FFE1D0"}}),this.contentHome.pipe(n),this.contentAbout.pipe(n),this.demographicsPage.pipe(n),this.contentClients.pipe(n),this.contentRadio.pipe(n),this.contentContact.pipe(n),n.on("start",function(){}),n.on("update",function(t){delta=t.delta[1],0>delta?e.scrollview.goToNextPage():e.scrollview.goToPreviousPage()}),n.on("end",function(){}),this.contents.push(this.demographicsPage),this.contents.push(this.contentHome),this.contents.push(this.contentAbout),this.contents.push(this.contentClients),this.contents.push(this.contentRadio),this.contents.push(this.contentContact),this.sequenceFrom(this.contents)}var o=t("famous/core/Surface"),s=(t("famous/core/Modifier"),t("famous/core/Transform"),t("famous/core/View"),t("famous/views/ScrollContainer")),a=(t("famous/core/ViewSequence"),t("famous/modifiers/StateModifier"),t("famous/core/EventHandler")),u=(t("d3/d3"),t("views/DemographicView"));i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={},n.exports=i}),define("views/HeaderView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View"],function(t,e,n){function i(){c.apply(this,arguments),r.call(this),o.call(this)}function r(){var t=new s({size:[void 0,void 0],properties:{backgroundColor:"#FC6E51"}});this.hamburgerSurface=new s({size:[53,void 0],content:'<img width="53" src="../../img/hamburger-template.png"/>',properties:{zIndex:"10"}}),this.titleSurface=new s({size:[void 0,void 0],content:"SVET Media Group",properties:{fontSize:"22px",textAlign:"center",color:"white",lineHeight:"50px",fontWeight:"700",backgroundColor:"#FC6E51"}}),this.hamburgerModifier=new a({transform:u.translate(0,0,2)}),this.bgModifier=new a({transform:u.translate(0,0,1)}),this.titleModifier=new a({transform:u.translate(0,0,1),origin:[.5,0],align:[.5,0]}),this._add(this.titleModifier).add(this.titleSurface),this._add(this.hamburgerModifier).add(this.hamburgerSurface),this._add(t)}function o(){this.hamburgerSurface.on("touchstart",function(){this.hamburgerModifier.setOpacity(.5)}.bind(this)),this.hamburgerSurface.on("mousedown",function(){this.hamburgerModifier.setOpacity(.5)}.bind(this)),this.hamburgerSurface.on("click",function(){this.hamburgerModifier.setOpacity(1),this._eventOutput.emit("menuToggle")}.bind(this))}var s=t("famous/core/Surface"),a=t("famous/core/Modifier"),u=t("famous/core/Transform"),c=t("famous/core/View");i.prototype=Object.create(c.prototype),i.prototype.constructor=i,n.exports=i}),define("views/PageView",["require","exports","module","d3/d3","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","views/HomeScroll","famous/views/HeaderFooterLayout","famous/views/GridLayout","views/HeaderView","text!jade/homePage.html","text!jade/aboutUsPage.html","text!jade/demographicsPage.html","text!jade/clientsPage.html","text!jade/radioPage.html","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/inputs/ScrollSync","famous/core/Transform","famous/transitions/Transitionable"],function(t,e,n){function i(){var t=this;l.register({touch:p,scroll:f});var e=new l(["mouse","touch","scroll"]);s.apply(this,arguments),this.layout=new u({headerSize:50,footerSize:50}),this.header=new h,this.header.pipe(this),this.content=new a(e),this.content.pipe(this);var n,i,g,m,v,y=0;e.on("update",function(e){delta=e.delta[1],0>delta?(v=-1,y++):(y--,v=1),y>5&&(y=5),0>y&&(y=0);try{i=t.states[y+v]}catch(r){i=null}null!==i&&i!==n&&(n=i,n.set(0,{duration:100})),m=t.states[y],m!==g&&(g=m,g.set(1,{duration:200}))}),this.footers=[],this.footer=new c({dimensions:[3,1]}),this.footer.pipe(this),this.footerLeft=new r({size:[void 0,void 0],properties:{backgroundSize:"cover"}}),this.footerCenter=new r({size:[void 0,void 0],properties:{backgroundSize:"cover"}}),this.footerRight=new r({size:[void 0,void 0],properties:{backgroundSize:"cover"}}),this.footers.push(this.footerLeft),this.footers.push(this.footerCenter),this.footers.push(this.footerRight),this.footer.sequenceFrom(this.footers),this.layout.content.add(this.content),this.layout.header.add(this.header),this.state1=new d(1),this.modifier1=new o({opacity:function(){return t.state1.get()}}),this.surface1=new r({size:[void 0,void 0],properties:{backgroundColor:"purple"}}),this.state2=new d(0),this.modifier2=new o({opacity:function(){return t.state2.get()}}),this.surface2=new r({size:[void 0,void 0],properties:{backgroundColor:"green"}}),this.state3=new d(0),this.modifier3=new o({opacity:function(){return t.state3.get()}}),this.surface3=new r({size:[void 0,void 0],properties:{backgroundColor:"red"}}),this.state4=new d(0),this.modifier4=new o({opacity:function(){return t.state4.get()}}),this.surface4=new r({size:[void 0,void 0],properties:{backgroundColor:"yellow"}}),this.state5=new d(0),this.modifier5=new o({opacity:function(){return t.state5.get()}}),this.surface5=new r({size:[void 0,void 0],properties:{backgroundColor:"brown"}}),this.state6=new d(0),this.modifier6=new o({opacity:function(){return t.state6.get()}}),this.surface6=new r({size:[void 0,void 0],properties:{backgroundColor:"blue"}}),this.states=[],this.states.push(this.state1),this.states.push(this.state2),this.states.push(this.state3),this.states.push(this.state4),this.states.push(this.state5),this.states.push(this.state6),this.layout.footer.add(this.modifier1).add(this.surface1).add(this.footer),this.layout.footer.add(this.modifier2).add(this.surface2).add(this.footer),this.layout.footer.add(this.modifier3).add(this.surface3).add(this.footer),this.layout.footer.add(this.modifier4).add(this.surface4).add(this.footer),this.layout.footer.add(this.modifier5).add(this.surface5).add(this.footer),this.layout.footer.add(this.modifier6).add(this.surface6).add(this.footer),this._eventInput.pipe(this._eventOutput),this.add(this.layout)}var r=(t("d3/d3"),t("famous/core/Surface")),o=t("famous/core/Modifier"),s=(t("famous/core/Transform"),t("famous/core/View")),a=t("views/HomeScroll"),u=t("famous/views/HeaderFooterLayout"),c=t("famous/views/GridLayout"),h=t("views/HeaderView"),l=(t("text!jade/homePage.html"),t("text!jade/aboutUsPage.html"),t("text!jade/demographicsPage.html"),t("text!jade/clientsPage.html"),t("text!jade/radioPage.html"),t("famous/inputs/GenericSync")),p=(t("famous/inputs/MouseSync"),t("famous/inputs/TouchSync")),f=t("famous/inputs/ScrollSync"),d=(t("famous/core/Transform"),t("famous/transitions/Transitionable"));i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.navigateTo=function(t){for(var e=0;e<this.states.length;e++){var n=this.states[e];n.set(0)}var i=this.states[t];i.set(1,{duration:300}),this.content.scrollview.goToPage(t)},n.exports=i}),define("views/AppView",["require","exports","module","famous/core/Surface","famous/core/Modifier","famous/core/Transform","famous/core/View","famous/inputs/MouseSync","famous/inputs/GenericSync","famous/transitions/Transitionable","famous/views/HeaderFooterLayout","famous/core/EventHandler","./MenuView","./PageView"],function(t,e,n){function i(){var t=this;a.apply(this,arguments),this.menuToggle=!1,this.eventInput=new l,l.setInputHandler(this,this.eventInput),this.menuView=new p,this.menuView.pipe(this),this.pageView=new f,this.pageViewPos=new h(0),this.eventInput.on("navigateTo",function(e){t.pageView.navigateTo(e)}),this.pageModifier=new o,this.pageModifier.transformFrom(function(){return s.translate(this.pageViewPos.get(),0,0)}.bind(this)),this.pageView.on("menuToggle",this.toggleMenu.bind(this)),this.add(this.menuView),this.add(this.pageModifier).add(this.pageView),r.call(this)}function r(){c.register(u),this.sync=new c(function(){return this.pageViewPos.get(0)}.bind(this),{direction:c.DIRECTION_X}),this.pageView.pipe(this.sync),this.sync.on("update",function(t){0===this.pageViewPos.get()&&t.position>0&&this.menuView.animateNavItems(),this.pageViewPos.set(Math.min(Math.max(0,t.position),this.options.maxOpenPos))}.bind(this)),this.sync.on("end",function(t){{var e=t.velocity;this.pageViewPos.get()}this.pageViewPos.get()>this.options.posThreshold?e<-this.options.velThreshold?this.slideLeft():this.slideRight():e>this.options.velThreshold?this.slideRight():this.slideLeft()}.bind(this))}var o=(t("famous/core/Surface"),t("famous/core/Modifier")),s=t("famous/core/Transform"),a=t("famous/core/View"),u=t("famous/inputs/MouseSync"),c=t("famous/inputs/GenericSync"),h=t("famous/transitions/Transitionable"),l=(t("famous/views/HeaderFooterLayout"),t("famous/core/EventHandler")),p=t("./MenuView"),f=t("./PageView");i.prototype=Object.create(a.prototype),i.prototype.constructor=i,i.DEFAULT_OPTIONS={posThreshold:95.5,velThreshold:.75,transition:{duration:300,curve:"easeOut"},maxOpenPos:191},i.prototype.toggleMenu=function(){this.menuToggle?this.slideLeft():(this.slideRight(),this.menuView.animateNavItems()),this.menuToggle=!this.menuToggle},i.prototype.slideLeft=function(){this.pageViewPos.set(0,this.options.transition,function(){this.menuToggle=!1}.bind(this))},i.prototype.slideRight=function(){this.pageViewPos.set(this.options.maxOpenPos,this.options.transition,function(){this.menuToggle=!0}.bind(this))},n.exports=i}),define("main",["require","famous/core/Engine","views/AppView"],function(t,e,n){var i=(t("famous/core/Transform"),e.createContext()),r=new n;i.add(r)}),define("main",function(){});